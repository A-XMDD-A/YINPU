{"version":3,"file":"vendors~2764c147-3c03731c15021c992eee.js","mappings":"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","sources":["webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AnnotationSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AnnotationsOverlay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AppProviders.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AudioViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/BackgroundPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Branding.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasAnnotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CanvasLayers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ChangeThemeDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollapsibleSection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CollectionInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/withRef.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CompanionWindowFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ErrorContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ErrorDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/FullScreenButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/GalleryView.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/GalleryViewThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/IIIFAuthentication.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/IIIFThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LanguageSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LocalePicker.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestForm.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestListItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestListItemError.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ManifestRelatedLinks.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MinimalWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MiradorMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/MosaicRenderPreview.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/OpenSeadragonViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/PrimaryWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SanitizedHtml.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ScrollIndicatedDialogContent.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchHit.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanelControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanelNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchResults.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SelectCollection.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexTableOfContents.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SidebarIndexThumbnail.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ThumbnailCanvasGrouping.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/VideoViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ViewerInfo.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ViewerNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Window.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowAuthenticationBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowCanvasNavigationControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowListButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowThumbnailSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBar.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarPluginArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarPluginMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopBarTitle.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowTopMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowViewSettings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/Workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceAdd.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceAddButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceArea.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceControlPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceControlPanelButtons.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceElastic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceElasticWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceExport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceImport.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMenuButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceMosaic.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/styles/react-mosaic-component.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceOptionsButton.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceOptionsMenu.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WorkspaceSelectionDialog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ZoomControls.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/PluginContext.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginMapping.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/PluginProvider.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/withPlugins.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/i18n.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginValidation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/extend/pluginPreprocessing.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/accessTokens.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/catalog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/companionWindows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/elasticLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/errors.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/infoResponses.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/manifests.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/search.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/viewers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/reducers/rootReducer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/iiif.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/app.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/sagas/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/createStore.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/createPluggableStore.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorViewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/init.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/index.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationResource.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationList.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasAnnotationDisplay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasWorld.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/ThumbnailNavigation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarAnnotationsPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarInfoPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarCanvasPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/AttributionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/SearchPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/LayersPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/CustomPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CompanionWindowRegistry.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/containers/WindowSideBarCollectionPanel.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorCanvas.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MiradorManifest.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/MosaicLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/OpenSeadragonCanvasOverlay.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/ThumbnailFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/TruncatedHit.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/asArray.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/htmlRules.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/readImageMetadata.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/plugins/OSDReferences.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/action-types.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/annotation.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/canvas.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/catalog.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/companionWindow.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/elasticLayout.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/errors.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/infoResponse.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/manifest.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/search.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/window.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/actions/workspace.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationItem.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationPage.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/AnnotationFactory.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/annotations.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/auth.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/lib/CanvasGroupings.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/canvases.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/companionWindows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/config.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/getters.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/layers.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/manifests.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/ranges.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/searches.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/sequences.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/utils.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/viewer.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/windows.js","webpack://mirador-integration/./node_modules/@etu/chinese-mirador/dist/es/src/state/selectors/workspace.js"],"sourcesContent":["import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getAnnotationResourcesByMotivation, getWindow } from '../state/selectors';\nimport { AnnotationSettings } from '../components/AnnotationSettings';\n/**\n * Mapping redux state to component props using connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    displayAll: getWindow(state, {\n      windowId: windowId\n    }).highlightAllAnnotations,\n    displayAllDisabled: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length < 2\n  };\n};\n/**\n * Mapping redux action dispatches to component props using connect\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    toggleAnnotationDisplay: function toggleAnnotationDisplay() {\n      dispatch(actions.toggleAnnotationDisplay(windowId));\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('AnnotationSettings'));\nexport default enhance(AnnotationSettings);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { AnnotationsOverlay } from '../components/AnnotationsOverlay';\nimport * as actions from '../state/actions';\nimport { getWindow, getSearchAnnotationsForWindow, getCompanionWindowsForContent, getTheme, getConfig, getPresentAnnotationsOnSelectedCanvases, getSelectedAnnotationId, getCurrentCanvasWorld } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    annotations: getPresentAnnotationsOnSelectedCanvases(state, {\n      windowId: windowId\n    }),\n    canvasWorld: getCurrentCanvasWorld(state, {\n      windowId: windowId\n    }),\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0,\n    drawSearchAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    highlightAllAnnotations: getWindow(state, {\n      windowId: windowId\n    }).highlightAllAnnotations,\n    hoveredAnnotationIds: getWindow(state, {\n      windowId: windowId\n    }).hoveredAnnotationIds,\n    palette: getTheme(state).palette,\n    searchAnnotations: getSearchAnnotationsForWindow(state, {\n      windowId: windowId\n    }),\n    selectedAnnotationId: getSelectedAnnotationId(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  deselectAnnotation: actions.deselectAnnotation,\n  hoverAnnotation: actions.hoverAnnotation,\n  selectAnnotation: actions.selectAnnotation\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('AnnotationsOverlay'));\nexport default enhance(AnnotationsOverlay);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getConfig, getTheme, getFullScreenEnabled } from '../state/selectors';\nimport { AppProviders } from '../components/AppProviders';\n/**\n * mapStateToProps - to hook up connect\n * @memberof App\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    createGenerateClassNameOptions: getConfig(state).createGenerateClassNameOptions,\n    isFullscreenEnabled: getFullScreenEnabled(state),\n    language: getConfig(state).language,\n    theme: getTheme(state),\n    translations: getConfig(state).translations\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceFullscreen: actions.setWorkspaceFullscreen\n};\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withPlugins('AppProviders'));\nexport default enhance(AppProviders);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { AudioViewer } from '../components/AudioViewer';\nimport { getConfig, getVisibleCanvasAudioResources, getVisibleCanvasCaptions } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    audioOptions: getConfig(state).audioOptions,\n    audioResources: getVisibleCanvasAudioResources(state, {\n      windowId: windowId\n    }) || [],\n    captions: getVisibleCanvasCaptions(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n/** */\n\n\nvar styles = function styles() {\n  return {\n    audio: {\n      width: '100%'\n    },\n    container: {\n      alignItems: 'center',\n      display: 'flex',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('AudioViewer'));\nexport default enhance(AudioViewer);","import { withPlugins } from '../extend/withPlugins';\nimport { BackgroundPluginArea } from '../components/BackgroundPluginArea';\nexport default withPlugins('BackgroundPluginArea')(BackgroundPluginArea);","import { withPlugins } from '../extend/withPlugins';\nimport { Branding } from '../components/Branding';\nexport default withPlugins('Branding')(Branding);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAnnotationResourcesByMotivationForCanvas, getCanvasLabel, getSelectedAnnotationId, getConfig } from '../state/selectors';\nimport { CanvasAnnotations } from '../components/CanvasAnnotations';\n/**\n * @param {Array} resources\n * @return {Array} [{ id: 'abc123', content: 'Annotation Content' }, ...]\n */\n\nfunction getIdAndContentOfResources(resources) {\n  return resources.map(function (resource, i) {\n    return {\n      content: resource.chars,\n      id: resource.id,\n      tags: resource.tags,\n      targetId: resource.targetId\n    };\n  });\n}\n/** For connect */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      windowId = _ref.windowId;\n  return {\n    annotations: getIdAndContentOfResources(getAnnotationResourcesByMotivationForCanvas(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })),\n    htmlSanitizationRuleSet: getConfig(state).annotations.htmlSanitizationRuleSet,\n    label: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    selectedAnnotationId: getSelectedAnnotationId(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  deselectAnnotation: actions.deselectAnnotation,\n  hoverAnnotation: actions.hoverAnnotation,\n  selectAnnotation: actions.selectAnnotation\n};\n/** For withStlyes */\n\nvar styles = function styles(theme) {\n  return {\n    annotationListItem: {\n      '&$hovered': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&:hover,&:focus': {\n        backgroundColor: theme.palette.action.hover\n      },\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      cursor: 'pointer',\n      whiteSpace: 'normal'\n    },\n    chip: {\n      backgroundColor: theme.palette.background.paper,\n      marginRight: theme.spacing(0.5),\n      marginTop: theme.spacing(1)\n    },\n    hovered: {},\n    sectionHeading: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CanvasAnnotations'));\nexport default enhance(CanvasAnnotations);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getDestructuredMetadata, getCanvas, getCanvasLabel, getCanvasDescription } from '../state/selectors';\nimport { CanvasInfo } from '../components/CanvasInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvasDescription: getCanvasDescription(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasLabel: getCanvasLabel(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasMetadata: getDestructuredMetadata(getCanvas(state, {\n      canvasId: canvasId,\n      companionWindowId: id,\n      windowId: windowId\n    }))\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('CanvasInfo'));\nexport default enhance(CanvasInfo);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { getCanvasLabel, getLayers, getSortedLayers } from '../state/selectors';\nimport { CanvasLayers } from '../components/CanvasLayers';\n/** For connect */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvasId = _ref.canvasId,\n      windowId = _ref.windowId;\n  return {\n    label: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    layerMetadata: getLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    }),\n    layers: getSortedLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateLayers: actions.updateLayers\n};\n/** For withStlyes */\n\nvar styles = function styles(theme) {\n  return {\n    dragging: {},\n    dragHandle: {\n      alignItems: 'center',\n      borderRight: \"0.5px solid \".concat(theme.palette.divider),\n      display: 'flex',\n      flex: 1,\n      flexDirection: 'row',\n      marginBottom: -1 * theme.spacing(2) + 0.5,\n      marginRight: theme.spacing(1),\n      marginTop: -1 * theme.spacing(2),\n      maxWidth: theme.spacing(3),\n      width: theme.spacing(3)\n    },\n    image: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider)\n    },\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    list: {\n      paddingTop: 0\n    },\n    listItem: {\n      '& $dragHandle': {\n        '&:hover': {\n          backgroundColor: theme.palette.action.hover\n        },\n        backgroundColor: theme.palette.shades.light\n      },\n      '&$dragging': {\n        '& $dragHandle, & $dragHandle:hover': {\n          backgroundColor: theme.palette.action.selected\n        },\n        backgroundColor: theme.palette.action.hover\n      },\n      alignItems: 'stretch',\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      cursor: 'pointer',\n      paddingBottom: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    },\n    opacityIcon: {\n      marginRight: theme.spacing(0.5)\n    },\n    opacityInput: _objectSpread(_objectSpread({}, theme.typography.caption), {}, {\n      '&::-webkit-outer-spin-button,&::-webkit-inner-spin-button': {\n        '-webkit-appearance': 'none',\n        margin: 0\n      },\n      '-moz-appearance': 'textfield',\n      textAlign: 'right',\n      width: '3ch'\n    }),\n    sectionHeading: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    },\n    slider: {\n      marginLeft: theme.spacing(2),\n      marginRight: theme.spacing(2),\n      maxWidth: 150\n    },\n    thumbnail: {\n      minWidth: 50\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps));\nexport default enhance(CanvasLayers);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getThemeIds, getConfig } from '../state/selectors';\nimport { ChangeThemeDialog } from '../components/ChangeThemeDialog';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ChangeThemeDialog\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    setSelectedTheme: function setSelectedTheme(theme) {\n      return dispatch(actions.updateConfig({\n        selectedTheme: theme\n      }));\n    }\n  };\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof ChangeThemeDialog\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    selectedTheme: getConfig(state).selectedTheme,\n    themeIds: getThemeIds(state)\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    dark: {\n      color: '#000000'\n    },\n    dialogContent: {\n      padding: 0\n    },\n    light: {\n      color: '#BDBDBD'\n    },\n    listitem: {\n      '&:focus': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      cursor: 'pointer'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ChangeThemeDialog'));\nexport default enhance(ChangeThemeDialog);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { CollapsibleSection } from '../components/CollapsibleSection';\nvar styles = {\n  button: {\n    padding: 0\n  },\n  container: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  heading: {\n    cursor: 'pointer'\n  }\n};\nvar enhance = compose(withTranslation(), withStyles(styles));\nexport default enhance(CollapsibleSection);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getManifest, getManifestoInstance, getSequenceBehaviors, getWindow } from '../state/selectors';\nimport { CollectionDialog } from '../components/CollectionDialog';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof CollectionDialog\n * @private\n */\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow,\n  hideCollectionDialog: actions.hideCollectionDialog,\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility,\n  showCollectionDialog: actions.showCollectionDialog,\n  updateWindow: actions.updateWindow\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof CollectionDialog\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n\n  var _getWindow = getWindow(state, {\n    windowId: windowId\n  }),\n      collectionPath = _getWindow.collectionPath,\n      manifestId = _getWindow.collectionManifestId;\n\n  var manifest = getManifest(state, {\n    manifestId: manifestId\n  });\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var collection = collectionId && getManifest(state, {\n    manifestId: collectionId\n  });\n  return {\n    collection: collection && getManifestoInstance(state, {\n      manifestId: collection.id\n    }),\n    collectionPath: collectionPath,\n    containerId: getContainerId(state),\n    error: manifest && manifest.error,\n    isMultipart: getSequenceBehaviors(state, {\n      manifestId: manifestId\n    }).includes('multi-part'),\n    manifest: manifest && getManifestoInstance(state, {\n      manifestId: manifestId\n    }),\n    manifestId: manifestId,\n    open: state.workspace.collectionDialogOn,\n    ready: manifest && !!manifest.json,\n    windowId: windowId\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    collectionFilter: {\n      padding: '16px',\n      paddingTop: 0\n    },\n    collectionItem: {\n      whiteSpace: 'normal'\n    },\n    collectionMetadata: {\n      padding: '16px'\n    },\n    dark: {\n      color: '#000000'\n    },\n    dialog: {\n      position: 'absolute !important'\n    },\n    dialogContent: {\n      padding: theme.spacing(1)\n    },\n    light: {\n      color: theme.palette.grey[400]\n    },\n    listitem: {\n      '&:focus': {\n        backgroundColor: theme.palette.action.focus\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      cursor: 'pointer'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CollectionDialog'));\nexport default enhance(CollectionDialog);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestTitle, getWindow } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { CollectionInfo } from '../components/CollectionInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n\n  var _ref2 = getWindow(state, {\n    windowId: windowId\n  }) || {},\n      collectionPath = _ref2.collectionPath;\n\n  var manifestId = collectionPath[collectionPath.length - 1];\n  return {\n    collectionLabel: getManifestTitle(state, {\n      manifestId: manifestId\n    }),\n    collectionPath: collectionPath\n  };\n};\n\nvar mapDispatchToProps = {\n  showCollectionDialog: actions.showCollectionDialog\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('CollectionInfo'));\nexport default enhance(CollectionInfo);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getCompanionWindowIdsForPosition, getCompanionAreaVisibility, getThemeDirection, getWindow } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { CompanionArea } from '../components/CompanionArea';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId,\n      position = _ref.position;\n  return {\n    companionAreaOpen: getCompanionAreaVisibility(state, {\n      position: position,\n      windowId: windowId\n    }),\n    companionWindowIds: getCompanionWindowIdsForPosition(state, {\n      position: position,\n      windowId: windowId\n    }),\n    direction: getThemeDirection(state),\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen\n  };\n};\n\nvar mapDispatchToProps = {\n  setCompanionAreaOpen: actions.setCompanionAreaOpen\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    horizontal: {\n      flexDirection: 'column',\n      width: '100%'\n    },\n    left: {\n      minWidth: 235\n    },\n    root: {\n      display: 'flex',\n      minHeight: 0,\n      position: 'relative',\n      zIndex: theme.zIndex.appBar - 2\n    },\n    toggle: {\n      backgroundColor: theme.palette.background.paper,\n      border: \"1px solid \".concat(theme.palette.shades.dark),\n      borderRadius: 0,\n      height: '48px',\n      left: '100%',\n      marginTop: '1rem',\n      padding: 2,\n      position: 'absolute',\n      width: '23px',\n      zIndex: theme.zIndex.drawer\n    },\n    toggleButton: {\n      marginBottom: 12,\n      marginTop: 12,\n      padding: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('CompanionArea'));\nexport default enhance(CompanionArea);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withSize } from 'react-sizeme';\nimport { withPlugins } from '../extend/withPlugins';\nimport { withRef } from '../extend/withRef';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getThemeDirection, getWindowConfig } from '../state/selectors';\nimport { CompanionWindow } from '../components/CompanionWindow';\n/**\n * mapStateToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n\n  var _getWindowConfig = getWindowConfig(state, {\n    windowId: windowId\n  }),\n      defaultSidebarPanelHeight = _getWindowConfig.defaultSidebarPanelHeight,\n      defaultSidebarPanelWidth = _getWindowConfig.defaultSidebarPanelWidth;\n\n  return _objectSpread(_objectSpread({}, companionWindow), {}, {\n    defaultSidebarPanelHeight: defaultSidebarPanelHeight,\n    defaultSidebarPanelWidth: defaultSidebarPanelWidth,\n    direction: getThemeDirection(state),\n    isDisplayed: companionWindow && companionWindow.content && companionWindow.content.length > 0\n  });\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId,\n      id = _ref2.id;\n  return {\n    onCloseClick: function onCloseClick() {\n      return dispatch(actions.removeCompanionWindow(windowId, id));\n    },\n    updateCompanionWindow: function updateCompanionWindow() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.updateCompanionWindow.apply(actions, [windowId, id].concat(args)));\n    }\n  };\n};\n/**\n *\n * @param theme\n * @returns {{closeButton: {top: number, position: string, right: number},\n * root: {overflowY: string, width: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    closeButton: {\n      order: 4\n    },\n    'companionWindow-bottom': {\n      borderTop: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    'companionWindow-left': {\n      borderRight: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    'companionWindow-right': {\n      borderLeft: \"0.5px solid \".concat(theme.palette.divider)\n    },\n    companionWindowHeader: {\n      flexWrap: 'wrap'\n    },\n    companionWindowTitleControls: {\n      flexGrow: 1,\n      order: 1000\n    },\n    companionWindowTitleControlsBottom: {\n      order: 'unset'\n    },\n    content: {\n      overflowY: 'auto',\n      wordBreak: 'break-word'\n    },\n    horizontal: {},\n    positionButton: {\n      marginLeft: -16,\n      order: -100,\n      width: 24\n    },\n    rnd: {\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    root: {\n      boxShadow: 'none',\n      boxSizing: 'border-box',\n      display: 'flex',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    small: {},\n    titleControls: {\n      alignItems: 'center',\n      display: 'flex',\n      flexFlow: 'row wrap',\n      minHeight: 48,\n      order: 3\n    },\n    toolbar: {\n      '&$small': {\n        '& $closeButton': {\n          order: 'unset'\n        },\n        '& $titleControls': {\n          order: 'unset'\n        }\n      },\n      alignItems: 'flex-start',\n      background: theme.palette.shades.light,\n      justifyContent: 'space-between',\n      minHeight: 'max-content',\n      paddingLeft: theme.spacing(2)\n    },\n    vertical: {},\n    windowSideBarTitle: _objectSpread(_objectSpread({}, theme.typography.subtitle1), {}, {\n      alignSelf: 'center',\n      flexGrow: 1,\n      width: 160\n    })\n  };\n};\n\nvar enhance = compose(withRef(), withTranslation(), withStyles(styles), withSize(), connect(mapStateToProps, mapDispatchToProps), withPlugins('CompanionWindow'));\nexport default enhance(CompanionWindow);","import React, { forwardRef } from 'react';\n/** */\n\nexport var withRef = function withRef() {\n  return function (Component) {\n    var WithRefs = /*#__PURE__*/forwardRef(function (props, ref) {\n      return /*#__PURE__*/React.createElement(Component, Object.assign({\n        innerRef: ref\n      }, props));\n    });\n    return WithRefs;\n  };\n};","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getCompanionWindow } from '../state/selectors';\nimport { CompanionWindowFactory } from '../components/CompanionWindowFactory';\n/**\n * mapStateToProps - to hook up connect\n * @memberof CompanionWindow\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  return {\n    content: companionWindow.content,\n    id: id\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('CompanionWindowFactory'));\nexport default enhance(CompanionWindowFactory);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ErrorContent } from '../components/ErrorContent';\nimport { getCompanionWindow, getManifest, getWindow, getViewer, getConfig } from '../state/selectors';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    metadata: {\n      companionWindow: companionWindowId && getCompanionWindow(state, {\n        companionWindowId: companionWindowId\n      }),\n      manifest: getManifest(state, {\n        windowId: windowId\n      }),\n      viewer: getViewer(state, {\n        windowId: windowId\n      }),\n      window: getWindow(state, {\n        windowId: windowId\n      })\n    },\n    showJsError: getConfig(state).window.showJsError\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    alert: {\n      '& $icon': {\n        color: theme.palette.error.main\n      },\n      backgroundColor: theme.palette.error.main,\n      color: '#fff',\n      fontWeight: theme.typography.fontWeightMedium\n    },\n    details: {\n      '& pre': {\n        height: '100px',\n        overflowY: 'scroll'\n      },\n      flexDirection: 'column'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('ErrorContent'));\nexport default enhance(ErrorContent);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ErrorDialog } from '../components/ErrorDialog';\nimport * as actions from '../state/actions';\nimport { getLatestError } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof ErrorDialog\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    error: getLatestError(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  removeError: actions.removeError\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('ErrorDialog'));\nexport default enhance(ErrorDialog);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getFullScreenEnabled } from '../state/selectors';\nimport { FullScreenButton } from '../components/FullScreenButton';\n/**\n * mapStateToProps - to hook up connect\n * @memberof FullScreenButton\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    isFullscreenEnabled: getFullScreenEnabled(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceFullscreen: actions.setWorkspaceFullscreen\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('FullScreenButton'));\nexport default enhance(FullScreenButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { GalleryView } from '../components/GalleryView';\nimport { getCanvases, getSequenceViewingDirection } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    canvases: getCanvases(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * Styles to be passed to the withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    galleryContainer: {\n      alignItems: 'flex-start',\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      overflowX: 'hidden',\n      overflowY: 'scroll',\n      padding: '50px 0 50px 20px',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps), withPlugins('GalleryView') // further HOC go here\n);\nexport default enhance(GalleryView);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport flatten from 'lodash/flatten';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { GalleryViewThumbnail } from '../components/GalleryViewThumbnail';\nimport { getSearchAnnotationsForWindow, getCurrentCanvas, getConfig, getPresentAnnotationsOnSelectedCanvases, getCompanionWindowsForContent } from '../state/selectors';\n/**\n * Styles to be passed to the withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    annotationIcon: {\n      height: '1rem',\n      width: '1rem'\n    },\n    annotationsChip: _objectSpread({}, theme.typography.caption),\n    avatar: {\n      backgroundColor: 'transparent'\n    },\n    chips: {\n      opacity: 0.875,\n      position: 'absolute',\n      right: 0,\n      textAlign: 'right',\n      top: 0\n    },\n    galleryViewItem: {\n      '&$hasAnnotations': {\n        border: \"2px solid \".concat(theme.palette.action.selected)\n      },\n      '&$selected,&$selected$hasAnnotations': {\n        border: \"2px solid \".concat(theme.palette.primary.main)\n      },\n      '&:focus': {\n        outline: 'none'\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.action.hover\n      },\n      border: '2px solid transparent',\n      cursor: 'pointer',\n      display: 'inline-block',\n      margin: \"\".concat(theme.spacing(1), \"px \").concat(theme.spacing(0.5), \"px\"),\n      maxHeight: function maxHeight(props) {\n        return props.config.height + 45;\n      },\n      minWidth: '60px',\n      overflow: 'hidden',\n      padding: theme.spacing(0.5),\n      position: 'relative',\n      width: 'min-content'\n    },\n    hasAnnotations: {},\n    searchChip: _objectSpread(_objectSpread({}, theme.typography.caption), {}, {\n      '&$selected $avatar': {\n        backgroundColor: theme.palette.highlights.primary\n      },\n      marginTop: 2\n    }),\n    selected: {}\n  };\n};\n/** */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var canvas = _ref.canvas,\n      windowId = _ref.windowId;\n  var currentCanvas = getCurrentCanvas(state, {\n    windowId: windowId\n  });\n  var searchAnnotations = getSearchAnnotationsForWindow(state, {\n    windowId: windowId\n  });\n  var canvasAnnotations = flatten(searchAnnotations.map(function (a) {\n    return a.resources;\n  })).filter(function (a) {\n    return a.targetId === canvas.id;\n  });\n  var hasOpenAnnotationsWindow = getCompanionWindowsForContent(state, {\n    content: 'annotations',\n    windowId: windowId\n  }).length > 0;\n  return {\n    annotationsCount: function () {\n      if (!hasOpenAnnotationsWindow) return undefined;\n      var annotations = getPresentAnnotationsOnSelectedCanvases(state, {\n        canvasId: canvas.id\n      });\n      return annotations.reduce(function (v, a) {\n        return v + a.resources.filter(function (r) {\n          return r.targetId === canvas.id;\n        }).length;\n      }, 0);\n    }(),\n    config: getConfig(state).galleryView,\n    searchAnnotationsCount: canvasAnnotations.length,\n    selected: currentCanvas && currentCanvas.id === canvas.id\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WindowViewer\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var canvas = _ref2.canvas,\n      id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    focusOnCanvas: function focusOnCanvas() {\n      return dispatch(actions.setWindowViewType(windowId, 'single'));\n    },\n    requestCanvasAnnotations: function requestCanvasAnnotations() {\n      return dispatch(actions.requestCanvasAnnotations(windowId, canvas.id));\n    },\n    setCanvas: function setCanvas() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.setCanvas.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles) // further HOC go here\n);\nexport default enhance(GalleryViewThumbnail);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { Utils } from 'manifesto.js';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAuth, getAuthProfiles, selectCurrentAuthServices, getAccessTokens } from '../state/selectors';\nimport { IIIFAuthentication } from '../components/IIIFAuthentication';\n/**\n * mapStateToProps - to hook up connect\n * @memberof FullScreenButton\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var services = selectCurrentAuthServices(state, {\n    windowId: windowId\n  }); // TODO: get the most actionable auth service...\n\n  var service = services[0];\n  var accessTokenService = service && (Utils.getService(service, 'http://iiif.io/api/auth/1/token') || Utils.getService(service, 'http://iiif.io/api/auth/0/token'));\n  var logoutService = service && (Utils.getService(service, 'http://iiif.io/api/auth/1/logout') || Utils.getService(service, 'http://iiif.io/api/auth/0/logout'));\n  var authStatuses = getAuth(state);\n  var authStatus = service && authStatuses[service.id];\n  var accessTokens = getAccessTokens(state);\n  var accessTokenStatus = accessTokenService && accessTokens[accessTokenService.id];\n  var status = null;\n\n  if (!authStatus) {\n    status = null;\n  } else if (authStatus.isFetching) {\n    if (authStatus.windowId === windowId) status = 'cookie';\n  } else if (accessTokenStatus && accessTokenStatus.isFetching) {\n    if (authStatus.windowId === windowId) status = 'token';\n  } else if (authStatus.ok) {\n    status = 'ok';\n  } else if (authStatus.ok === false) {\n    status = 'failed';\n  }\n\n  var authProfiles = getAuthProfiles(state);\n  var profile = service && service.getProfile();\n  var isInteractive = authProfiles.some(function (config) {\n    return config.profile === profile && !(config.external || config.kiosk);\n  });\n  return {\n    accessTokenServiceId: accessTokenService && accessTokenService.id,\n    authServiceId: service && service.id,\n    confirm: service && service.getConfirmLabel(),\n    description: service && service.getDescription(),\n    failureDescription: service && service.getFailureDescription(),\n    failureHeader: service && service.getFailureHeader(),\n    header: service && service.getHeader(),\n    isInteractive: isInteractive,\n    label: service && service.getLabel()[0].value,\n    logoutConfirm: logoutService && logoutService.getLabel()[0] && logoutService.getLabel()[0].value,\n    logoutServiceId: logoutService && logoutService.id,\n    profile: profile,\n    status: status\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  handleAuthInteraction: actions.addAuthenticationRequest,\n  resetAuthenticationState: actions.resetAuthenticationState,\n  resolveAccessTokenRequest: actions.resolveAccessTokenRequest,\n  resolveAuthenticationRequest: actions.resolveAuthenticationRequest\n};\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('IIIFAuthentication'));\nexport default enhance(IIIFAuthentication);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getConfig } from '../state/selectors';\nimport { IIIFThumbnail } from '../components/IIIFThumbnail';\n/**\n * mapStateToProps - to hook up connect\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    thumbnailsConfig: getConfig(state).thumbnails\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    caption: {\n      lineHeight: '1.5em',\n      wordBreak: 'break-word'\n    },\n    image: {},\n    insideCaption: {\n      color: '#ffffff',\n      lineClamp: '1',\n      whiteSpace: 'nowrap'\n    },\n    insideLabel: {\n      background: 'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\n      bottom: '5px',\n      boxSizing: 'border-box',\n      left: '0px',\n      padding: '4px',\n      position: 'absolute',\n      width: '100%'\n    },\n    insideRoot: {\n      display: 'inline-block',\n      height: 'inherit',\n      position: 'relative'\n    },\n    label: {\n      overflow: 'hidden',\n      textOverflow: 'ellipsis'\n    },\n    outsideCaption: {\n      boxOrient: 'vertical',\n      display: '-webkit-box',\n      lineClamp: '2',\n      maxHeight: '3em'\n    },\n    outsideLabel: {},\n    outsideRoot: {},\n    root: {}\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('IIIFThumbnail'));\nexport default enhance(IIIFThumbnail);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getLanguagesFromConfigWithCurrent } from '../state/selectors';\nimport { LanguageSettings } from '../components/LanguageSettings';\n/**\n * Map state to props for connect\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    languages: getLanguagesFromConfigWithCurrent(state)\n  };\n};\n/**\n * Map action dispatches to props for connect\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var afterSelect = _ref.afterSelect;\n  return {\n    handleClick: function handleClick(language) {\n      dispatch(actions.updateConfig({\n        language: language\n      }));\n      afterSelect && afterSelect();\n    }\n  };\n};\n\nexport default compose(connect(mapStateToProps, mapDispatchToProps), withPlugins('LanguageSettings'))(LanguageSettings);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { LocalePicker } from '../components/LocalePicker';\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    select: {\n      '&:focus': {\n        backgroundColor: theme.palette.background.paper\n      }\n    },\n    selectEmpty: {\n      backgroundColor: theme.palette.background.paper\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles));\nexport default enhance(LocalePicker);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { ManifestForm } from '../components/ManifestForm';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\nvar mapDispatchToProps = {\n  addResource: actions.addResource\n};\n/**\n *\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    buttons: _defineProperty({\n      textAlign: 'right'\n    }, theme.breakpoints.up('sm'), {\n      textAlign: 'inherit'\n    }),\n    input: _objectSpread({}, theme.typography.body1)\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(null, mapDispatchToProps), withPlugins('ManifestForm'));\nexport default enhance(ManifestForm);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestDescription, getManifestTitle, getManifestMetadata } from '../state/selectors';\nimport { ManifestInfo } from '../components/ManifestInfo';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      manifestId = _ref.manifestId,\n      windowId = _ref.windowId;\n  return {\n    manifestDescription: getManifestDescription(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    }),\n    manifestLabel: getManifestTitle(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    }),\n    manifestMetadata: getManifestMetadata(state, {\n      companionWindowId: id,\n      manifestId: manifestId,\n      windowId: windowId\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps), withPlugins('ManifestInfo'));\nexport default enhance(ManifestInfo);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifest, getManifestTitle, getManifestThumbnail, getCanvases, getManifestLogo, getManifestProvider, getWindowManifests, getManifestoInstance, getSequenceBehaviors } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { ManifestListItem } from '../components/ManifestListItem';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var manifestId = _ref.manifestId,\n      provider = _ref.provider;\n  var manifest = getManifest(state, {\n    manifestId: manifestId\n  }) || {};\n  var manifesto = getManifestoInstance(state, {\n    manifestId: manifestId\n  });\n  var isCollection = (manifesto || {\n    isCollection: function isCollection() {\n      return false;\n    }\n  }).isCollection();\n  var size = isCollection ? manifesto.getTotalItems() : getCanvases(state, {\n    manifestId: manifestId\n  }).length;\n  return {\n    active: getWindowManifests(state).includes(manifestId),\n    error: manifest.error,\n    isCollection: isCollection,\n    isFetching: manifest.isFetching,\n    isMultipart: isCollection && getSequenceBehaviors(state, {\n      manifestId: manifestId\n    }).includes('multi-part'),\n    manifestLogo: getManifestLogo(state, {\n      manifestId: manifestId\n    }),\n    provider: provider || getManifestProvider(state, {\n      manifestId: manifestId\n    }),\n    ready: !!manifest.json,\n    size: size,\n    thumbnail: getManifestThumbnail(state, {\n      manifestId: manifestId\n    }),\n    title: getManifestTitle(state, {\n      manifestId: manifestId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow,\n  fetchManifest: actions.fetchManifest\n};\n/**\n *\n * @param theme\n * @returns {{root: {}, label: {textAlign: string, textTransform: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    active: {},\n    buttonGrid: {},\n    label: {\n      textAlign: 'left',\n      textTransform: 'initial'\n    },\n    logo: {\n      height: '2.5rem',\n      maxWidth: '100%',\n      objectFit: 'contain',\n      paddingRight: 8\n    },\n    placeholder: {\n      backgroundColor: theme.palette.grey[300]\n    },\n    root: _objectSpread(_objectSpread({}, theme.mixins.gutters()), {}, {\n      '&$active': {\n        borderLeft: \"4px solid \".concat(theme.palette.primary.main)\n      },\n      '&:hover,&:focus-within': {\n        '&$active': {\n          borderLeft: \"4px solid \".concat(theme.palette.primary.main)\n        },\n        backgroundColor: theme.palette.action.hover,\n        borderLeft: \"4px solid \".concat(theme.palette.action.hover)\n      },\n      borderLeft: '4px solid transparent'\n    }),\n    thumbnail: {\n      maxWidth: '100%',\n      objectFit: 'contain'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ManifestListItem'));\nexport default enhance(ManifestListItem);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { fetchManifest, removeResource } from '../state/actions';\nimport { ManifestListItemError } from '../components/ManifestListItemError';\n/** */\n\nvar mapDispatchToProps = {\n  onDismissClick: removeResource,\n  onTryAgainClick: fetchManifest\n};\n/**\n *\n * @param theme\n * @returns {{manifestIdText: {wordBreak: string},\n * errorIcon: {color: string, width: string, height: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    errorIcon: {\n      color: theme.palette.error.main,\n      height: '2rem',\n      width: '2rem'\n    },\n    manifestIdText: {\n      wordBreak: 'break-all'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, mapDispatchToProps), withPlugins('ManifestListItemError'));\nexport default enhance(ManifestListItemError);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestHomepage, getManifestRelatedContent, getManifestRenderings, getManifestUrl } from '../state/selectors';\nimport { ManifestRelatedLinks } from '../components/ManifestRelatedLinks';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    homepage: getManifestHomepage(state, {\n      windowId: windowId\n    }),\n    manifestUrl: getManifestUrl(state, {\n      windowId: windowId\n    }),\n    renderings: getManifestRenderings(state, {\n      windowId: windowId\n    }),\n    seeAlso: getManifestRelatedContent(state, {\n      windowId: windowId\n    })\n  };\n};\n\nvar styles = {\n  labelValueMetadata: {\n    '& dd': {\n      marginBottom: '.5em',\n      marginLeft: '0'\n    }\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('ManifestRelatedLinks'));\nexport default enhance(ManifestRelatedLinks);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { MinimalWindow } from '../components/MinimalWindow';\nimport { getWindowConfig } from '../state/selectors';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    allowClose: getWindowConfig(state, {\n      windowId: windowId\n    }).allowClose,\n    allowWindowSideBar: getWindowConfig(state, {\n      windowId: windowId\n    }).allowWindowSideBar\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    removeWindow: function removeWindow() {\n      return dispatch(actions.removeWindow(windowId));\n    }\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    button: {\n      marginLeft: 'auto'\n    },\n    title: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(0.5)\n    }),\n    window: {\n      backgroundColor: theme.palette.shades.dark,\n      borderRadius: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      minHeight: 0,\n      overflow: 'hidden',\n      width: '100%'\n    },\n    windowTopBarStyle: {\n      backgroundColor: theme.palette.shades.main,\n      borderTop: '2px solid transparent',\n      minHeight: 32,\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('MinimalWindow'));\nexport default enhance(MinimalWindow);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport { MiradorMenuButton } from '../components/MiradorMenuButton';\nimport { getContainerId } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, null), withPlugins('MiradorMenuButton'));\nexport default enhance(MiradorMenuButton);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestTitle } from '../state/selectors';\nimport { MosaicRenderPreview } from '../components/MosaicRenderPreview';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    title: getManifestTitle(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    preview: _objectSpread({}, theme.typography.h4)\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('MosaicRenderPreview'));\nexport default enhance(MosaicRenderPreview);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport flatten from 'lodash/flatten';\nimport { withPlugins } from '../extend/withPlugins';\nimport { OpenSeadragonViewer } from '../components/OpenSeadragonViewer';\nimport * as actions from '../state/actions';\nimport { getVisibleCanvasNonTiledResources, getCurrentCanvas, getCanvasLabel, getViewer, getConfig, getCompanionWindowsForContent, selectInfoResponses, getCurrentCanvasWorld } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var canvasWorld = getCurrentCanvasWorld(state, {\n    windowId: windowId\n  });\n  var infoResponses = selectInfoResponses(state);\n  var imageServiceIds = flatten(canvasWorld.canvases.map(function (c) {\n    return c.imageServiceIds;\n  }));\n  return {\n    canvasWorld: canvasWorld,\n    drawAnnotations: getConfig(state).window.forceDrawAnnotations || getCompanionWindowsForContent(state, {\n      content: 'annotations',\n      windowId: windowId\n    }).length > 0 || getCompanionWindowsForContent(state, {\n      content: 'search',\n      windowId: windowId\n    }).length > 0,\n    infoResponses: imageServiceIds.map(function (id) {\n      return infoResponses[id];\n    }).filter(function (infoResponse) {\n      return infoResponse !== undefined && infoResponse.isFetching === false && infoResponse.error === undefined;\n    }),\n    label: getCanvasLabel(state, {\n      canvasId: (getCurrentCanvas(state, {\n        windowId: windowId\n      }) || {}).id,\n      windowId: windowId\n    }),\n    nonTiledImages: getVisibleCanvasNonTiledResources(state, {\n      windowId: windowId\n    }),\n    osdConfig: getConfig(state).osdConfig,\n    viewerConfig: getViewer(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateViewport: actions.updateViewport\n};\nvar styles = {\n  osdContainer: {\n    flex: 1,\n    position: 'relative'\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('OpenSeadragonViewer'));\nexport default enhance(OpenSeadragonViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestoInstance, getVisibleCanvasAudioResources, getVisibleCanvasVideoResources, getWindow } from '../state/selectors';\nimport { PrimaryWindow } from '../components/PrimaryWindow';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var manifestoInstance = getManifestoInstance(state, {\n    windowId: windowId\n  });\n  return {\n    audioResources: getVisibleCanvasAudioResources(state, {\n      windowId: windowId\n    }) || [],\n    isCollection: manifestoInstance && manifestoInstance.isCollection(),\n    isCollectionDialogVisible: getWindow(state, {\n      windowId: windowId\n    }).collectionDialogOn,\n    videoResources: getVisibleCanvasVideoResources(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n\nvar styles = {\n  primaryWindow: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative'\n  }\n};\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, null), withPlugins('PrimaryWindow'));\nexport default enhance(PrimaryWindow);","import { withStyles } from '@material-ui/core/styles';\nimport { SanitizedHtml } from '../components/SanitizedHtml';\n/**\n * Styles for withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      '& a': {\n        color: theme.palette.primary.main,\n        textDecoration: 'underline'\n      }\n    }\n  };\n};\n\nexport default withStyles(styles)(SanitizedHtml);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { withStyles } from '@material-ui/core/styles';\nimport { ScrollIndicatedDialogContent } from '../components/ScrollIndicatedDialogContent';\n/**\n * Styles for the withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  var _shadowScrollDialog;\n\n  return {\n    shadowScrollDialog: (_shadowScrollDialog = {\n      /* Shadow covers */\n      background: \"linear-gradient(\".concat(theme.palette.background.paper, \" 30%, rgba(255, 255, 255, 0)), \") + \"linear-gradient(rgba(255, 255, 255, 0), \".concat(theme.palette.background.paper, \" 70%) 0 100%, \") // Shaddows\n      + 'radial-gradient(50% 0, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), ' + 'radial-gradient(50% 100%, farthest-side, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%,'\n    }, _defineProperty(_shadowScrollDialog, \"background\", \"linear-gradient(\".concat(theme.palette.background.paper, \" 30%, rgba(255, 255, 255, 0)), \") // eslint-disable-line no-dupe-keys\n    + \"linear-gradient(rgba(255, 255, 255, 0), \".concat(theme.palette.background.paper, \" 70%) 0 100%, \") // Shaddows\n    + 'radial-gradient(farthest-side at 50% 0, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)), ' + 'radial-gradient(farthest-side at 50% 100%, rgba(0, 0, 0, .2), rgba(0, 0, 0, 0)) 0 100%;'), _defineProperty(_shadowScrollDialog, \"backgroundAttachment\", 'local, local, scroll, scroll'), _defineProperty(_shadowScrollDialog, \"backgroundRepeat\", 'no-repeat'), _defineProperty(_shadowScrollDialog, \"backgroundSize\", '100% 40px, 100% 40px, 100% 14px, 100% 14px'), _defineProperty(_shadowScrollDialog, \"overflowY\", 'auto'), _shadowScrollDialog)\n  };\n};\n\nexport default withStyles(styles)(ScrollIndicatedDialogContent);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchHit } from '../components/SearchHit';\nimport * as actions from '../state/actions';\nimport { getCanvasLabel, getVisibleCanvasIds, getResourceAnnotationForSearchHit, getResourceAnnotationLabel, getSelectedContentSearchAnnotationIds, getSelectedAnnotationId } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchHit\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var annotationId = _ref.annotationId,\n      _ref$hit = _ref.hit,\n      hit = _ref$hit === void 0 ? {\n    annotations: []\n  } : _ref$hit,\n      companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  var realAnnoId = annotationId || hit.annotations[0];\n  var hitAnnotation = getResourceAnnotationForSearchHit(state, {\n    annotationUri: realAnnoId,\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var annotationLabel = getResourceAnnotationLabel(state, {\n    annotationUri: realAnnoId,\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var selectedCanvasIds = getVisibleCanvasIds(state, {\n    windowId: windowId\n  });\n  var selectedContentSearchAnnotationsIds = getSelectedContentSearchAnnotationIds(state, {\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var windowSelectedAnnotationId = getSelectedAnnotationId(state, {\n    windowId: windowId\n  });\n  var allAnnoIds = [annotationId].concat(_toConsumableArray(hit.annotations));\n  return {\n    adjacent: selectedCanvasIds.includes(hitAnnotation.targetId),\n    annotation: hitAnnotation,\n    annotationId: realAnnoId,\n    annotationLabel: annotationLabel[0],\n    canvasLabel: hitAnnotation && getCanvasLabel(state, {\n      canvasId: hitAnnotation.targetId,\n      windowId: windowId\n    }),\n    selected: selectedContentSearchAnnotationsIds[0] && allAnnoIds.includes(selectedContentSearchAnnotationsIds[0]),\n    windowSelected: windowSelectedAnnotationId && allAnnoIds.includes(windowSelectedAnnotationId)\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelNavigation\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    selectAnnotation: function selectAnnotation() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.selectAnnotation.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    adjacent: {},\n    focused: {},\n    hitCounter: _objectSpread(_objectSpread({}, theme.typography.subtitle2), {}, {\n      backgroundColor: theme.palette.hitCounter[\"default\"],\n      height: 30,\n      marginRight: theme.spacing(1),\n      verticalAlign: 'inherit'\n    }),\n    inlineButton: {\n      '& span': {\n        lineHeight: '1.5em'\n      },\n      margin: 0,\n      padding: 0,\n      textTransform: 'none'\n    },\n    listItem: {\n      '&$adjacent': {\n        '& $hitCounter': {\n          backgroundColor: theme.palette.highlights.secondary\n        },\n        '&$windowSelected': {\n          '& $hitCounter': {\n            backgroundColor: theme.palette.highlights.primary\n          }\n        }\n      },\n      '&$windowSelected': {\n        '& $hitCounter': {\n          backgroundColor: theme.palette.highlights.primary\n        },\n        '&$focused': {\n          '&:hover': {\n            backgroundColor: 'inherit'\n          },\n          backgroundColor: 'inherit'\n        }\n      },\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: 8\n    },\n    selected: {},\n    subtitle: {\n      marginBottom: theme.spacing(1.5)\n    },\n    windowSelected: {}\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchHit'));\nexport default enhance(SearchHit);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanelControls } from '../components/SearchPanelControls';\nimport * as actions from '../state/actions';\nimport { getManifestAutocompleteService, getManifestSearchService, getSearchIsFetching, getSearchQuery } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchPanelControls\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    autocompleteService: getManifestAutocompleteService(state, {\n      windowId: windowId\n    }),\n    query: getSearchQuery(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchIsFetching: getSearchIsFetching(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchService: getManifestSearchService(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelControls\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  fetchSearch: actions.fetchSearch\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    endAdornment: {\n      position: 'absolute',\n      right: 0\n    },\n    form: {\n      paddingBottom: theme.spacing(1),\n      paddingRight: theme.spacing(1.5),\n      width: '100%'\n    },\n    searchProgress: {\n      position: 'absolute',\n      right: 0\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanelControls'));\nexport default enhance(SearchPanelControls);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanelNavigation } from '../components/SearchPanelNavigation';\nimport * as actions from '../state/actions';\nimport { getSelectedContentSearchAnnotationIds, getSearchNumTotal, getSortedSearchHitsForCompanionWindow, getThemeDirection } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchPanelControls\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    numTotal: getSearchNumTotal(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchHits: getSortedSearchHitsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    selectedContentSearchAnnotation: getSelectedContentSearchAnnotationIds(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - to hook up connect\n * @memberof SearchPanelNavigation\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    selectAnnotation: function selectAnnotation() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.selectAnnotation.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    body2: {\n      marginLeft: '-16px',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanelNavigation'));\nexport default enhance(SearchPanelNavigation);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchResults } from '../components/SearchResults';\nimport * as actions from '../state/actions';\nimport { getNextSearchId, getSearchQuery, getSearchIsFetching, getSearchNumTotal, getSortedSearchHitsForCompanionWindow, getSortedSearchAnnotationsForCompanionWindow } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SearchResult\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      windowId = _ref.windowId;\n  return {\n    isFetching: getSearchIsFetching(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    nextSearch: getNextSearchId(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    query: getSearchQuery(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchAnnotations: getSortedSearchAnnotationsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchHits: getSortedSearchHitsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    }),\n    searchNumTotal: getSearchNumTotal(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    })\n  };\n};\n\nvar mapDispatchToProps = {\n  fetchSearch: actions.fetchSearch\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    moreButton: {\n      width: '100%'\n    },\n    navigation: {\n      textTransform: 'none'\n    },\n    noResults: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      padding: theme.spacing(2)\n    }),\n    toggleFocus: _objectSpread({}, theme.typography.subtitle1)\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchResults'));\nexport default enhance(SearchResults);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWindow } from '../state/selectors';\nimport { SelectCollection } from '../components/SelectCollection';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n\n  var _ref2 = getWindow(state, {\n    windowId: windowId\n  }) || {},\n      collectionPath = _ref2.collectionPath,\n      manifestId = _ref2.manifestId;\n\n  return {\n    collectionPath: collectionPath,\n    manifestId: manifestId\n  };\n};\n\nvar mapDispatchToProps = {\n  showCollectionDialog: actions.showCollectionDialog\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('SelectCollection'));\nexport default enhance(SelectCollection);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexItem } from '../components/SidebarIndexItem';\n/**\n * Styles for withStyles HOC\n */\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(null, null), withPlugins('SidebarIndexItem'));\nexport default enhance(SidebarIndexItem);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getCanvases, getVisibleCanvasIds } from '../state/selectors';\nimport { SidebarIndexList } from '../components/SidebarIndexList';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvases: getCanvases(state, {\n      windowId: windowId\n    }),\n    selectedCanvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    }),\n    variant: getCompanionWindow(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }).variant\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexList\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    setCanvas: function setCanvas() {\n      return dispatch(actions.setCanvas.apply(actions, arguments));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    listItem: {\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('SidebarIndexList'));\nexport default enhance(SidebarIndexList);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexTableOfContents } from '../components/SidebarIndexTableOfContents';\nimport { getSequenceTreeStructure, getVisibleNodeIds, getExpandedNodeIds, getNodeIdToScrollTo } from '../state/selectors';\nimport * as actions from '../state/actions';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    expandedNodeIds: getExpandedNodeIds(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    nodeIdToScrollTo: getNodeIdToScrollTo(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    treeStructure: getSequenceTreeStructure(state, {\n      windowId: windowId\n    }),\n    visibleNodeIds: getVisibleNodeIds(state, {\n      companionWindowId: id,\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexTableOfContents\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    setCanvas: function setCanvas() {\n      return dispatch(actions.setCanvas.apply(actions, arguments));\n    },\n    toggleNode: function toggleNode(nodeId) {\n      return dispatch(actions.toggleNode(windowId, id, nodeId));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    content: {\n      alignItems: 'flex-start',\n      borderLeft: '1px solid transparent',\n      padding: '8px 16px 8px 0',\n      width: 'auto'\n    },\n    group: {\n      borderLeft: \"1px solid \".concat(theme.palette.grey[300])\n    },\n    label: {\n      paddingLeft: 0\n    },\n    // needed for pseudo $label class\n    root: {\n      flexGrow: 1\n    },\n    selected: {},\n    // needed for pseudo $selected class\n    treeItemRoot: {\n      '&:focus > $content': {\n        backgroundColor: theme.palette.action.selected\n      },\n      '&:hover > $content': {\n        backgroundColor: theme.palette.action.hover\n      },\n      '&:hover >$content $label, &:focus > $content $label, &$selected > $content $label, &$selected > $content $label:hover, &$selected:focus > $content $label': {\n        backgroundColor: 'transparent'\n      }\n    },\n    visibleNode: {\n      backgroundColor: fade(theme.palette.highlights.primary, 0.35),\n      display: 'inline'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('SidebarIndexTableOfContents'));\nexport default enhance(SidebarIndexTableOfContents);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SidebarIndexThumbnail } from '../components/SidebarIndexThumbnail';\nimport { getConfig } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof SidebarIndexThumbnail\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var data = _ref.data;\n  return _objectSpread({}, getConfig(state).canvasNavigation || {});\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('SidebarIndexThumbnail'));\nexport default enhance(SidebarIndexThumbnail);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCurrentCanvas } from '../state/selectors';\nimport { ThumbnailCanvasGrouping } from '../components/ThumbnailCanvasGrouping';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ThumbnailCanvasGrouping\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var data = _ref.data;\n  return {\n    setCanvas: function setCanvas() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.setCanvas.apply(actions, [data.windowId].concat(args)));\n    }\n  };\n};\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof ThumbnailCanvasGrouping\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref2) {\n  var data = _ref2.data;\n  return {\n    currentCanvasId: (getCurrentCanvas(state, {\n      windowId: data.windowId\n    }) || {}).id\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    canvas: {\n      '&$currentCanvas': {\n        outline: \"2px solid \".concat(theme.palette.primary.main),\n        outlineOffset: '3px'\n      },\n      '&:hover': {\n        outline: \"9px solid \".concat(theme.palette.action.hover),\n        outlineOffset: '-2px'\n      },\n      boxSizing: 'border-box',\n      color: theme.palette.common.white,\n      cursor: 'pointer',\n      display: 'inline-block',\n      outline: 0,\n      whiteSpace: 'nowrap'\n    },\n    currentCanvas: {}\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ThumbnailCanvasGrouping'));\nexport default enhance(ThumbnailCanvasGrouping);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { VideoViewer } from '../components/VideoViewer';\nimport { getConfig, getVisibleCanvasCaptions, getVisibleCanvasVideoResources } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    captions: getVisibleCanvasCaptions(state, {\n      windowId: windowId\n    }) || [],\n    videoOptions: getConfig(state).videoOptions,\n    videoResources: getVisibleCanvasVideoResources(state, {\n      windowId: windowId\n    }) || []\n  };\n};\n/** */\n\n\nvar styles = function styles() {\n  return {\n    container: {\n      alignItems: 'center',\n      display: 'flex',\n      width: '100%'\n    },\n    video: {\n      maxHeight: '100%',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('VideoViewer'));\nexport default enhance(VideoViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ViewerInfo } from '../components/ViewerInfo';\nimport { getCanvasLabel, getCanvases, getCanvasIndex, getCurrentCanvas } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  var windowId = props.windowId;\n  var canvases = getCanvases(state, {\n    windowId: windowId\n  });\n  var canvasIndex = getCanvasIndex(state, {\n    windowId: windowId\n  });\n  var canvasId = (getCurrentCanvas(state, {\n    windowId: windowId\n  }) || {}).id;\n  return {\n    canvasCount: canvases.length,\n    canvasIndex: canvasIndex,\n    canvasLabel: getCanvasLabel(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    })\n  };\n};\n\nvar styles = {\n  osdInfo: {\n    order: 2,\n    overflow: 'hidden',\n    paddingBottom: 3,\n    textOverflow: 'ellipsis',\n    unicodeBidi: 'plaintext',\n    whiteSpace: 'nowrap',\n    width: '100%'\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('ViewerInfo'));\nexport default enhance(ViewerInfo);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getSequenceViewingDirection, getNextCanvasGrouping, getPreviousCanvasGrouping } from '../state/selectors';\nimport { ViewerNavigation } from '../components/ViewerNavigation';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    hasNextCanvas: !!getNextCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    hasPreviousCanvas: !!getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    setNextCanvas: function setNextCanvas() {\n      return dispatch(actions.setNextCanvas(windowId));\n    },\n    setPreviousCanvas: function setPreviousCanvas() {\n      return dispatch(actions.setPreviousCanvas(windowId));\n    }\n  };\n};\n\nvar styles = {\n  osdNavigation: {\n    order: 1\n  }\n};\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('ViewerNavigation') // further HOC go here\n);\nexport default enhance(ViewerNavigation);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { Window } from '../components/Window';\nimport { getManifestStatus, getManifestTitle, getThumbnailNavigationPosition, getWindow, getWorkspaceType, getWindowDraggability, getWindowViewType, getManifestError } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up connect to action creators\n * @memberof Window\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    isFetching: getManifestStatus(state, {\n      windowId: windowId\n    }).isFetching,\n    label: getManifestTitle(state, {\n      windowId: windowId\n    }),\n    manifestError: getManifestError(state, {\n      windowId: windowId\n    }),\n    maximized: (getWindow(state, {\n      windowId: windowId\n    }) || {}).maximized,\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen,\n    thumbnailNavigationPosition: getThumbnailNavigationPosition(state, {\n      windowId: windowId\n    }),\n    view: getWindowViewType(state, {\n      windowId: windowId\n    }),\n    window: getWindow(state, {\n      windowId: windowId\n    }),\n    windowDraggable: getWindowDraggability(state, {\n      windowId: windowId\n    }),\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    focusWindow: function focusWindow() {\n      return dispatch(actions.focusWindow(windowId));\n    }\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    companionAreaBottom: {\n      display: 'flex',\n      flex: '0',\n      flexBasis: 'auto',\n      minHeight: 0\n    },\n    companionAreaRight: {\n      display: 'flex',\n      flex: '0 1 auto',\n      minHeight: 0\n    },\n    maximized: {},\n    middle: {\n      display: 'flex',\n      flex: '1',\n      flexDirection: 'row',\n      minHeight: 0\n    },\n    middleLeft: {\n      display: 'flex',\n      flex: '1',\n      flexDirection: 'column',\n      minHeight: 0\n    },\n    primaryWindow: {\n      display: 'flex',\n      flex: '1',\n      height: '300px',\n      minHeight: 0,\n      position: 'relative'\n    },\n    thumbnailArea: {\n      backgroundColor: theme.palette.shades.dark\n    },\n    thumbnailAreaBottom: {},\n    thumbnailAreaRight: {\n      minWidth: 100\n    },\n    window: {\n      '&$maximized': {\n        left: 0,\n        position: 'absolute',\n        top: 0,\n        zIndex: theme.zIndex.modal - 1\n      },\n      backgroundColor: theme.palette.shades.dark,\n      borderRadius: 0,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      minHeight: 0,\n      overflow: 'hidden',\n      width: '100%'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('Window'));\nexport default enhance(Window);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowAuthenticationBar } from '../components/WindowAuthenticationBar';\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    buttonInvert: {\n      '&:hover': {\n        backgroundColor: fade(theme.palette.secondary.contrastText, 1 - theme.palette.action.hoverOpacity)\n      },\n      backgroundColor: theme.palette.secondary.contrastText,\n      marginLeft: theme.spacing(5),\n      paddingBottom: 0,\n      paddingTop: 0\n    },\n    expanded: {\n      paddingLeft: theme.spacing(),\n      paddingRight: theme.spacing()\n    },\n    failure: {\n      backgroundColor: theme.palette.error.dark\n    },\n    fauxButton: {\n      marginLeft: theme.spacing(2.5)\n    },\n    icon: {\n      marginRight: theme.spacing(1.5),\n      verticalAlign: 'text-bottom'\n    },\n    label: {\n      lineHeight: 2.25\n    },\n    paper: {\n      backgroundColor: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      cursor: 'pointer'\n    },\n    topBar: {\n      '&:hover': {\n        backgroundColor: theme.palette.secondary.main\n      },\n      alignItems: 'center',\n      display: 'flex',\n      justifyContent: 'inherit',\n      padding: theme.spacing(1),\n      textTransform: 'none'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WindowAuthenticationBar'));\nexport default enhance(WindowAuthenticationBar);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withSize } from 'react-sizeme';\nimport { withStyles } from '@material-ui/core';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWorkspace, getSequenceViewingDirection, getNextCanvasGrouping, getPreviousCanvasGrouping } from '../state/selectors';\nimport { WindowCanvasNavigationControls } from '../components/WindowCanvasNavigationControls';\nimport * as actions from '../state/actions';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    hasNextCanvas: !!getNextCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    hasPreviousCanvas: !!getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    }),\n    visible: getWorkspace(state).focusedWindowId === windowId\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestForm\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    setNextCanvas: function setNextCanvas() {\n      return dispatch(actions.setNextCanvas(windowId));\n    },\n    setPreviousCanvas: function setPreviousCanvas() {\n      return dispatch(actions.setPreviousCanvas(windowId));\n    }\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    canvasNav: {\n      display: 'flex',\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: 'center',\n      textAlign: 'center'\n    },\n    canvasNavStacked: {\n      flexDirection: 'column'\n    },\n    controls: {\n      backgroundColor: fade(theme.palette.background.paper, 0.5),\n      bottom: 0,\n      position: 'absolute',\n      width: '100%',\n      zIndex: 50\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withSize(), withPlugins('WindowCanvasNavigationControls'));\nexport default enhance(WindowCanvasNavigationControls);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getWindowIds, getWindowTitles } from '../state/selectors';\nimport { WindowList } from '../components/WindowList';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  focusWindow: actions.focusWindow\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WorkspaceControlPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    titles: getWindowTitles(state),\n    windowIds: getWindowIds(state)\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowList'));\nexport default enhance(WindowList);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWindowIds, getWorkspace } from '../state/selectors';\nimport { WindowListButton } from '../components/WindowListButton';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    disabled: getWorkspace(state).isWorkspaceAddVisible,\n    windowCount: getWindowIds(state).length\n  };\n};\n/**\n *\n * @param theme\n * @returns {{background: {background: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    badge: {\n      paddingLeft: 12\n    },\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowListButton'));\nexport default enhance(WindowListButton);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowSideBar } from '../components/WindowSideBar';\nimport { getThemeDirection, getWindow } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBar\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    sideBarOpen: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarOpen,\n    sideBarPanel: (getWindow(state, {\n      windowId: windowId\n    }) || {}).sideBarPanel\n  };\n};\n/**\n *\n * @param theme\n * @returns {{toolbar: CSSProperties | toolbar | {minHeight}, grow: {flexGrow: number},\n * drawer: {overflowX: string, left: number, flexShrink: number, width: number, height: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    drawer: {\n      flexShrink: 0,\n      height: '100%',\n      order: -1000,\n      zIndex: theme.zIndex.appBar - 1\n    },\n    grow: {\n      flexGrow: 1\n    },\n    paper: {\n      borderInlineEnd: \"1px solid \".concat(theme.palette.divider),\n      overflowX: 'hidden',\n      width: 48\n    },\n    toolbar: theme.mixins.toolbar\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, null), withPlugins('WindowSideBar'));\nexport default enhance(WindowSideBar);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport MiradorCanvas from '../lib/MiradorCanvas';\nimport { getCanvases, getVisibleCanvases, getCompanionWindowsForPosition, getAnnotationResourcesByMotivation, getManifestSearchService, getSearchQuery, getWindow, getWindowConfig } from '../state/selectors';\nimport { WindowSideBarButtons } from '../components/WindowSideBarButtons';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WindowSideButtons\n * @private\n */\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    addCompanionWindow: function addCompanionWindow(content) {\n      return dispatch(actions.addOrUpdateCompanionWindow(windowId, {\n        content: content,\n        position: 'left'\n      }));\n    }\n  };\n};\n/** */\n\n\nfunction hasLayers(canvases) {\n  return canvases && canvases.some(function (c) {\n    return new MiradorCanvas(c).imageResources.length > 1;\n  });\n}\n/** */\n\n\nfunction hasAnnotations(canvases) {\n  return canvases && canvases.some(function (c) {\n    var canvas = new MiradorCanvas(c);\n    return canvas.annotationListUris.length > 0 || canvas.canvasAnnotationPages.length > 0;\n  });\n}\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowSideButtons\n * @private\n */\n\n\nvar mapStateToProps = function mapStateToProps(state, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    hasAnnotations: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length > 0,\n    hasAnyAnnotations: hasAnnotations(getCanvases(state, {\n      windowId: windowId\n    })),\n    hasAnyLayers: hasLayers(getCanvases(state, {\n      windowId: windowId\n    })),\n    hasCurrentLayers: hasLayers(getVisibleCanvases(state, {\n      windowId: windowId\n    })),\n    hasSearchResults: getWindow(state, {\n      windowId: windowId\n    }).suggestedSearches || getSearchQuery(state, {\n      companionWindowId: (getCompanionWindowsForPosition(state, {\n        position: 'left',\n        windowId: windowId\n      })[0] || {}).id,\n      windowId: windowId\n    }),\n    hasSearchService: getManifestSearchService(state, {\n      windowId: windowId\n    }) !== null,\n    panels: getWindowConfig(state, {\n      windowId: windowId\n    }).panels,\n    sideBarPanel: (getCompanionWindowsForPosition(state, {\n      position: 'left',\n      windowId: windowId\n    })[0] || {}).content\n  };\n};\n/** */\n\n\nvar style = function style(theme) {\n  return {\n    badge: {\n      backgroundColor: theme.palette.notification.main\n    },\n    tab: {\n      '&:active': {\n        backgroundColor: theme.palette.action.active\n      },\n      '&:focus': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        },\n        backgroundColor: theme.palette.action.hover,\n        textDecoration: 'none' // Reset on touch devices, it doesn't add specificity\n\n      },\n      '&:hover': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        },\n        backgroundColor: theme.palette.action.hover,\n        textDecoration: 'none' // Reset on touch devices, it doesn't add specificity\n\n      },\n      borderRight: '2px solid transparent',\n      minWidth: 'auto'\n    },\n    tabSelected: {\n      borderRight: \"2px solid \".concat(theme.palette.primary.main)\n    },\n    tabsFlexContainer: {\n      flexDirection: 'column'\n    },\n    tabsIndicator: {\n      display: 'none'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(style), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarButtons'));\nexport default enhance(WindowSideBarButtons);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getThumbnailNavigationPosition, getThemeDirection } from '../state/selectors';\nimport { WindowThumbnailSettings } from '../components/WindowThumbnailSettings';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  setWindowThumbnailPosition: actions.setWindowThumbnailPosition\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    direction: getThemeDirection(state),\n    thumbnailNavigationPosition: getThumbnailNavigationPosition(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      borderBottom: '2px solid transparent'\n    },\n    MenuItem: {\n      display: 'inline-block'\n    },\n    selectedLabel: {\n      borderBottom: \"2px solid \".concat(theme.palette.secondary.main),\n      color: theme.palette.secondary.main\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(null, {\n  withRef: true\n}), connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n}), withPlugins('WindowThumbnailSettings') // further HOC go here\n);\nexport default enhance(WindowThumbnailSettings);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getWindowConfig, isFocused } from '../state/selectors';\nimport { WindowTopBar } from '../components/WindowTopBar';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  var config = getWindowConfig(state, {\n    windowId: windowId\n  });\n  return {\n    allowClose: config.allowClose,\n    allowFullscreen: config.allowFullscreen,\n    allowMaximize: config.allowMaximize,\n    allowTopMenuButton: config.allowTopMenuButton,\n    allowWindowSideBar: config.allowWindowSideBar,\n    focused: isFocused(state, {\n      windowId: windowId\n    }),\n    maximized: config.maximized\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId;\n  return {\n    focusWindow: function focusWindow() {\n      return dispatch(actions.focusWindow(windowId));\n    },\n    maximizeWindow: function maximizeWindow() {\n      return dispatch(actions.maximizeWindow(windowId));\n    },\n    minimizeWindow: function minimizeWindow() {\n      return dispatch(actions.minimizeWindow(windowId));\n    },\n    removeWindow: function removeWindow() {\n      return dispatch(actions.removeWindow(windowId));\n    },\n    toggleWindowSideBar: function toggleWindowSideBar() {\n      return dispatch(actions.toggleWindowSideBar(windowId));\n    }\n  };\n};\n/**\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: number|string},\n * windowTopBarStyle: {minHeight: number, paddingLeft: number, backgroundColor: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    focused: {},\n    windowTopBarStyle: {\n      '&$focused': {\n        borderTop: \"2px solid \".concat(theme.palette.primary.main)\n      },\n      backgroundColor: theme.palette.shades.main,\n      borderTop: '2px solid transparent',\n      minHeight: 32,\n      paddingLeft: theme.spacing(0.5),\n      paddingRight: theme.spacing(0.5)\n    },\n    windowTopBarStyleDraggable: {\n      cursor: 'move'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowTopBar'));\nexport default enhance(WindowTopBar);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopBarPluginArea } from '../components/WindowTopBarPluginArea';\n/**\n */\n\nvar styles = {};\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, null), withPlugins('WindowTopBarPluginArea'));\nexport default enhance(WindowTopBarPluginArea);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopBarPluginMenu } from '../components/WindowTopBarPluginMenu';\nimport { getContainerId } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowTopBarPluginMenu\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n};\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowTopBarPluginMenu'));\nexport default enhance(WindowTopBarPluginMenu);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestStatus, getManifestTitle, getWindowConfig } from '../state/selectors';\nimport { WindowTopBarTitle } from '../components/WindowTopBarTitle';\n/** mapStateToProps */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    error: getManifestStatus(state, {\n      windowId: windowId\n    }).error,\n    hideWindowTitle: getWindowConfig(state, {\n      windowId: windowId\n    }).hideWindowTitle,\n    isFetching: getManifestStatus(state, {\n      windowId: windowId\n    }).isFetching,\n    manifestTitle: getManifestTitle(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    title: _objectSpread(_objectSpread({}, theme.typography.h6), {}, {\n      flexGrow: 1,\n      paddingLeft: theme.spacing(0.5)\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowTopBarTitle'));\nexport default enhance(WindowTopBarTitle);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WindowTopMenu } from '../components/WindowTopMenu';\nimport { getConfig, getContainerId } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowTopMenu\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    showThumbnailNavigationSettings: getConfig(state).thumbnailNavigation.displaySettings\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowTopMenu\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    toggleDraggingEnabled: function toggleDraggingEnabled() {\n      return dispatch(actions.toggleDraggingEnabled());\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowTopMenu'));\nexport default enhance(WindowTopMenu);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowTopMenuButton } from '../components/WindowTopMenuButton';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WindowTopMenuButton'));\nexport default enhance(WindowTopMenuButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getAllowedWindowViewTypes, getWindowViewType } from '../state/selectors';\nimport { WindowViewSettings } from '../components/WindowViewSettings';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  setWindowViewType: actions.setWindowViewType\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    viewTypes: getAllowedWindowViewTypes(state, {\n      windowId: windowId\n    }),\n    windowViewType: getWindowViewType(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      borderBottom: '2px solid transparent'\n    },\n    MenuItem: {\n      display: 'inline-block'\n    },\n    selectedLabel: {\n      borderBottom: \"2px solid \".concat(theme.palette.secondary.main),\n      color: theme.palette.secondary.main\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(null, {\n  withRef: true\n}), connect(mapStateToProps, mapDispatchToProps, null, {\n  forwardRef: true\n}), withPlugins('WindowViewSettings'));\nexport default enhance(WindowViewSettings);","import { compose } from 'redux';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WindowViewer } from '../components/WindowViewer';\nvar enhance = compose(withPlugins('WindowViewer') // further HOC go here\n);\nexport default enhance(WindowViewer);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { Workspace } from '../components/Workspace';\nimport { getMaximizedWindowsIds, getWindowIds, getWorkspaceType, getConfig, getWorkspace } from '../state/selectors';\nimport * as actions from '../state/actions';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    allowNewWindows: getConfig(state).workspace.allowNewWindows,\n    isWorkspaceControlPanelVisible: getConfig(state).workspaceControlPanel.enabled,\n    maximizedWindowIds: getMaximizedWindowsIds(state),\n    windowIds: getWindowIds(state),\n    workspaceId: getWorkspace(state).id,\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addWindow: actions.addWindow\n};\n/**\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    workspaceViewport: {\n      bottom: 0,\n      left: 0,\n      margin: 0,\n      overflow: 'hidden',\n      position: 'absolute',\n      right: 0,\n      top: 0\n    },\n    workspaceWithControlPanel: {\n      paddingTop: 74\n    },\n    // injection order matters here\n    // eslint-disable-next-line sort-keys\n    '@media (min-width: 600px)': {\n      workspaceWithControlPanel: {\n        paddingLeft: 68,\n        paddingTop: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('Workspace') // further HOC go here\n);\nexport default enhance(Workspace);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WorkspaceAdd } from '../components/WorkspaceAdd';\nimport { getCatalog } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    catalog: getCatalog(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  addResource: actions.addResource,\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility\n};\n/**\n *\n * @param theme\n * @returns {{typographyBody: {flexGrow: number, fontSize: string},\n * form: {paddingBottom: number, paddingTop: number, marginTop: number},\n * fab: {bottom: number, position: string, right: number},\n * menuButton: {marginRight: number, marginLeft: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    displayNone: {\n      display: 'none'\n    },\n    fab: {\n      bottom: theme.spacing(2),\n      position: 'absolute',\n      right: theme.spacing(2)\n    },\n    form: _objectSpread(_objectSpread({}, theme.mixins.gutters()), {}, {\n      left: '0',\n      marginTop: 48,\n      paddingBottom: theme.spacing(2),\n      paddingTop: theme.spacing(2),\n      right: '0'\n    }),\n    list: {\n      margin: '16px'\n    },\n    menuButton: {\n      marginLeft: -12,\n      marginRight: 20\n    },\n    paper: _defineProperty({\n      borderTop: '0',\n      left: '0'\n    }, theme.breakpoints.up('sm'), {\n      left: '65px'\n    }),\n    typographyBody: {\n      flexGrow: 1\n    },\n    workspaceAdd: {\n      boxSizing: 'border-box',\n      height: '100%',\n      overflowX: 'hidden',\n      overflowY: 'auto',\n      paddingTop: 68\n    },\n    // injection order matters\n    // eslint-disable-next-line sort-keys\n    '@media (min-width: 600px)': {\n      workspaceAdd: {\n        paddingLeft: 68,\n        paddingTop: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceAdd'));\nexport default enhance(WorkspaceAdd);","import { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport withWidth from '@material-ui/core/withWidth';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getWindowIds, getWorkspace } from '../state/selectors';\nimport { WorkspaceAddButton } from '../components/WorkspaceAddButton';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WorkspaceControlPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var width = _ref.width;\n\n  var _getWorkspace = getWorkspace(state),\n      isWorkspaceAddVisible = _getWorkspace.isWorkspaceAddVisible;\n\n  return {\n    isWorkspaceAddVisible: isWorkspaceAddVisible,\n    useExtendedFab: width !== 'xs' && !isWorkspaceAddVisible && getWindowIds(state).length === 0\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  setWorkspaceAddVisibility: actions.setWorkspaceAddVisibility\n};\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    fab: {\n      margin: theme.spacing(1)\n    },\n    fabPrimary: {\n      '&:focus': {\n        backgroundColor: theme.palette.primary.dark\n      }\n    },\n    fabSecondary: {\n      '&:focus': {\n        backgroundColor: theme.palette.secondary.dark\n      }\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withWidth(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceAddButton'));\nexport default enhance(WorkspaceAddButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles, lighten, darken } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceArea } from '../components/WorkspaceArea';\nimport { getConfig, getWindowIds, getWorkspace } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof App\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    controlPanelVariant: getWorkspace(state).isWorkspaceAddVisible || getWindowIds(state).length > 0 ? undefined : 'wide',\n    isWorkspaceAddVisible: getWorkspace(state).isWorkspaceAddVisible,\n    isWorkspaceControlPanelVisible: getConfig(state).workspaceControlPanel.enabled,\n    lang: getConfig(state).language\n  };\n};\n/**\n *\n * @param theme\n * @returns {{background: {background: string}}}\n */\n\n\nvar styles = function styles(theme) {\n  var getBackgroundColor = theme.palette.type === 'light' ? darken : lighten;\n  return {\n    viewer: {\n      background: getBackgroundColor(theme.palette.shades.light, 0.1),\n      bottom: 0,\n      left: 0,\n      overflow: 'hidden',\n      position: 'absolute',\n      right: 0,\n      top: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('WorkspaceArea'));\nexport default enhance(WorkspaceArea);","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceControlPanel } from '../components/WorkspaceControlPanel';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)},\n * drawer: {overflowX: string, height: string}}}\n */\n\nvar styles = function styles(theme) {\n  var _branding;\n\n  return {\n    branding: (_branding = {\n      display: 'flex',\n      position: 'absolute'\n    }, _defineProperty(_branding, theme.breakpoints.up('xs'), {\n      display: 'none'\n    }), _defineProperty(_branding, theme.breakpoints.up('sm'), {\n      bottom: 0,\n      display: 'block',\n      \"float\": 'none',\n      right: 'auto',\n      width: '100%'\n    }), _defineProperty(_branding, \"right\", 0), _branding),\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    drawer: {\n      overflowX: 'hidden'\n    },\n    root: _defineProperty({\n      height: 64\n    }, theme.breakpoints.up('sm'), {\n      height: '100%',\n      left: 0,\n      right: 'auto',\n      width: 64\n    }),\n    toolbar: _defineProperty({\n      display: 'flex',\n      justifyContent: 'space-between'\n    }, theme.breakpoints.up('sm'), {\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      minHeight: 0\n    }),\n    wide: {\n      width: 'auto'\n    },\n    workspaceButtons: _defineProperty({}, theme.breakpoints.up('sm'), {\n      display: 'flex',\n      flexDirection: 'column'\n    })\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WorkspaceControlPanel') // further HOC go here\n);\nexport default enhance(WorkspaceControlPanel);","import { compose } from 'redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceControlPanelButtons } from '../components/WorkspaceControlPanelButtons';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withPlugins('WorkspaceControlPanelButtons'));\nexport default enhance(WorkspaceControlPanelButtons);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport WorkspaceElastic from '../components/WorkspaceElastic';\nimport { getElasticLayout, getWorkspace } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    elasticLayout: getElasticLayout(state),\n    workspace: getWorkspace(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    setWorkspaceViewportDimensions: function setWorkspaceViewportDimensions(position) {\n      dispatch(actions.setWorkspaceViewportDimensions(position));\n    },\n    setWorkspaceViewportPosition: function setWorkspaceViewportPosition(position) {\n      dispatch(actions.setWorkspaceViewportPosition(position));\n    },\n    updateElasticWindowLayout: function updateElasticWindowLayout(windowId, position) {\n      dispatch(actions.updateElasticWindowLayout(windowId, position));\n    }\n  };\n};\n\nvar styles = {\n  workspace: {\n    boxSizing: 'border-box',\n    margin: 0,\n    position: 'absolute',\n    transitionDuration: '.7s',\n    // order matters\n    // eslint-disable-next-line sort-keys\n    '& .react-draggable-dragging': {\n      transitionDuration: 'unset'\n    }\n  }\n};\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceElastic') // further HOC go here\n);\nexport default enhance(WorkspaceElastic);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core';\nimport * as actions from '../state/actions';\nimport WorkspaceElasticWindow from '../components/WorkspaceElasticWindow';\nimport { selectCompanionWindowDimensions, getWorkspace, isFocused, getElasticLayout } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    companionWindowDimensions: selectCompanionWindowDimensions(state, {\n      windowId: windowId\n    }),\n    focused: isFocused(state, {\n      windowId: windowId\n    }),\n    layout: getElasticLayout(state)[windowId],\n    workspace: getWorkspace(state)\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    updateElasticWindowLayout: function updateElasticWindowLayout(windowId, position) {\n      dispatch(actions.updateElasticWindowLayout(windowId, position));\n    }\n  };\n};\n/**\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    focused: {\n      zIndex: theme.zIndex.modal - 1\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps) // further HOC go here\n);\nexport default enhance(WorkspaceElasticWindow);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceExport } from '../components/WorkspaceExport';\nimport { getExportableState } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    exportableState: getExportableState(state)\n  };\n};\n/**\n * Styles for the withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    accordionTitle: {\n      padding: 0\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, {}), withPlugins('WorkspaceExport'));\nexport default enhance(WorkspaceExport);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceImport } from '../components/WorkspaceImport';\nimport * as actions from '../state/actions';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof App\n * @private\n */\n\nvar mapDispatchToProps = {\n  addError: actions.addError,\n  importConfig: actions.importMiradorState\n};\n/** */\n\nvar styles = function styles(theme) {\n  return {\n    cancelBtn: {\n      color: theme.palette.text.primary\n    },\n    textField: {\n      width: '100%'\n    },\n    textInput: {\n      fontFamily: 'monospace'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(null, mapDispatchToProps), withPlugins('WorkspaceImport'));\nexport default enhance(WorkspaceImport);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getContainerId, getShowZoomControlsConfig, getThemeIds, getWorkspace } from '../state/selectors';\nimport { WorkspaceMenu } from '../components/WorkspaceMenu';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof WorkspaceMenu\n * @private\n */\n\nvar mapDispatchToProps = {\n  toggleZoomControls: actions.toggleZoomControls\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowViewer\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state),\n    isWorkspaceAddVisible: getWorkspace(state).isWorkspaceAddVisible,\n    showThemePicker: getThemeIds(state).length > 0,\n    showZoomControls: getShowZoomControlsConfig(state)\n  };\n};\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceMenu'));\nexport default enhance(WorkspaceMenu);","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceMenuButton } from '../components/WorkspaceMenuButton';\n/**\n *\n * @param theme\n * @returns {{ctrlBtn: {margin: (number|string)}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), withPlugins('WorkspaceMenuButton') // further HOC\n);\nexport default enhance(WorkspaceMenuButton);","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getWorkspace } from '../state/selectors';\nimport * as actions from '../state/actions';\nimport { WorkspaceMosaic } from '../components/WorkspaceMosaic';\nimport globalReactMosaicStyles from '../styles/react-mosaic-component';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    layout: getWorkspace(state).layout,\n    windowIds: getWorkspace(state).windowIds,\n    workspaceId: getWorkspace(state).id\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateWorkspaceMosaicLayout: actions.updateWorkspaceMosaicLayout\n};\n\nvar styles = _objectSpread({\n  root: {\n    '& .mosaic-preview': {\n      boxShadow: 'none'\n    },\n    '& .mosaic-tile': {\n      boxShadow: '0 1px 3px 0 rgba(0, 0, 0, .2), 0 1px 1px 0 rgba(0, 0, 0, .2), 0 2px 1px -1px rgba(0, 0, 0, .2)'\n    },\n    '& .mosaic-window': {\n      boxShadow: 'none'\n    },\n    '& .mosaic-window-toolbar': {\n      display: 'none !important'\n    }\n  }\n}, globalReactMosaicStyles);\n\nvar enhance = compose(withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceMosaic') // further HOC go here\n);\nexport default enhance(WorkspaceMosaic);","// Generated using jss convert node_modules/react-mosaic-component/react-mosaic-component.css > src/styles/react-mosaic-component.js\n// .mosaic-blueprint-theme styles have also been removed\nvar globalReactMosaicStyles = {\n  '@global': {\n    '.mosaic': {\n      height: '100%',\n      width: '100%'\n    },\n    '.mosaic, .mosaic > *': {\n      boxSizing: 'border-box'\n    },\n    '.mosaic .mosaic-zero-state': {\n      position: 'absolute',\n      top: 6,\n      right: 6,\n      bottom: 6,\n      left: 6,\n      width: 'auto',\n      height: 'auto',\n      zIndex: '1'\n    },\n    '.mosaic-root': {\n      position: 'absolute',\n      top: 3,\n      right: 3,\n      bottom: 3,\n      left: 3\n    },\n    '.mosaic-split': {\n      position: 'absolute',\n      zIndex: '1',\n      touchAction: 'none'\n    },\n    '.mosaic-split:hover': {\n      background: 'black'\n    },\n    '.mosaic-split .mosaic-split-line': {\n      position: 'absolute'\n    },\n    '.mosaic-split.-row': {\n      marginLeft: -3,\n      width: 6,\n      cursor: 'ew-resize'\n    },\n    '.mosaic-split.-row .mosaic-split-line': {\n      top: '0',\n      bottom: '0',\n      left: 3,\n      right: 3\n    },\n    '.mosaic-split.-column': {\n      marginTop: -3,\n      height: 6,\n      cursor: 'ns-resize'\n    },\n    '.mosaic-split.-column .mosaic-split-line': {\n      top: 3,\n      bottom: 3,\n      left: '0',\n      right: '0'\n    },\n    '.mosaic-tile': {\n      position: 'absolute',\n      margin: 3\n    },\n    '.mosaic-tile > *': {\n      height: '100%',\n      width: '100%'\n    },\n    '.mosaic-drop-target': {\n      position: 'relative'\n    },\n    '.mosaic-drop-target.drop-target-hover .drop-target-container': {\n      display: 'block'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.left': {\n      right: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.right': {\n      left: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.bottom': {\n      top: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target.mosaic > .drop-target-container .drop-target.top': {\n      bottom: 'calc(100% -  10px )'\n    },\n    '.mosaic-drop-target .drop-target-container': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      display: 'none'\n    },\n    '.mosaic-drop-target .drop-target-container.-dragging': {\n      display: 'block'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      background: 'rgba(0, 0, 0, 0.2)',\n      border: '2px solid black',\n      opacity: '0',\n      zIndex: '5'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.left': {\n      right: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.right': {\n      left: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.bottom': {\n      top: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.top': {\n      bottom: 'calc(100% -  30% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover': {\n      opacity: '1'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.left': {\n      right: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.right': {\n      left: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.bottom': {\n      top: 'calc(100% -  50% )'\n    },\n    '.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.top': {\n      bottom: 'calc(100% -  50% )'\n    },\n    '.mosaic-window, .mosaic-preview': {\n      position: 'relative',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxOrient: 'vertical',\n      webkitBoxDirection: 'normal',\n      flexDirection: 'column',\n      overflow: 'hidden',\n      boxShadow: '0 0 1px rgba(0, 0, 0, 0.2)'\n    },\n    '.mosaic-window .mosaic-window-toolbar, .mosaic-preview .mosaic-window-toolbar': {\n      zIndex: '4',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxPack: 'justify',\n      justifyContent: 'space-between',\n      webkitBoxAlign: 'center',\n      alignItems: 'center',\n      flexShrink: '0',\n      height: 30,\n      background: 'white',\n      boxShadow: '0 1px 1px rgba(0, 0, 0, 0.2)'\n    },\n    '.mosaic-window .mosaic-window-toolbar.draggable, .mosaic-preview .mosaic-window-toolbar.draggable': {\n      cursor: 'move'\n    },\n    '.mosaic-window .mosaic-window-title, .mosaic-preview .mosaic-window-title': {\n      paddingLeft: 15,\n      webkitBoxFlex: '1',\n      flex: '1',\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      minHeight: 18\n    },\n    '.mosaic-window .mosaic-window-controls, .mosaic-preview .mosaic-window-controls': {\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      height: '100%'\n    },\n    '.mosaic-window .mosaic-window-controls .separator, .mosaic-preview .mosaic-window-controls .separator': {\n      height: 20,\n      borderLeft: '1px solid black',\n      margin: '5px 4px'\n    },\n    '.mosaic-window .mosaic-window-body, .mosaic-preview .mosaic-window-body': {\n      position: 'relative',\n      webkitBoxFlex: '1',\n      flex: '1',\n      height: '0',\n      background: 'white',\n      zIndex: '1',\n      overflow: 'hidden'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar, .mosaic-preview .mosaic-window-additional-actions-bar': {\n      position: 'absolute',\n      top: 30,\n      right: '0',\n      bottom: 'initial',\n      left: '0',\n      height: '0',\n      overflow: 'hidden',\n      background: 'white',\n      webkitBoxPack: 'end',\n      justifyContent: 'flex-end',\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      zIndex: '3'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar .bp3-button, .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button': {\n      margin: '0'\n    },\n    '.mosaic-window .mosaic-window-additional-actions-bar .bp3-button:after, .mosaic-preview .mosaic-window-additional-actions-bar .bp3-button:after': {\n      display: 'none'\n    },\n    '.mosaic-window .mosaic-window-body-overlay, .mosaic-preview .mosaic-window-body-overlay': {\n      position: 'absolute',\n      top: '0',\n      right: '0',\n      bottom: '0',\n      left: '0',\n      opacity: '0',\n      background: 'white',\n      display: 'none',\n      zIndex: '2'\n    },\n    '.mosaic-window.additional-controls-open .mosaic-window-additional-actions-bar, .mosaic-preview.additional-controls-open .mosaic-window-additional-actions-bar': {\n      height: 30\n    },\n    '.mosaic-window.additional-controls-open .mosaic-window-body-overlay, .mosaic-preview.additional-controls-open .mosaic-window-body-overlay': {\n      display: 'block'\n    },\n    '.mosaic-window .mosaic-preview, .mosaic-preview .mosaic-preview': {\n      height: '100%',\n      width: '100%',\n      position: 'absolute',\n      zIndex: '0',\n      border: '1px solid black',\n      maxHeight: 400\n    },\n    '.mosaic-window .mosaic-preview .mosaic-window-body, .mosaic-preview .mosaic-preview .mosaic-window-body': {\n      display: 'flex',\n      fallbacks: [{\n        display: '-webkit-box'\n      }],\n      webkitBoxOrient: 'vertical',\n      webkitBoxDirection: 'normal',\n      flexDirection: 'column',\n      webkitBoxAlign: 'center',\n      alignItems: 'center',\n      webkitBoxPack: 'center',\n      justifyContent: 'center'\n    },\n    '.mosaic-window .mosaic-preview h4, .mosaic-preview .mosaic-preview h4': {\n      marginBottom: 10\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.close-button:before': {\n      content: '\\'Close\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.split-button:before': {\n      content: '\\'Split\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.replace-button:before': {\n      content: '\\'Replace\\''\n    },\n    '.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.expand-button:before': {\n      content: '\\'Expand\\''\n    }\n  }\n};\nexport default globalReactMosaicStyles;","import { compose } from 'redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceOptionsButton } from '../components/WorkspaceOptionsButton';\n/**\n *\n * @param theme\n */\n\nvar styles = function styles(theme) {\n  return {\n    ctrlBtn: {\n      margin: theme.spacing(1)\n    },\n    ctrlBtnSelected: {\n      backgroundColor: theme.palette.action.selected\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), withPlugins('WorkspaceOptionsButton'));\nexport default enhance(WorkspaceOptionsButton);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { getContainerId } from '../state/selectors';\nimport { WorkspaceOptionsMenu } from '../components/WorkspaceOptionsMenu';\n/** Used for connect */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    containerId: getContainerId(state)\n  };\n}; // containerId: getContainerId(state),/\n\n\nvar enhance = compose(withTranslation(), connect(mapStateToProps, null));\nexport default enhance(WorkspaceOptionsMenu);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport { WorkspaceSelectionDialog } from '../components/WorkspaceSelectionDialog';\nimport * as actions from '../state/actions';\nimport { getWorkspaceType } from '../state/selectors';\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof ManifestListItem\n * @private\n */\n\nvar mapDispatchToProps = {\n  updateWorkspace: actions.updateWorkspace\n};\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    workspaceType: getWorkspaceType(state)\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      backgroundColor: 'transparent',\n      borderRadius: '0',\n      boxShadow: '0 0 transparent',\n      display: 'flex'\n    },\n    content: {\n      flex: '1 0 auto'\n    },\n    details: {\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    headline: {\n      paddingBottom: '6px'\n    },\n    list: {\n      '&active': {\n        outline: 'none'\n      },\n      '&focus': {\n        outline: 'none'\n      },\n      outline: 'none'\n    },\n    media: {\n      flex: '0 0 120px',\n      height: '90px'\n    },\n    menuItem: {\n      height: 'auto',\n      overflow: 'auto',\n      whiteSpace: 'inherit'\n    },\n    root: {\n      '&:last-child': {\n        paddingBottom: '12px'\n      },\n      paddingBottom: 0,\n      paddingTop: 0,\n      textAlign: 'left'\n    },\n    svgIcon: {\n      flexShrink: 0,\n      height: '90px',\n      width: '120px'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WorkspaceSelectionDialog'));\nexport default enhance(WorkspaceSelectionDialog);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getShowZoomControlsConfig, getViewer } from '../state/selectors';\nimport { ZoomControls } from '../components/ZoomControls';\n/**\n * mapStateToProps - to hook up connect\n * @memberof Workspace\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    showZoomControls: getShowZoomControlsConfig(state),\n    viewer: getViewer(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapDispatchToProps - used to hook up connect to action creators\n * @memberof Workspace\n * @private\n */\n\n\nvar mapDispatchToProps = {\n  updateViewport: actions.updateViewport\n};\n/**\n *\n * @param theme\n * @returns {{zoom_controls: {position: string, right: number},\n * ListItem: {paddingBottom: number, paddingTop: number}}}\n */\n\nvar styles = function styles(theme) {\n  return {\n    divider: {\n      borderRight: '1px solid #808080',\n      display: 'inline-block',\n      height: '24px',\n      margin: '12px 6px'\n    },\n    ListItem: {\n      paddingBottom: 0,\n      paddingTop: 0\n    },\n    zoom_controls: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'center'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('ZoomControls'));\nexport default enhance(ZoomControls);","import React from 'react';\nvar PluginContext = /*#__PURE__*/React.createContext();\nexport default PluginContext;","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport update from 'lodash/update';\nimport { connect } from 'react-redux';\nimport CompanionWindowRegistry from '../lib/CompanionWindowRegistry';\n/**\n * Returns a mapping from targets to plugins and modes\n *\n * @param {Array} plugins\n * @return {Object} - looks like:\n *\n *  {\n *    'WorkspacePanel': {\n *      wrap:     [plugin3, ...],\n *      add:      [plugin4, ...],\n *    },\n *    ...\n *  }\n */\n\nexport function createTargetToPluginMapping(plugins) {\n  return plugins.reduce(function (map, plugin) {\n    return update(map, [plugin.target, plugin.mode], function (x) {\n      return [].concat(_toConsumableArray(x || []), [plugin]);\n    });\n  }, {});\n}\n/** */\n\nexport function connectPluginsToStore(plugins) {\n  return plugins.map(function (plugin) {\n    return _objectSpread(_objectSpread({}, plugin), {}, {\n      component: connectPluginComponent(plugin)\n    });\n  });\n}\n/** */\n\nexport function addPluginsToCompanionWindowsRegistry(plugins) {\n  plugins.filter(function (p) {\n    return p.companionWindowKey;\n  }).forEach(function (plugin) {\n    CompanionWindowRegistry[plugin.companionWindowKey] = plugin.component;\n  });\n  return CompanionWindowRegistry;\n}\n/** Connect plugin component to state */\n\nfunction connectPluginComponent(plugin) {\n  if (!plugin.mapStateToProps && !plugin.mapDispatchToProps) return plugin.component;\n  return connect.apply(void 0, [plugin.mapStateToProps, plugin.mapDispatchToProps].concat(_toConsumableArray(plugin.connectOptions || [])))(plugin.component);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect, useState } from 'react';\nimport PluginContext from './PluginContext';\nimport { connectPluginsToStore, createTargetToPluginMapping, addPluginsToCompanionWindowsRegistry } from './pluginMapping';\n/**  */\n\nexport default function PluginProvider(props) {\n  var plugins = props.plugins,\n      children = props.children;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      pluginMap = _useState2[0],\n      setPluginMap = _useState2[1];\n\n  useEffect(function () {\n    var connectedPlugins = connectPluginsToStore(plugins);\n    addPluginsToCompanionWindowsRegistry(connectedPlugins);\n    setPluginMap(createTargetToPluginMapping(connectedPlugins));\n  }, [plugins]);\n  return /*#__PURE__*/React.createElement(PluginContext.Provider, {\n    value: pluginMap\n  }, children);\n}\nPluginProvider.defaultProps = {\n  children: null,\n  plugins: []\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useContext } from 'react';\nimport curry from 'lodash/curry';\nimport isEmpty from 'lodash/isEmpty';\nimport PluginContext from './PluginContext';\n/** withPlugins should be the innermost HOC */\n\nfunction _withPlugins(targetName, TargetComponent) {\n  // eslint-disable-line no-underscore-dangle\n\n  /** */\n  function PluginHoc(props, ref) {\n    var pluginMap = useContext(PluginContext);\n\n    var passDownProps = _objectSpread(_objectSpread({}, props), ref ? {\n      ref: ref\n    } : {});\n\n    var plugins = (pluginMap || {})[targetName];\n\n    if (isEmpty(plugins) || isEmpty(plugins.wrap) && isEmpty(plugins.add)) {\n      return /*#__PURE__*/React.createElement(TargetComponent, passDownProps);\n    }\n\n    var PluginComponents = (plugins.add || []).map(function (plugin) {\n      return plugin.component;\n    });\n    var targetComponent = /*#__PURE__*/React.createElement(TargetComponent, Object.assign({}, passDownProps, {\n      PluginComponents: PluginComponents\n    }));\n    if (isEmpty(plugins.wrap)) return targetComponent;\n    /** */\n\n    var pluginWrapper = function pluginWrapper(children, plugin) {\n      var WrapPluginComponent = plugin.component;\n      return /*#__PURE__*/React.createElement(WrapPluginComponent, Object.assign({\n        targetProps: passDownProps\n      }, passDownProps, {\n        PluginComponents: PluginComponents,\n        TargetComponent: TargetComponent\n      }), children);\n    };\n\n    return plugins.wrap.slice().reverse().reduce(pluginWrapper, /*#__PURE__*/React.createElement(TargetComponent, passDownProps));\n  }\n\n  var whatever = /*#__PURE__*/React.forwardRef(PluginHoc);\n  whatever.displayName = \"WithPlugins(\".concat(targetName, \")\");\n  return whatever;\n}\n/** withPlugins('MyComponent')(MyComponent) */\n\n\nexport var withPlugins = curry(_withPlugins);","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport ar from './locales/ar/translation.json';\nimport de from './locales/de/translation.json';\nimport en from './locales/en/translation.json';\nimport zhCn from './locales/zhCn/translation.json';\nimport zhTw from './locales/zhTw/translation.json';\nimport fr from './locales/fr/translation.json';\nimport ja from './locales/ja/translation.json';\nimport kr from './locales/kr/translation.json';\nimport nl from './locales/nl/translation.json';\nimport pl from './locales/pl/translation.json';\nimport ptBr from './locales/ptBr/translation.json';\nimport it from './locales/it/translation.json';\nimport sr from './locales/sr/translation.json';\nimport sv from './locales/sv/translation.json';\nimport lt from './locales/lt/translation.json';\nimport vi from './locales/vi/translation.json';\nimport nbNo from './locales/nbNo/translation.json';\n/**\n * Load translations for each language\n */\n\nfunction createI18nInstance() {\n  var resources = {\n    ar: ar,\n    de: de,\n    en: en,\n    fr: fr,\n    it: it,\n    ja: ja,\n    kr: kr,\n    lt: lt,\n    'nb-NO': nbNo,\n    nl: nl,\n    pl: pl,\n    'pt-BR': ptBr,\n    sr: sr,\n    sv: sv,\n    vi: vi,\n    'zh-CN': zhCn,\n    'zh-TW': zhTw\n  };\n  var instance = i18n.createInstance();\n  instance.use(initReactI18next).init({\n    fallbackLng: 'en',\n    interpolation: {\n      escapeValue: false // react is already safe from xss\n\n    },\n    lng: 'en',\n    resources: resources\n  });\n  return instance;\n}\n\nexport default createI18nInstance;","import isString from 'lodash/isString';\nimport isUndefined from 'lodash/isUndefined';\nimport isFunction from 'lodash/isFunction';\nimport isObject from 'lodash/isObject';\nimport isNull from 'lodash/isNull';\nimport values from 'lodash/values';\n/** */\n\nexport var validatePlugin = function validatePlugin(plugin) {\n  return [checkPlugin, checkName, checkTarget, checkMode, checkMapStateToProps, checkMapDispatchToProps, checkReducers].every(function (check) {\n    return check(plugin);\n  });\n};\n/** */\n\nvar checkPlugin = function checkPlugin(plugin) {\n  return isObject(plugin);\n};\n/** */\n\n\nvar checkName = function checkName(plugin) {\n  var name = plugin.name;\n  return isUndefined(name) || isString(name);\n};\n/** */\n\n\nvar checkTarget = function checkTarget(plugin) {\n  var mode = plugin.mode,\n      target = plugin.target;\n  if (isUndefined(mode)) return isUndefined(target);\n  return isString(target);\n};\n/** */\n\n\nvar checkMode = function checkMode(plugin) {\n  var mode = plugin.mode;\n  return isUndefined(mode) || ['add', 'wrap'].some(function (s) {\n    return s === mode;\n  });\n};\n/** */\n\n\nvar checkMapStateToProps = function checkMapStateToProps(plugin) {\n  var mapStateToProps = plugin.mapStateToProps;\n  return isUndefined(mapStateToProps) || isNull(mapStateToProps) || isFunction(mapStateToProps);\n};\n/** */\n\n\nvar checkMapDispatchToProps = function checkMapDispatchToProps(plugin) {\n  var mapDispatchToProps = plugin.mapDispatchToProps;\n  return isUndefined(mapDispatchToProps) || isNull(mapDispatchToProps) || isFunction(mapDispatchToProps) || isObject(mapDispatchToProps);\n};\n/** */\n\n\nvar checkReducers = function checkReducers(plugin) {\n  var reducers = plugin.reducers;\n  return isUndefined(reducers) || isObject(reducers) && values(reducers).every(isFunction);\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport deepmerge from 'deepmerge';\nimport { validatePlugin } from './pluginValidation';\n/** */\n\nexport function filterValidPlugins(plugins) {\n  var _splitPluginsByValida = splitPluginsByValidation(plugins),\n      validPlugins = _splitPluginsByValida.validPlugins,\n      invalidPlugins = _splitPluginsByValida.invalidPlugins;\n\n  logInvalidPlugins(invalidPlugins);\n  return validPlugins;\n}\n/** */\n\nfunction splitPluginsByValidation(plugins) {\n  var invalidPlugins = [];\n  var validPlugins = [];\n  plugins.forEach(function (plugin) {\n    if (Array.isArray(plugin)) {\n      var allValid = plugin.every(function (p) {\n        return validatePlugin(p);\n      });\n      allValid ? validPlugins.push.apply(validPlugins, _toConsumableArray(plugin)) : invalidPlugins.push.apply(invalidPlugins, _toConsumableArray(plugin));\n    } else {\n      validatePlugin(plugin) ? validPlugins.push(plugin) : invalidPlugins.push(plugin);\n    }\n  });\n  return {\n    invalidPlugins: invalidPlugins,\n    validPlugins: validPlugins\n  };\n}\n/** */\n\n\nfunction logInvalidPlugins(plugins) {\n  plugins.forEach(function (plugin) {\n    return console.log(\"Mirador: Plugin \".concat(plugin.name, \" is not valid and was rejected.\"));\n  });\n}\n/**  */\n\n\nexport function getReducersFromPlugins(plugins) {\n  return plugins && plugins.reduce(function (acc, plugin) {\n    return _objectSpread(_objectSpread({}, acc), plugin.reducers);\n  }, {});\n}\n/**  */\n\nexport function getConfigFromPlugins(plugins) {\n  return plugins && plugins.reduce(function (acc, plugin) {\n    return deepmerge(acc, plugin.config || {});\n  }, {});\n}\n/**  */\n\nexport function getSagasFromPlugins(plugins) {\n  return plugins && plugins.filter(function (plugin) {\n    return plugin.saga;\n  }).map(function (plugin) {\n    return plugin.saga;\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function accessTokensReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.RESOLVE_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.tokenServiceId, {\n        authId: action.id,\n        id: action.tokenServiceId,\n        isFetching: true\n      }));\n\n    case ActionTypes.REQUEST_ACCESS_TOKEN:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, {\n        authId: action.authId,\n        id: action.serviceId,\n        isFetching: true\n      }));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, _objectSpread(_objectSpread({}, state[action.serviceId]), {}, {\n        isFetching: false,\n        json: action.json\n      })));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.serviceId, _objectSpread(_objectSpread({}, state[action.serviceId]), {}, {\n        error: action.error,\n        isFetching: false\n      })));\n\n    case ActionTypes.RESET_AUTHENTICATION_STATE:\n      return omit(state, action.tokenServiceId);\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE:\n      if (!action.tokenServiceId) return state;\n      if (state[action.tokenServiceId].success) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.tokenServiceId, _objectSpread(_objectSpread({}, state[action.tokenServiceId]), {}, {\n        success: true\n      })));\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * annotationReducer\n */\n\nexport var annotationsReducer = function annotationsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        id: action.annotationId,\n        isFetching: true\n      }))));\n\n    case ActionTypes.RECEIVE_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        id: action.annotationId,\n        isFetching: false,\n        json: action.annotationJson\n      }))));\n\n    case ActionTypes.RECEIVE_ANNOTATION_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.targetId, _objectSpread(_objectSpread({}, state[action.targetId]), {}, _defineProperty({}, action.annotationId, {\n        error: action.error,\n        id: action.annotationId,\n        isFetching: false\n      }))));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * authReducer\n */\n\nexport var authReducer = function authReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, {\n        id: action.id,\n        isFetching: true,\n        profile: action.profile,\n        windowId: action.windowId\n      }));\n\n    case ActionTypes.RESOLVE_AUTHENTICATION_REQUEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.id, _objectSpread(_objectSpread({}, state[action.id]), {}, {\n        isFetching: false,\n        ok: action.ok\n      })));\n\n    case ActionTypes.RECEIVE_ACCESS_TOKEN:\n      if (!action.authId) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.authId, _objectSpread(_objectSpread({}, state[action.authId]), {}, {\n        ok: true\n      })));\n\n    case ActionTypes.RESET_AUTHENTICATION_STATE:\n      return omit(state, action.id);\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * catalogReducer\n */\n\nexport var catalogReducer = function catalogReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_RESOURCE:\n      if (state.some(function (m) {\n        return m.manifestId === action.manifestId;\n      })) return state;\n      return [_objectSpread({\n        manifestId: action.manifestId\n      }, action.payload)].concat(_toConsumableArray(state));\n\n    case ActionTypes.ADD_WINDOW:\n      if (state.some(function (m) {\n        return m.manifestId === action.window.manifestId;\n      })) return state;\n      return [{\n        manifestId: action.window.manifestId\n      }].concat(_toConsumableArray(state));\n\n    case ActionTypes.UPDATE_WINDOW:\n      if (!action.payload.manifestId) return state;\n      if (state.some(function (m) {\n        return m.manifestId === action.payload.manifestId;\n      })) return state;\n      return [{\n        manifestId: action.payload.manifestId\n      }].concat(_toConsumableArray(state));\n\n    case ActionTypes.REMOVE_RESOURCE:\n      return state.filter(function (r) {\n        return r.manifestId !== action.manifestId;\n      });\n\n    case ActionTypes.IMPORT_CONFIG:\n      return action.config.catalog || [];\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.catalog || [];\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport set from 'lodash/fp/set';\nimport update from 'lodash/fp/update';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function companionWindowsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_COMPANION_WINDOW:\n      return set([action.id], action.payload, state);\n\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), (action.companionWindows || []).reduce(function (newState, cw) {\n        newState[cw.id] = _objectSpread(_objectSpread(_objectSpread({}, state[cw.id]), cw), {}, {\n          windowId: action.id\n        });\n        return newState;\n      }, {}));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return Object.keys(state).reduce(function (object, key) {\n        if (state[key].windowId !== action.windowId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.UPDATE_COMPANION_WINDOW:\n      return update([action.id], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      return omit(state, action.id);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.companionWindows || [];\n\n    case ActionTypes.TOGGLE_TOC_NODE:\n      return update([action.id, 'tocNodes'], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    default:\n      return state;\n  }\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport deepmerge from 'deepmerge';\nimport settings from '../../config/settings';\nimport ActionTypes from '../actions/action-types';\n\nvar initialState = _objectSpread({}, settings);\n/** Overwrite arrays when deep merging */\n\n\nvar overwriteMerge = function overwriteMerge(destinationArray, sourceArray, options) {\n  return sourceArray;\n};\n/**\n * configReducer - does a deep merge of the config\n */\n\n\nexport var configReducer = function configReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_CONFIG:\n    case ActionTypes.IMPORT_CONFIG:\n      return deepmerge(state, action.config, {\n        arrayMerge: overwriteMerge\n      });\n\n    case ActionTypes.SET_CONFIG:\n      return action.config;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.config || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport update from 'lodash/fp/update';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * elasticLayoutReducer\n */\n\nexport var elasticLayoutReducer = function elasticLayoutReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.window.id, _objectSpread({\n        windowId: action.window.id\n      }, action.elasticLayout)));\n\n    case ActionTypes.UPDATE_ELASTIC_WINDOW_LAYOUT:\n      return update([action.windowId], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.elasticLayout || {};\n\n    default:\n      return state;\n  }\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport without from 'lodash/without';\nimport ActionTypes from '../actions/action-types';\nvar defaultState = {\n  items: []\n};\n/**\n * errorsReducer\n */\n\nexport var errorsReducer = function errorsReducer() {\n  var _objectSpread2, _objectSpread3, _objectSpread4;\n\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var ret;\n\n  switch (action.type) {\n    case ActionTypes.ADD_ERROR:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread2 = {}, _defineProperty(_objectSpread2, action.id, {\n        id: action.id,\n        message: action.message\n      }), _defineProperty(_objectSpread2, \"items\", [].concat(_toConsumableArray(state.items), [action.id])), _objectSpread2));\n    // eslint-disable-line max-len\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread3 = {}, _defineProperty(_objectSpread3, action.infoId, {\n        id: action.infoId,\n        message: action.error\n      }), _defineProperty(_objectSpread3, \"items\", [].concat(_toConsumableArray(state.items), [action.infoId])), _objectSpread3));\n\n    case ActionTypes.RECEIVE_SEARCH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, (_objectSpread4 = {}, _defineProperty(_objectSpread4, action.searchId, {\n        id: action.searchId,\n        message: action.error\n      }), _defineProperty(_objectSpread4, \"items\", [].concat(_toConsumableArray(state.items), [action.searchId])), _objectSpread4));\n\n    case ActionTypes.REMOVE_ERROR:\n      ret = Object.keys(state).reduce(function (object, key) {\n        if (key !== action.id) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n      ret.items = without(ret.items, action.id);\n      return ret;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return defaultState;\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from '../actions/action-types';\n/**\n * infoResponsesReducer\n */\n\nexport var infoResponsesReducer = function infoResponsesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        id: action.infoId,\n        isFetching: true\n      }));\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        degraded: false,\n        id: action.infoId,\n        isFetching: false,\n        json: action.infoJson,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        degraded: true,\n        id: action.infoId,\n        isFetching: false,\n        json: action.infoJson,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.infoId, {\n        error: action.error,\n        id: action.infoId,\n        isFetching: false,\n        tokenServiceId: action.tokenServiceId\n      }));\n\n    case ActionTypes.REMOVE_INFO_RESPONSE:\n      return Object.keys(state).reduce(function (object, key) {\n        if (key !== action.infoId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport deepmerge from 'deepmerge';\nimport ActionTypes from '../actions/action-types';\n/**\n * configReducer - does a deep merge of the config\n */\n\nexport var layersReducer = function layersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_LAYERS:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.canvasId, deepmerge((state[action.windowId] || {})[action.canvasId] || {}, action.payload)))));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, [action.windowId]);\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * manifestsReducer\n */\n\nexport var manifestsReducer = function manifestsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_MANIFEST:\n      return _objectSpread(_defineProperty({}, action.manifestId, _objectSpread(_objectSpread(_objectSpread({}, state[action.manifestId]), action.properties), {}, {\n        id: action.manifestId\n      })), omit(state, action.manifestId));\n\n    case ActionTypes.RECEIVE_MANIFEST:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.manifestId, _objectSpread(_objectSpread({}, state[action.manifestId]), {}, {\n        error: null,\n        // Explicitly set the error to null in case this is a re-fetch\n        id: action.manifestId,\n        isFetching: false,\n        json: action.manifestJson\n      })));\n\n    case ActionTypes.RECEIVE_MANIFEST_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.manifestId, _objectSpread(_objectSpread({}, state[action.manifestId]), {}, {\n        error: action.error,\n        id: action.manifestId,\n        isFetching: false\n      })));\n\n    case ActionTypes.REMOVE_MANIFEST:\n      return Object.keys(state).reduce(function (object, key) {\n        if (key !== action.manifestId) {\n          object[key] = state[key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {});\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.manifests || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport omit from 'lodash/omit';\nimport flatten from 'lodash/flatten';\nimport ActionTypes from '../actions/action-types';\n/**\n * searchReducer\n */\n\nexport var searchesReducer = function searchesReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var searchStruct = (state[action.windowId] || {})[action.companionWindowId] || {};\n\n  switch (action.type) {\n    case ActionTypes.REQUEST_SEARCH:\n      if (searchStruct.query !== action.query) {\n        // new query\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n          data: _defineProperty({}, action.searchId, {\n            isFetching: true\n          }),\n          query: action.query,\n          selectedContentSearchAnnotation: []\n        })))));\n      } // paginating through a query\n\n\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          isFetching: true\n        }))\n      })))));\n\n    case ActionTypes.RECEIVE_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          isFetching: false,\n          json: action.searchJson\n        }))\n      })))));\n\n    case ActionTypes.RECEIVE_SEARCH_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        data: _objectSpread(_objectSpread({}, searchStruct.data), {}, _defineProperty({}, action.searchId, {\n          error: action.error,\n          isFetching: false\n        }))\n      })))));\n\n    case ActionTypes.REMOVE_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, Object.keys(state[action.windowId]).reduce(function (object, key) {\n        if (key !== action.companionWindowId) {\n          object[key] = state[action.windowId][key]; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {})));\n\n    case ActionTypes.SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, _defineProperty({}, action.companionWindowId, _objectSpread(_objectSpread({}, searchStruct), {}, {\n        selectedContentSearchAnnotationIds: action.annotationIds\n      })))));\n\n    case ActionTypes.SELECT_ANNOTATION:\n      if (!state[action.windowId]) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, Object.keys(state[action.windowId]).reduce(function (object, key) {\n        var search = state[action.windowId][key];\n        var searchHasAnnotation = search.data && Object.values(search.data).filter(function (resp) {\n          return resp.json && resp.json.resources;\n        }).some(function (resp) {\n          return flatten([resp.json.resources]).some(function (r) {\n            return r['@id'] === action.annotationId;\n          });\n        });\n\n        if (searchHasAnnotation) {\n          object[key] = _objectSpread(_objectSpread({}, search), {}, {\n            selectedContentSearchAnnotationIds: [action.annotationId]\n          });\n        } else {\n          object[key] = search; // eslint-disable-line no-param-reassign\n        }\n\n        return object;\n      }, {})));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return {};\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      if (!state[action.windowId]) return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread({}, omit(state[action.windowId], action.id))));\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport set from 'lodash/fp/set';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * viewersReducer\n */\n\nexport var viewersReducer = function viewersReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_VIEWPORT:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), action.payload)));\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, action.windowId);\n\n    case ActionTypes.SET_WINDOW_VIEW_TYPE:\n      return set([action.windowId], null, state);\n\n    case ActionTypes.SET_CANVAS:\n      if (!action.preserveViewport) {\n        return set([action.windowId], null, state);\n      }\n\n      return state;\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.viewers || {};\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport update from 'lodash/fp/update';\nimport omit from 'lodash/omit';\nimport ActionTypes from '../actions/action-types';\n/**\n * windowsReducer\n */\n\nexport var windowsReducer = function windowsReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.window.id, action.window));\n\n    case ActionTypes.MAXIMIZE_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        maximized: true\n      })));\n\n    case ActionTypes.MINIMIZE_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        maximized: false\n      })));\n\n    case ActionTypes.UPDATE_WINDOW:\n      return update([action.id], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), action.payload);\n      }, state);\n\n    case ActionTypes.REMOVE_WINDOW:\n      return omit(state, [action.windowId]);\n\n    case ActionTypes.TOGGLE_WINDOW_SIDE_BAR:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        sideBarOpen: !state[action.windowId].sideBarOpen\n      })));\n\n    case ActionTypes.SET_WINDOW_VIEW_TYPE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        view: action.viewType\n      })));\n\n    case ActionTypes.UPDATE_WINDOW_POSITION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.payload.windowId, _objectSpread(_objectSpread({}, state[action.payload.windowId]), {}, {\n        x: action.payload.position.x,\n        y: action.payload.position.y\n      })));\n\n    case ActionTypes.SET_WINDOW_SIZE:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.payload.windowId, _objectSpread(_objectSpread({}, state[action.payload.windowId]), {}, {\n        height: action.payload.size.height,\n        width: action.payload.size.width,\n        x: action.payload.size.x,\n        y: action.payload.size.y\n      })));\n\n    case ActionTypes.SET_CANVAS:\n      if (!state[action.windowId]) return state;\n      return update([action.windowId], function (orig) {\n        return _objectSpread(_objectSpread({}, orig || {}), {}, {\n          canvasId: action.canvasId,\n          visibleCanvases: action.visibleCanvases || []\n        });\n      }, state);\n\n    case ActionTypes.ADD_COMPANION_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionWindowIds: state[action.windowId].companionWindowIds.concat([action.id])\n      }, action.payload.position === 'left' ? {\n        companionAreaOpen: true,\n        sideBarPanel: action.payload.content\n      } : {})));\n\n    case ActionTypes.UPDATE_COMPANION_WINDOW:\n      if (action.payload.position !== 'left') return state;\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionAreaOpen: true\n      })));\n\n    case ActionTypes.REMOVE_COMPANION_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        companionWindowIds: state[action.windowId].companionWindowIds.filter(function (id) {\n          return id !== action.id;\n        })\n      })));\n\n    case ActionTypes.SELECT_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        selectedAnnotationId: action.annotationId\n      })));\n\n    case ActionTypes.DESELECT_ANNOTATION:\n      {\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n          selectedAnnotationId: undefined\n        })));\n      }\n\n    case ActionTypes.HOVER_ANNOTATION:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        hoveredAnnotationIds: action.annotationIds\n      })));\n\n    case ActionTypes.TOGGLE_ANNOTATION_DISPLAY:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        highlightAllAnnotations: !state[action.windowId].highlightAllAnnotations\n      })));\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.windows || [];\n\n    case ActionTypes.REQUEST_SEARCH:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        suggestedSearches: undefined\n      })));\n\n    case ActionTypes.SHOW_COLLECTION_DIALOG:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        collectionDialogOn: true,\n        collectionManifestId: action.manifestId,\n        collectionPath: action.collectionPath\n      })));\n\n    case ActionTypes.HIDE_COLLECTION_DIALOG:\n      return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, action.windowId, _objectSpread(_objectSpread({}, state[action.windowId]), {}, {\n        collectionDialogOn: false\n      })));\n\n    default:\n      return state;\n  }\n};","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport settings from '../../config/settings';\nimport ActionTypes from '../actions/action-types';\n/** Check if the viewport dimensions are fully specified */\n\nfunction hasViewportPosition(viewportPosition) {\n  return viewportPosition.x !== undefined && viewportPosition.y !== undefined && viewportPosition.width !== undefined && viewportPosition.height !== undefined;\n}\n/** Check if the containee is fully within the bounds on the container */\n\n\nfunction contains(container, containee) {\n  return containee.x - containee.width / 2 > container.x - container.width / 2 && containee.y - containee.height / 2 > container.y - container.height / 2 && containee.x + containee.width / 2 < container.x + container.width / 2 && containee.y + containee.height / 2 < container.y + container.height / 2;\n}\n/**\n * workspaceReducer\n */\n\n\nexport var workspaceReducer = function workspaceReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _objectSpread(_objectSpread({}, settings.workspace), {}, {\n    windowIds: []\n  });\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var newWorkspaceDimensions;\n  var viewportPosition;\n  var newWindowIds;\n\n  switch (action.type) {\n    case ActionTypes.UPDATE_WORKSPACE:\n      return _objectSpread(_objectSpread({}, state), action.config);\n\n    case ActionTypes.FOCUS_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.windowId,\n        viewportPosition: _objectSpread(_objectSpread({}, state.viewportPosition), action.position)\n      });\n\n    case ActionTypes.ADD_WINDOW:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.window.id,\n        windowIds: [].concat(_toConsumableArray(state.windowIds || []), [action.window.id])\n      });\n\n    case ActionTypes.REMOVE_WINDOW:\n      newWindowIds = (state.windowIds || []).filter(function (v) {\n        return v !== action.windowId;\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        focusedWindowId: action.windowId === state.focusedWindowId ? newWindowIds[newWindowIds.length - 1] : state.focusedWindowId,\n        windowIds: newWindowIds\n      });\n\n    case ActionTypes.SET_WORKSPACE_FULLSCREEN:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isFullscreenEnabled: action.isFullscreenEnabled\n      });\n\n    case ActionTypes.TOGGLE_ZOOM_CONTROLS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        showZoomControls: action.showZoomControls\n      });\n\n    case ActionTypes.UPDATE_WORKSPACE_MOSAIC_LAYOUT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        layout: action.layout\n      });\n\n    case ActionTypes.SET_WORKSPACE_ADD_VISIBILITY:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isWorkspaceAddVisible: action.isWorkspaceAddVisible\n      });\n\n    case ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION:\n      newWorkspaceDimensions = {};\n      viewportPosition = _objectSpread(_objectSpread({}, state.viewportPosition), action.payload.position);\n\n      if (hasViewportPosition(viewportPosition) && !contains({\n        height: state.height,\n        width: state.width,\n        x: 0,\n        y: 0\n      }, viewportPosition)) {\n        newWorkspaceDimensions = {\n          height: state.height * 2,\n          width: state.width * 2\n        };\n      }\n\n      return _objectSpread(_objectSpread(_objectSpread({}, state), newWorkspaceDimensions), {}, {\n        viewportPosition: viewportPosition\n      });\n\n    case ActionTypes.SET_CONFIG:\n    case ActionTypes.IMPORT_CONFIG:\n    case ActionTypes.UPDATE_CONFIG:\n      return _objectSpread(_objectSpread({}, state), action.config.workspace);\n\n    case ActionTypes.IMPORT_MIRADOR_STATE:\n      return action.state.workspace || {};\n\n    case ActionTypes.TOGGLE_DRAGGING:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        draggingEnabled: !state.draggingEnabled\n      });\n\n    default:\n      return state;\n  }\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { combineReducers } from 'redux';\nimport { accessTokensReducer, authReducer, companionWindowsReducer, configReducer, elasticLayoutReducer, errorsReducer, infoResponsesReducer, manifestsReducer, viewersReducer, windowsReducer, workspaceReducer, annotationsReducer, searchesReducer, layersReducer, catalogReducer } from '.';\n/**\n * Function to create root reducer\n * from plugin reducers.\n * @namespace CreateRootReducer\n */\n\nexport default function createRootReducer(pluginReducers) {\n  return combineReducers(_objectSpread({\n    accessTokens: accessTokensReducer,\n    annotations: annotationsReducer,\n    auth: authReducer,\n    catalog: catalogReducer,\n    companionWindows: companionWindowsReducer,\n    config: configReducer,\n    elasticLayout: elasticLayoutReducer,\n    errors: errorsReducer,\n    infoResponses: infoResponsesReducer,\n    layers: layersReducer,\n    manifests: manifestsReducer,\n    searches: searchesReducer,\n    viewers: viewersReducer,\n    windows: windowsReducer,\n    workspace: workspaceReducer\n  }, pluginReducers));\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchIiifResource),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchIiifResourceWithAuth),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchManifest),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(getAccessTokenService),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInfoResponse),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(fetchSearchResponse),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(fetchAnnotation),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(fetchResourceManifest),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(fetchManifests),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(iiifSaga);\n\nimport { all, call, put, select, takeEvery } from 'redux-saga/effects';\nimport fetch from 'isomorphic-unfetch';\nimport { Utils } from 'manifesto.js';\nimport normalizeUrl from 'normalize-url';\nimport ActionTypes from '../actions/action-types';\nimport { receiveManifest, receiveManifestFailure, receiveInfoResponse, receiveInfoResponseFailure, receiveDegradedInfoResponse, receiveSearch, receiveSearchFailure, receiveAnnotation, receiveAnnotationFailure } from '../actions';\nimport { getManifests, getRequestsConfig, getAccessTokens, selectInfoResponse } from '../selectors';\n/** */\n\nfunction fetchWrapper(url, options, _ref) {\n  var success = _ref.success,\n      degraded = _ref.degraded,\n      failure = _ref.failure;\n  return fetch(url, options).then(function (response) {\n    return response.json().then(function (json) {\n      if (response.status === 401) return (degraded || success)({\n        json: json,\n        response: response\n      });\n      if (response.ok) return success({\n        json: json,\n        response: response\n      });\n      return failure({\n        error: response.statusText,\n        json: json,\n        response: response\n      });\n    })[\"catch\"](function (error) {\n      return failure({\n        error: error,\n        response: response\n      });\n    });\n  })[\"catch\"](function (error) {\n    return failure({\n      error: error\n    });\n  });\n}\n/** */\n\n\nfunction fetchIiifResource(url, options, _ref2) {\n  var success, degraded, failure, _yield$select, _yield$select$preproc, preprocessors, _yield$select$postpro, postprocessors, reqOptions, action;\n\n  return _regeneratorRuntime.wrap(function fetchIiifResource$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          success = _ref2.success, degraded = _ref2.degraded, failure = _ref2.failure;\n          _context.next = 3;\n          return select(getRequestsConfig);\n\n        case 3:\n          _yield$select = _context.sent;\n          _yield$select$preproc = _yield$select.preprocessors;\n          preprocessors = _yield$select$preproc === void 0 ? [] : _yield$select$preproc;\n          _yield$select$postpro = _yield$select.postprocessors;\n          postprocessors = _yield$select$postpro === void 0 ? [] : _yield$select$postpro;\n          _context.prev = 8;\n          reqOptions = preprocessors.reduce(function (acc, f) {\n            return f(url, acc) || acc;\n          }, options);\n          _context.next = 12;\n          return call(fetchWrapper, url, reqOptions, {\n            degraded: degraded,\n            failure: failure,\n            success: success\n          });\n\n        case 12:\n          action = _context.sent;\n          action = postprocessors.reduce(function (acc, f) {\n            return f(url, acc) || acc;\n          }, action);\n          return _context.abrupt(\"return\", action);\n\n        case 17:\n          _context.prev = 17;\n          _context.t0 = _context[\"catch\"](8);\n          return _context.abrupt(\"return\", failure({\n            error: _context.t0\n          }));\n\n        case 20:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[8, 17]]);\n}\n/** */\n\n\nfunction fetchIiifResourceWithAuth(url, iiifResource, options, _ref3) {\n  var degraded, failure, success, urlOptions, tokenServiceId, tokenService, _yield$call, error, json, response, id, authoritativeTokenService;\n\n  return _regeneratorRuntime.wrap(function fetchIiifResourceWithAuth$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          degraded = _ref3.degraded, failure = _ref3.failure, success = _ref3.success;\n          urlOptions = _objectSpread({}, options);\n\n          if (!iiifResource) {\n            _context2.next = 8;\n            break;\n          }\n\n          _context2.next = 5;\n          return call(getAccessTokenService, iiifResource);\n\n        case 5:\n          tokenService = _context2.sent;\n          tokenServiceId = tokenService && tokenService.id;\n\n          if (tokenService && tokenService.json) {\n            urlOptions.headers = _objectSpread({\n              Authorization: \"Bearer \".concat(tokenService.json.accessToken)\n            }, options.headers);\n          }\n\n        case 8:\n          _context2.next = 10;\n          return call(fetchIiifResource, url, urlOptions, {\n            failure: function failure(arg) {\n              return arg;\n            },\n            success: function success(arg) {\n              return arg;\n            }\n          });\n\n        case 10:\n          _yield$call = _context2.sent;\n          error = _yield$call.error;\n          json = _yield$call.json;\n          response = _yield$call.response;\n\n          if (!error) {\n            _context2.next = 18;\n            break;\n          }\n\n          _context2.next = 17;\n          return put(failure({\n            error: error,\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 17:\n          return _context2.abrupt(\"return\");\n\n        case 18:\n          id = json['@id'] || json.id;\n\n          if (!response.ok) {\n            _context2.next = 26;\n            break;\n          }\n\n          if (!(normalizeUrl(id, {\n            stripAuthentication: false\n          }) === normalizeUrl(url.replace(/info\\.json$/, ''), {\n            stripAuthentication: false\n          }))) {\n            _context2.next = 24;\n            break;\n          }\n\n          _context2.next = 23;\n          return put(success({\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 23:\n          return _context2.abrupt(\"return\");\n\n        case 24:\n          _context2.next = 30;\n          break;\n\n        case 26:\n          if (!(response.status !== 401)) {\n            _context2.next = 30;\n            break;\n          }\n\n          _context2.next = 29;\n          return put(failure({\n            error: error,\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 29:\n          return _context2.abrupt(\"return\");\n\n        case 30:\n          _context2.next = 32;\n          return call(getAccessTokenService, json);\n\n        case 32:\n          authoritativeTokenService = _context2.sent;\n\n          if (!(authoritativeTokenService && authoritativeTokenService.id !== tokenServiceId)) {\n            _context2.next = 37;\n            break;\n          }\n\n          _context2.next = 36;\n          return call(fetchIiifResourceWithAuth, url, json, options, {\n            degraded: degraded,\n            failure: failure,\n            success: success\n          });\n\n        case 36:\n          return _context2.abrupt(\"return\");\n\n        case 37:\n          _context2.next = 39;\n          return put((degraded || success)({\n            json: json,\n            response: response,\n            tokenServiceId: tokenServiceId\n          }));\n\n        case 39:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\n\nexport function fetchManifest(_ref4) {\n  var manifestId, callbacks, dispatch;\n  return _regeneratorRuntime.wrap(function fetchManifest$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          manifestId = _ref4.manifestId;\n          callbacks = {\n            failure: function failure(_ref5) {\n              var error = _ref5.error,\n                  json = _ref5.json,\n                  response = _ref5.response;\n              return receiveManifestFailure(manifestId, typeof error === 'object' ? String(error) : error);\n            },\n            success: function success(_ref6) {\n              var json = _ref6.json,\n                  response = _ref6.response;\n              return receiveManifest(manifestId, json);\n            }\n          };\n          _context3.next = 4;\n          return call(fetchIiifResource, manifestId, {}, callbacks);\n\n        case 4:\n          dispatch = _context3.sent;\n          _context3.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** @private */\n\nfunction getAccessTokenService(resource) {\n  var manifestoCompatibleResource, services, accessTokens, i, authService, accessTokenService, token;\n  return _regeneratorRuntime.wrap(function getAccessTokenService$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          manifestoCompatibleResource = resource && resource.__jsonld ? resource : _objectSpread(_objectSpread({}, resource), {}, {\n            options: {}\n          });\n          services = Utils.getServices(manifestoCompatibleResource).filter(function (s) {\n            return s.getProfile().match(/http:\\/\\/iiif.io\\/api\\/auth\\//);\n          });\n\n          if (!(services.length === 0)) {\n            _context4.next = 4;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", undefined);\n\n        case 4:\n          _context4.next = 6;\n          return select(getAccessTokens);\n\n        case 6:\n          accessTokens = _context4.sent;\n\n          if (accessTokens) {\n            _context4.next = 9;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", undefined);\n\n        case 9:\n          i = 0;\n\n        case 10:\n          if (!(i < services.length)) {\n            _context4.next = 19;\n            break;\n          }\n\n          authService = services[i];\n          accessTokenService = Utils.getService(authService, 'http://iiif.io/api/auth/1/token') || Utils.getService(authService, 'http://iiif.io/api/auth/0/token');\n          token = accessTokenService && accessTokens[accessTokenService.id];\n\n          if (!(token && token.json)) {\n            _context4.next = 16;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", token);\n\n        case 16:\n          i += 1;\n          _context4.next = 10;\n          break;\n\n        case 19:\n          return _context4.abrupt(\"return\", undefined);\n\n        case 20:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** @private */\n\n\nexport function fetchInfoResponse(_ref7) {\n  var imageResource, infoId, windowId, iiifResource, callbacks;\n  return _regeneratorRuntime.wrap(function fetchInfoResponse$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          imageResource = _ref7.imageResource, infoId = _ref7.infoId, windowId = _ref7.windowId;\n          iiifResource = imageResource;\n\n          if (iiifResource) {\n            _context5.next = 6;\n            break;\n          }\n\n          _context5.next = 5;\n          return select(selectInfoResponse, {\n            infoId: infoId\n          });\n\n        case 5:\n          iiifResource = _context5.sent;\n\n        case 6:\n          callbacks = {\n            degraded: function degraded(_ref8) {\n              var json = _ref8.json,\n                  response = _ref8.response,\n                  tokenServiceId = _ref8.tokenServiceId;\n              return receiveDegradedInfoResponse(infoId, json, response.ok, tokenServiceId, windowId);\n            },\n            failure: function failure(_ref9) {\n              var error = _ref9.error,\n                  json = _ref9.json,\n                  response = _ref9.response,\n                  tokenServiceId = _ref9.tokenServiceId;\n              return receiveInfoResponseFailure(infoId, error, tokenServiceId);\n            },\n            success: function success(_ref10) {\n              var json = _ref10.json,\n                  response = _ref10.response,\n                  tokenServiceId = _ref10.tokenServiceId;\n              return receiveInfoResponse(infoId, json, response.ok, tokenServiceId);\n            }\n          };\n          _context5.next = 9;\n          return call(fetchIiifResourceWithAuth, \"\".concat(infoId.replace(/\\/$/, ''), \"/info.json\"), iiifResource, {}, callbacks);\n\n        case 9:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** @private */\n\nexport function fetchSearchResponse(_ref11) {\n  var windowId, companionWindowId, query, searchId, callbacks, dispatch;\n  return _regeneratorRuntime.wrap(function fetchSearchResponse$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          windowId = _ref11.windowId, companionWindowId = _ref11.companionWindowId, query = _ref11.query, searchId = _ref11.searchId;\n          callbacks = {\n            failure: function failure(_ref12) {\n              var error = _ref12.error,\n                  json = _ref12.json,\n                  response = _ref12.response;\n              return receiveSearchFailure(windowId, companionWindowId, searchId, error);\n            },\n            success: function success(_ref13) {\n              var json = _ref13.json,\n                  response = _ref13.response;\n              return receiveSearch(windowId, companionWindowId, searchId, json);\n            }\n          };\n          _context6.next = 4;\n          return call(fetchIiifResource, searchId, {}, callbacks);\n\n        case 4:\n          dispatch = _context6.sent;\n          _context6.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n/** @private */\n\nexport function fetchAnnotation(_ref14) {\n  var targetId, annotationId, callbacks, dispatch;\n  return _regeneratorRuntime.wrap(function fetchAnnotation$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          targetId = _ref14.targetId, annotationId = _ref14.annotationId;\n          callbacks = {\n            failure: function failure(_ref15) {\n              var error = _ref15.error,\n                  json = _ref15.json,\n                  response = _ref15.response;\n              return receiveAnnotationFailure(targetId, annotationId, error);\n            },\n            success: function success(_ref16) {\n              var json = _ref16.json,\n                  response = _ref16.response;\n              return receiveAnnotation(targetId, annotationId, json);\n            }\n          };\n          _context7.next = 4;\n          return call(fetchIiifResource, annotationId, {}, callbacks);\n\n        case 4:\n          dispatch = _context7.sent;\n          _context7.next = 7;\n          return put(dispatch);\n\n        case 7:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n/** */\n\nexport function fetchResourceManifest(_ref17) {\n  var manifestId, manifestJson, manifests;\n  return _regeneratorRuntime.wrap(function fetchResourceManifest$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          manifestId = _ref17.manifestId, manifestJson = _ref17.manifestJson;\n\n          if (!manifestJson) {\n            _context8.next = 5;\n            break;\n          }\n\n          _context8.next = 4;\n          return put(receiveManifest(manifestId, manifestJson));\n\n        case 4:\n          return _context8.abrupt(\"return\");\n\n        case 5:\n          if (manifestId) {\n            _context8.next = 7;\n            break;\n          }\n\n          return _context8.abrupt(\"return\");\n\n        case 7:\n          _context8.next = 9;\n          return select(getManifests) || {};\n\n        case 9:\n          manifests = _context8.sent;\n\n          if (manifests[manifestId]) {\n            _context8.next = 12;\n            break;\n          }\n\n          return _context8.delegateYield(fetchManifest({\n            manifestId: manifestId\n          }), \"t0\", 12);\n\n        case 12:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}\n/** */\n\nexport function fetchManifests() {\n  var manifests,\n      i,\n      manifestId,\n      _args9 = arguments;\n  return _regeneratorRuntime.wrap(function fetchManifests$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return select(getManifests);\n\n        case 2:\n          manifests = _context9.sent;\n          i = 0;\n\n        case 4:\n          if (!(i < _args9.length)) {\n            _context9.next = 12;\n            break;\n          }\n\n          manifestId = i < 0 || _args9.length <= i ? undefined : _args9[i];\n\n          if (manifests[manifestId]) {\n            _context9.next = 9;\n            break;\n          }\n\n          _context9.next = 9;\n          return call(fetchManifest, {\n            manifestId: manifestId\n          });\n\n        case 9:\n          i += 1;\n          _context9.next = 4;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9);\n}\n/** */\n\nexport default function iiifSaga() {\n  return _regeneratorRuntime.wrap(function iiifSaga$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return all([takeEvery(ActionTypes.REQUEST_MANIFEST, fetchManifest), takeEvery(ActionTypes.REQUEST_INFO_RESPONSE, fetchInfoResponse), takeEvery(ActionTypes.REQUEST_SEARCH, fetchSearchResponse), takeEvery(ActionTypes.REQUEST_ANNOTATION, fetchAnnotation), takeEvery(ActionTypes.ADD_RESOURCE, fetchResourceManifest)]);\n\n        case 2:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchWindowManifest),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(setCanvasOnNewSequence),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(setCollectionPath),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(fetchCollectionManifests),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(setWindowStartingCanvas),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(setWindowDefaultSearchQuery),\n    _marked7 = /*#__PURE__*/_regeneratorRuntime.mark(setCurrentAnnotationsOnCurrentCanvas),\n    _marked8 = /*#__PURE__*/_regeneratorRuntime.mark(panToFocusedWindow),\n    _marked9 = /*#__PURE__*/_regeneratorRuntime.mark(updateVisibleCanvases),\n    _marked10 = /*#__PURE__*/_regeneratorRuntime.mark(setCanvasOfFirstSearchResult),\n    _marked11 = /*#__PURE__*/_regeneratorRuntime.mark(setCanvasforSelectedAnnotation),\n    _marked12 = /*#__PURE__*/_regeneratorRuntime.mark(fetchInfoResponses),\n    _marked13 = /*#__PURE__*/_regeneratorRuntime.mark(determineAndShowCollectionDialog),\n    _marked14 = /*#__PURE__*/_regeneratorRuntime.mark(windowsSaga);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, call, put, select, takeEvery } from 'redux-saga/effects';\nimport ActionTypes from '../actions/action-types';\nimport MiradorManifest from '../../lib/MiradorManifest';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { setContentSearchCurrentAnnotation, selectAnnotation, setWorkspaceViewportPosition, updateWindow, setCanvas, fetchSearch, receiveManifest, fetchInfoResponse, showCollectionDialog } from '../actions';\nimport { getSearchForWindow, getSearchAnnotationsForCompanionWindow, getCanvasGrouping, getWindow, getManifestoInstance, getCompanionWindowIdsForPosition, getManifestSearchService, getCanvasForAnnotation, getSelectedContentSearchAnnotationIds, getSortedSearchAnnotationsForCompanionWindow, getVisibleCanvasIds, getWorkspace, getElasticLayout, getCanvases, selectInfoResponses, getWindowConfig } from '../selectors';\nimport { fetchManifests } from './iiif';\n/** */\n\nexport function fetchWindowManifest(action) {\n  var _ref, collectionPath, id, manifestId;\n\n  return _regeneratorRuntime.wrap(function fetchWindowManifest$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _ref = action.payload || action.window, collectionPath = _ref.collectionPath, id = _ref.id, manifestId = _ref.manifestId;\n\n          if (manifestId) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 3:\n          if (!action.manifest) {\n            _context.next = 8;\n            break;\n          }\n\n          _context.next = 6;\n          return put(receiveManifest(manifestId, action.manifest));\n\n        case 6:\n          _context.next = 10;\n          break;\n\n        case 8:\n          _context.next = 10;\n          return call.apply(void 0, [fetchManifests, manifestId].concat(_toConsumableArray(collectionPath || [])));\n\n        case 10:\n          _context.next = 12;\n          return call(setWindowStartingCanvas, action);\n\n        case 12:\n          _context.next = 14;\n          return call(setWindowDefaultSearchQuery, action);\n\n        case 14:\n          if (collectionPath) {\n            _context.next = 17;\n            break;\n          }\n\n          _context.next = 17;\n          return call(setCollectionPath, {\n            manifestId: manifestId,\n            windowId: action.id || action.window.id\n          });\n\n        case 17:\n          _context.next = 19;\n          return call(determineAndShowCollectionDialog, manifestId, id);\n\n        case 19:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/** */\n\nexport function setCanvasOnNewSequence(action) {\n  var windowId, canvases, thunk;\n  return _regeneratorRuntime.wrap(function setCanvasOnNewSequence$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          windowId = action.id;\n\n          if (!(!action || !action.payload || !action.payload.sequenceId)) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 3:\n          _context2.next = 5;\n          return select(getCanvases, {\n            windowId: windowId\n          });\n\n        case 5:\n          canvases = _context2.sent;\n\n          if (!(!canvases || !canvases[0] || !canvases[0].id)) {\n            _context2.next = 8;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 8:\n          _context2.next = 10;\n          return call(setCanvas, windowId, canvases[0].id);\n\n        case 10:\n          thunk = _context2.sent;\n          _context2.next = 13;\n          return put(thunk);\n\n        case 13:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport function setCollectionPath(_ref2) {\n  var manifestId, windowId, manifestoInstance, partOfs, partOf;\n  return _regeneratorRuntime.wrap(function setCollectionPath$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          manifestId = _ref2.manifestId, windowId = _ref2.windowId;\n          _context3.next = 3;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 3:\n          manifestoInstance = _context3.sent;\n\n          if (!manifestoInstance) {\n            _context3.next = 10;\n            break;\n          }\n\n          partOfs = manifestoInstance.getProperty('partOf');\n          partOf = Array.isArray(partOfs) ? partOfs[0] : partOfs;\n\n          if (!(partOf && partOf.id)) {\n            _context3.next = 10;\n            break;\n          }\n\n          _context3.next = 10;\n          return put(updateWindow(windowId, {\n            collectionPath: [partOf.id]\n          }));\n\n        case 10:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport function fetchCollectionManifests(action) {\n  var collectionPath;\n  return _regeneratorRuntime.wrap(function fetchCollectionManifests$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          collectionPath = action.payload.collectionPath;\n\n          if (collectionPath) {\n            _context4.next = 3;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 3:\n          _context4.next = 5;\n          return call.apply(void 0, [fetchManifests].concat(_toConsumableArray(collectionPath)));\n\n        case 5:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** @private */\n\nexport function setWindowStartingCanvas(action) {\n  var _ref3, canvasId, canvasIndex, manifestId, windowId, thunk, manifestoInstance, miradorManifest, startCanvas, _thunk;\n\n  return _regeneratorRuntime.wrap(function setWindowStartingCanvas$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref3 = action.payload || action.window, canvasId = _ref3.canvasId, canvasIndex = _ref3.canvasIndex, manifestId = _ref3.manifestId;\n          windowId = action.id || action.window.id;\n\n          if (!canvasId) {\n            _context5.next = 10;\n            break;\n          }\n\n          _context5.next = 5;\n          return call(setCanvas, windowId, canvasId, null, {\n            preserveViewport: !!action.payload\n          });\n\n        case 5:\n          thunk = _context5.sent;\n          _context5.next = 8;\n          return put(thunk);\n\n        case 8:\n          _context5.next = 22;\n          break;\n\n        case 10:\n          _context5.next = 12;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 12:\n          manifestoInstance = _context5.sent;\n\n          if (!manifestoInstance) {\n            _context5.next = 22;\n            break;\n          }\n\n          // set the startCanvas\n          miradorManifest = new MiradorManifest(manifestoInstance);\n          startCanvas = miradorManifest.startCanvas || miradorManifest.canvasAt(canvasIndex || 0) || miradorManifest.canvasAt(0);\n\n          if (!startCanvas) {\n            _context5.next = 22;\n            break;\n          }\n\n          _context5.next = 19;\n          return call(setCanvas, windowId, startCanvas.id);\n\n        case 19:\n          _thunk = _context5.sent;\n          _context5.next = 22;\n          return put(_thunk);\n\n        case 22:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** @private */\n\nexport function setWindowDefaultSearchQuery(action) {\n  var _action$window, windowId, defaultSearchQuery, searchService, companionWindowIds, companionWindowId, searchId;\n\n  return _regeneratorRuntime.wrap(function setWindowDefaultSearchQuery$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          if (!(!action.window || !action.window.defaultSearchQuery)) {\n            _context6.next = 2;\n            break;\n          }\n\n          return _context6.abrupt(\"return\");\n\n        case 2:\n          _action$window = action.window, windowId = _action$window.id, defaultSearchQuery = _action$window.defaultSearchQuery;\n          _context6.next = 5;\n          return select(getManifestSearchService, {\n            windowId: windowId\n          });\n\n        case 5:\n          searchService = _context6.sent;\n          _context6.next = 8;\n          return select(getCompanionWindowIdsForPosition, {\n            position: 'left',\n            windowId: windowId\n          });\n\n        case 8:\n          companionWindowIds = _context6.sent;\n          companionWindowId = companionWindowIds[0];\n\n          if (!(searchService && companionWindowId)) {\n            _context6.next = 14;\n            break;\n          }\n\n          searchId = searchService && \"\".concat(searchService.id, \"?q=\").concat(defaultSearchQuery);\n          _context6.next = 14;\n          return put(fetchSearch(windowId, companionWindowId, searchId, defaultSearchQuery));\n\n        case 14:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n/** @private */\n\nexport function getAnnotationsBySearch(state, _ref4) {\n  var canvasIds = _ref4.canvasIds,\n      companionWindowIds = _ref4.companionWindowIds,\n      windowId = _ref4.windowId;\n  var annotationBySearch = companionWindowIds.reduce(function (accumulator, companionWindowId) {\n    var annotations = getSearchAnnotationsForCompanionWindow(state, {\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    });\n    var resourceAnnotations = annotations.resources;\n    var hitAnnotation = resourceAnnotations.find(function (r) {\n      return canvasIds.includes(r.targetId);\n    });\n    if (hitAnnotation) accumulator[companionWindowId] = [hitAnnotation.id];\n    return accumulator;\n  }, {});\n  return annotationBySearch;\n}\n/** @private */\n\nexport function setCurrentAnnotationsOnCurrentCanvas(_ref5) {\n  var annotationId, windowId, visibleCanvases, searches, companionWindowIds, annotationBySearch;\n  return _regeneratorRuntime.wrap(function setCurrentAnnotationsOnCurrentCanvas$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          annotationId = _ref5.annotationId, windowId = _ref5.windowId, visibleCanvases = _ref5.visibleCanvases;\n          _context7.next = 3;\n          return select(getSearchForWindow, {\n            windowId: windowId\n          });\n\n        case 3:\n          searches = _context7.sent;\n          companionWindowIds = Object.keys(searches || {});\n\n          if (!(companionWindowIds.length === 0)) {\n            _context7.next = 7;\n            break;\n          }\n\n          return _context7.abrupt(\"return\");\n\n        case 7:\n          _context7.next = 9;\n          return select(getAnnotationsBySearch, {\n            canvasIds: visibleCanvases,\n            companionWindowIds: companionWindowIds,\n            windowId: windowId\n          });\n\n        case 9:\n          annotationBySearch = _context7.sent;\n          _context7.next = 12;\n          return all(Object.keys(annotationBySearch).map(function (companionWindowId) {\n            return put(setContentSearchCurrentAnnotation(windowId, companionWindowId, annotationBySearch[companionWindowId]));\n          }));\n\n        case 12:\n          if (!(Object.values(annotationBySearch).length > 0)) {\n            _context7.next = 15;\n            break;\n          }\n\n          _context7.next = 15;\n          return put(selectAnnotation(windowId, Object.values(annotationBySearch)[0][0]));\n\n        case 15:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n/** @private */\n\nexport function panToFocusedWindow(_ref6) {\n  var pan, windowId, elasticLayout, _ref7, x, y, width, height, _yield$select, _yield$select$viewpor, viewWidth, viewHeight;\n\n  return _regeneratorRuntime.wrap(function panToFocusedWindow$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          pan = _ref6.pan, windowId = _ref6.windowId;\n\n          if (pan) {\n            _context8.next = 3;\n            break;\n          }\n\n          return _context8.abrupt(\"return\");\n\n        case 3:\n          _context8.next = 5;\n          return select(getElasticLayout);\n\n        case 5:\n          elasticLayout = _context8.sent;\n          _ref7 = elasticLayout[windowId] || {}, x = _ref7.x, y = _ref7.y, width = _ref7.width, height = _ref7.height;\n          _context8.next = 9;\n          return select(getWorkspace);\n\n        case 9:\n          _yield$select = _context8.sent;\n          _yield$select$viewpor = _yield$select.viewportPosition;\n          viewWidth = _yield$select$viewpor.width;\n          viewHeight = _yield$select$viewpor.height;\n          _context8.next = 15;\n          return put(setWorkspaceViewportPosition({\n            x: x + width / 2 - viewWidth / 2,\n            y: y + height / 2 - viewHeight / 2\n          }));\n\n        case 15:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}\n/** @private */\n\nexport function updateVisibleCanvases(_ref8) {\n  var windowId, _yield$select2, canvasId, visibleCanvases;\n\n  return _regeneratorRuntime.wrap(function updateVisibleCanvases$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          windowId = _ref8.windowId;\n          _context9.next = 3;\n          return select(getWindow, {\n            windowId: windowId\n          });\n\n        case 3:\n          _yield$select2 = _context9.sent;\n          canvasId = _yield$select2.canvasId;\n          _context9.next = 7;\n          return select(getCanvasGrouping, {\n            canvasId: canvasId,\n            windowId: windowId\n          });\n\n        case 7:\n          visibleCanvases = _context9.sent;\n          _context9.next = 10;\n          return put(updateWindow(windowId, {\n            visibleCanvases: (visibleCanvases || []).map(function (c) {\n              return c.id;\n            })\n          }));\n\n        case 10:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9);\n}\n/** @private */\n\nexport function setCanvasOfFirstSearchResult(_ref9) {\n  var companionWindowId, windowId, _yield$select3, switchCanvasOnSearch, selectedIds, annotations;\n\n  return _regeneratorRuntime.wrap(function setCanvasOfFirstSearchResult$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          companionWindowId = _ref9.companionWindowId, windowId = _ref9.windowId;\n          _context10.next = 3;\n          return select(getWindowConfig, {\n            windowId: windowId\n          });\n\n        case 3:\n          _yield$select3 = _context10.sent;\n          switchCanvasOnSearch = _yield$select3.switchCanvasOnSearch;\n\n          if (switchCanvasOnSearch) {\n            _context10.next = 7;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 7:\n          _context10.next = 9;\n          return select(getSelectedContentSearchAnnotationIds, {\n            companionWindowId: companionWindowId,\n            windowId: windowId\n          });\n\n        case 9:\n          selectedIds = _context10.sent;\n\n          if (!(selectedIds.length !== 0)) {\n            _context10.next = 12;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 12:\n          _context10.next = 14;\n          return select(getSortedSearchAnnotationsForCompanionWindow, {\n            companionWindowId: companionWindowId,\n            windowId: windowId\n          });\n\n        case 14:\n          annotations = _context10.sent;\n\n          if (!(!annotations || annotations.length === 0)) {\n            _context10.next = 17;\n            break;\n          }\n\n          return _context10.abrupt(\"return\");\n\n        case 17:\n          _context10.next = 19;\n          return put(selectAnnotation(windowId, annotations[0].id));\n\n        case 19:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}\n/** @private */\n\nexport function setCanvasforSelectedAnnotation(_ref10) {\n  var annotationId, windowId, canvasIds, canvas, thunk;\n  return _regeneratorRuntime.wrap(function setCanvasforSelectedAnnotation$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          annotationId = _ref10.annotationId, windowId = _ref10.windowId;\n          _context11.next = 3;\n          return select(getVisibleCanvasIds, {\n            windowId: windowId\n          });\n\n        case 3:\n          canvasIds = _context11.sent;\n          _context11.next = 6;\n          return select(getCanvasForAnnotation, {\n            annotationId: annotationId,\n            windowId: windowId\n          });\n\n        case 6:\n          canvas = _context11.sent;\n\n          if (!(!canvas || canvasIds.includes(canvas.id))) {\n            _context11.next = 9;\n            break;\n          }\n\n          return _context11.abrupt(\"return\");\n\n        case 9:\n          _context11.next = 11;\n          return call(setCanvas, windowId, canvas.id);\n\n        case 11:\n          thunk = _context11.sent;\n          _context11.next = 14;\n          return put(thunk);\n\n        case 14:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11);\n}\n/** Fetch info responses for the visible canvases */\n\nexport function fetchInfoResponses(_ref11) {\n  var visibleCanvasIds, windowId, canvases, infoResponses, visibleCanvases;\n  return _regeneratorRuntime.wrap(function fetchInfoResponses$(_context12) {\n    while (1) {\n      switch (_context12.prev = _context12.next) {\n        case 0:\n          visibleCanvasIds = _ref11.visibleCanvases, windowId = _ref11.windowId;\n          _context12.next = 3;\n          return select(getCanvases, {\n            windowId: windowId\n          });\n\n        case 3:\n          canvases = _context12.sent;\n          _context12.next = 6;\n          return select(selectInfoResponses);\n\n        case 6:\n          infoResponses = _context12.sent;\n          visibleCanvases = (canvases || []).filter(function (c) {\n            return visibleCanvasIds.includes(c.id);\n          });\n          _context12.next = 10;\n          return all(visibleCanvases.map(function (canvas) {\n            var miradorCanvas = new MiradorCanvas(canvas);\n            return all(miradorCanvas.iiifImageResources.map(function (imageResource) {\n              return !infoResponses[imageResource.getServices()[0].id] && put(fetchInfoResponse({\n                imageResource: imageResource,\n                windowId: windowId\n              }));\n            }).filter(Boolean));\n          }));\n\n        case 10:\n        case \"end\":\n          return _context12.stop();\n      }\n    }\n  }, _marked12);\n}\n/** */\n\nexport function determineAndShowCollectionDialog(manifestId, windowId) {\n  var manifestoInstance;\n  return _regeneratorRuntime.wrap(function determineAndShowCollectionDialog$(_context13) {\n    while (1) {\n      switch (_context13.prev = _context13.next) {\n        case 0:\n          _context13.next = 2;\n          return select(getManifestoInstance, {\n            manifestId: manifestId\n          });\n\n        case 2:\n          manifestoInstance = _context13.sent;\n\n          if (!(manifestoInstance && manifestoInstance.isCollection())) {\n            _context13.next = 6;\n            break;\n          }\n\n          _context13.next = 6;\n          return put(showCollectionDialog(manifestId, [], windowId));\n\n        case 6:\n        case \"end\":\n          return _context13.stop();\n      }\n    }\n  }, _marked13);\n}\n/** */\n\nexport default function windowsSaga() {\n  return _regeneratorRuntime.wrap(function windowsSaga$(_context14) {\n    while (1) {\n      switch (_context14.prev = _context14.next) {\n        case 0:\n          _context14.next = 2;\n          return all([takeEvery(ActionTypes.ADD_WINDOW, fetchWindowManifest), takeEvery(ActionTypes.UPDATE_WINDOW, fetchWindowManifest), takeEvery(ActionTypes.UPDATE_WINDOW, setCanvasOnNewSequence), takeEvery(ActionTypes.SET_CANVAS, setCurrentAnnotationsOnCurrentCanvas), takeEvery(ActionTypes.SET_CANVAS, fetchInfoResponses), takeEvery(ActionTypes.UPDATE_COMPANION_WINDOW, fetchCollectionManifests), takeEvery(ActionTypes.SET_WINDOW_VIEW_TYPE, updateVisibleCanvases), takeEvery(ActionTypes.RECEIVE_SEARCH, setCanvasOfFirstSearchResult), takeEvery(ActionTypes.SELECT_ANNOTATION, setCanvasforSelectedAnnotation), takeEvery(ActionTypes.FOCUS_WINDOW, panToFocusedWindow)]);\n\n        case 2:\n        case \"end\":\n          return _context14.stop();\n      }\n    }\n  }, _marked14);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(importState),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(importConfig),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(fetchCollectionManifests),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(appSaga);\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, call, put, takeEvery } from 'redux-saga/effects';\nimport { v4 as uuid } from 'uuid';\nimport { fetchManifests } from './iiif';\nimport { fetchWindowManifest } from './windows';\nimport { addWindow } from '../actions';\nimport ActionTypes from '../actions/action-types';\n/** */\n\nexport function importState(action) {\n  return _regeneratorRuntime.wrap(function importState$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return all([].concat(_toConsumableArray(Object.entries(action.state.windows || {}).map(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 2),\n                _ = _ref2[0],\n                window = _ref2[1];\n\n            return call(fetchWindowManifest, {\n              id: window.id,\n              payload: window\n            });\n          })), _toConsumableArray(Object.entries(action.state.manifests || {}).filter(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 2),\n                _ = _ref4[0],\n                manifest = _ref4[1];\n\n            return !manifest.json;\n          }).map(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 2),\n                _ = _ref6[0],\n                manifest = _ref6[1];\n\n            return call(fetchManifests, manifest.id);\n          }))));\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/** Add windows from the imported config */\n\nexport function importConfig(_ref7) {\n  var _ref7$config, thumbnailNavigation, windows, thunks;\n\n  return _regeneratorRuntime.wrap(function importConfig$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref7$config = _ref7.config, thumbnailNavigation = _ref7$config.thumbnailNavigation, windows = _ref7$config.windows;\n\n          if (!(!windows || windows.length === 0)) {\n            _context2.next = 3;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 3:\n          _context2.next = 5;\n          return all(windows.map(function (miradorWindow) {\n            var windowId = \"window-\".concat(uuid());\n            var manifestId = miradorWindow.manifestId || miradorWindow.loadedManifest;\n            return call(addWindow, _objectSpread({\n              // these are default values ...\n              id: windowId,\n              manifestId: manifestId,\n              thumbnailNavigationPosition: thumbnailNavigation && thumbnailNavigation.defaultPosition\n            }, miradorWindow));\n          }));\n\n        case 5:\n          thunks = _context2.sent;\n          _context2.next = 8;\n          return all(thunks.map(function (thunk) {\n            return put(thunk);\n          }));\n\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport function fetchCollectionManifests(action) {\n  var collectionPath, manifestId;\n  return _regeneratorRuntime.wrap(function fetchCollectionManifests$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          collectionPath = action.collectionPath, manifestId = action.manifestId;\n          _context3.next = 3;\n          return call.apply(void 0, [fetchManifests, manifestId].concat(_toConsumableArray(collectionPath)));\n\n        case 3:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport default function appSaga() {\n  return _regeneratorRuntime.wrap(function appSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return all([takeEvery(ActionTypes.IMPORT_MIRADOR_STATE, importState), takeEvery(ActionTypes.IMPORT_CONFIG, importConfig), takeEvery(ActionTypes.SHOW_COLLECTION_DIALOG, fetchCollectionManifests)]);\n\n        case 2:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(fetchCanvasAnnotations),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(fetchAnnotations),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(appSaga);\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { all, put, select, takeEvery } from 'redux-saga/effects';\nimport { requestCanvasAnnotations, receiveAnnotation, requestAnnotation } from '../actions';\nimport { getAnnotations, getCanvas } from '../selectors';\nimport ActionTypes from '../actions/action-types';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\n/** Fetch annotations for a given canvas */\n\nexport function fetchCanvasAnnotations(_ref) {\n  var canvasId, windowId, canvas, annotations, miradorCanvas;\n  return _regeneratorRuntime.wrap(function fetchCanvasAnnotations$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          canvasId = _ref.canvasId, windowId = _ref.windowId;\n          _context.next = 3;\n          return select(getCanvas, {\n            canvasId: canvasId,\n            windowId: windowId\n          });\n\n        case 3:\n          canvas = _context.sent;\n          _context.next = 6;\n          return select(getAnnotations);\n\n        case 6:\n          annotations = _context.sent;\n          miradorCanvas = new MiradorCanvas(canvas);\n          _context.next = 10;\n          return all([].concat(_toConsumableArray(miradorCanvas.annotationListUris.filter(function (uri) {\n            return !(annotations[canvas.id] && annotations[canvas.id][uri]);\n          }).map(function (uri) {\n            return put(requestAnnotation(canvas.id, uri));\n          })), _toConsumableArray(miradorCanvas.canvasAnnotationPages.filter(function (annotation) {\n            return !(annotations[canvas.id] && annotations[canvas.id][annotation.id]);\n          }).map(function (annotation) {\n            // If there are no items, try to retrieve the referenced resource.\n            // otherwise the resource should be embedded and just add to the store.\n            if (!annotation.items) {\n              return put(requestAnnotation(canvas.id, annotation.id));\n            }\n\n            return put(receiveAnnotation(canvas.id, annotation.id, annotation));\n          }))));\n\n        case 10:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/**\n * Fetch annotations for the visible canvases.\n */\n\nexport function fetchAnnotations(_ref2) {\n  var _ref2$visibleCanvases, visibleCanvases, windowId;\n\n  return _regeneratorRuntime.wrap(function fetchAnnotations$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref2$visibleCanvases = _ref2.visibleCanvases, visibleCanvases = _ref2$visibleCanvases === void 0 ? [] : _ref2$visibleCanvases, windowId = _ref2.windowId;\n          _context2.next = 3;\n          return all(visibleCanvases.map(function (canvasId) {\n            return put(requestCanvasAnnotations(windowId, canvasId));\n          }));\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** */\n\nexport default function appSaga() {\n  return _regeneratorRuntime.wrap(function appSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return all([takeEvery(ActionTypes.REQUEST_CANVAS_ANNOTATIONS, fetchCanvasAnnotations), takeEvery(ActionTypes.SET_CANVAS, fetchAnnotations)]);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(refetchInfoResponsesOnLogout),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(refetchInfoResponses),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(doAuthWorkflow),\n    _marked4 = /*#__PURE__*/_regeneratorRuntime.mark(rerequestOnAccessTokenFailure),\n    _marked5 = /*#__PURE__*/_regeneratorRuntime.mark(invalidateInvalidAuth),\n    _marked6 = /*#__PURE__*/_regeneratorRuntime.mark(authSaga);\n\nimport { all, call, put, select, takeEvery, delay } from 'redux-saga/effects';\nimport { Utils } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport ActionTypes from '../actions/action-types';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { addAuthenticationRequest, resolveAuthenticationRequest, requestAccessToken, resetAuthenticationState } from '../actions';\nimport { selectInfoResponses, getVisibleCanvases, getWindows, getConfig, getAuth, getAccessTokens } from '../selectors';\nimport { fetchInfoResponse } from './iiif';\n/** */\n\nexport function refetchInfoResponsesOnLogout(_ref) {\n  var tokenServiceId;\n  return _regeneratorRuntime.wrap(function refetchInfoResponsesOnLogout$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          tokenServiceId = _ref.tokenServiceId;\n          _context.next = 3;\n          return delay(2000);\n\n        case 3:\n          _context.next = 5;\n          return call(refetchInfoResponses, {\n            serviceId: tokenServiceId\n          });\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n/**\n * Figure out what info responses could have used the access token service and:\n *   - refetch, if they are currently visible\n *   - throw them out (and lazy re-fetch) otherwise\n */\n\nexport function refetchInfoResponses(_ref2) {\n  var serviceId, windows, canvases, visibleImageApiIds, infoResponses, haveThisTokenService, obsoleteInfoResponses;\n  return _regeneratorRuntime.wrap(function refetchInfoResponses$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          serviceId = _ref2.serviceId;\n          _context2.next = 3;\n          return select(getWindows);\n\n        case 3:\n          windows = _context2.sent;\n          _context2.next = 6;\n          return all(Object.keys(windows).map(function (windowId) {\n            return select(getVisibleCanvases, {\n              windowId: windowId\n            });\n          }));\n\n        case 6:\n          canvases = _context2.sent;\n          visibleImageApiIds = flatten(flatten(canvases).map(function (canvas) {\n            var miradorCanvas = new MiradorCanvas(canvas);\n            return miradorCanvas.imageServiceIds;\n          }));\n          _context2.next = 10;\n          return select(selectInfoResponses);\n\n        case 10:\n          infoResponses = _context2.sent;\n\n          /** */\n          haveThisTokenService = function haveThisTokenService(infoResponse) {\n            var services = Utils.getServices(infoResponse);\n            return services.some(function (e) {\n              var infoTokenService = Utils.getService(e, 'http://iiif.io/api/auth/1/token') || Utils.getService(e, 'http://iiif.io/api/auth/0/token');\n              return infoTokenService && infoTokenService.id === serviceId;\n            });\n          };\n\n          obsoleteInfoResponses = Object.values(infoResponses).filter(function (i) {\n            return i.json && haveThisTokenService(i.json);\n          });\n          _context2.next = 15;\n          return all(obsoleteInfoResponses.map(function (_ref3) {\n            var infoId = _ref3.id;\n\n            if (visibleImageApiIds.includes(infoId)) {\n              return call(fetchInfoResponse, {\n                infoId: infoId\n              });\n            }\n\n            return put({\n              infoId: infoId,\n              type: ActionTypes.REMOVE_INFO_RESPONSE\n            });\n          }));\n\n        case 15:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n/** try to start any non-interactive auth flows */\n\nexport function doAuthWorkflow(_ref4) {\n  var infoJson, windowId, auths, _yield$select, _yield$select$auth, _yield$select$auth$se, serviceProfiles, nonInteractiveAuthFlowProfiles, authService, profileConfig, tokenService;\n\n  return _regeneratorRuntime.wrap(function doAuthWorkflow$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          infoJson = _ref4.infoJson, windowId = _ref4.windowId;\n          _context3.next = 3;\n          return select(getAuth);\n\n        case 3:\n          auths = _context3.sent;\n          _context3.next = 6;\n          return select(getConfig);\n\n        case 6:\n          _yield$select = _context3.sent;\n          _yield$select$auth = _yield$select.auth;\n          _yield$select$auth = _yield$select$auth === void 0 ? {} : _yield$select$auth;\n          _yield$select$auth$se = _yield$select$auth.serviceProfiles, serviceProfiles = _yield$select$auth$se === void 0 ? [] : _yield$select$auth$se;\n          nonInteractiveAuthFlowProfiles = serviceProfiles.filter(function (p) {\n            return p.external || p.kiosk;\n          }); // try to get an untried, non-interactive auth service\n\n          authService = Utils.getServices(infoJson).filter(function (s) {\n            return !auths[s.id];\n          }).find(function (e) {\n            return nonInteractiveAuthFlowProfiles.some(function (p) {\n              return p.profile === e.getProfile();\n            });\n          });\n\n          if (authService) {\n            _context3.next = 14;\n            break;\n          }\n\n          return _context3.abrupt(\"return\");\n\n        case 14:\n          profileConfig = nonInteractiveAuthFlowProfiles.find(function (p) {\n            return p.profile === authService.getProfile();\n          });\n\n          if (!profileConfig.kiosk) {\n            _context3.next = 20;\n            break;\n          }\n\n          _context3.next = 18;\n          return put(addAuthenticationRequest(windowId, authService.id, authService.getProfile()));\n\n        case 18:\n          _context3.next = 28;\n          break;\n\n        case 20:\n          if (!profileConfig.external) {\n            _context3.next = 28;\n            break;\n          }\n\n          tokenService = Utils.getService(authService, 'http://iiif.io/api/auth/1/token') || Utils.getService(authService, 'http://iiif.io/api/auth/0/token');\n\n          if (tokenService) {\n            _context3.next = 24;\n            break;\n          }\n\n          return _context3.abrupt(\"return\");\n\n        case 24:\n          _context3.next = 26;\n          return put(resolveAuthenticationRequest(authService.id, tokenService.id));\n\n        case 26:\n          _context3.next = 28;\n          return put(requestAccessToken(tokenService.id, authService.id));\n\n        case 28:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n/** */\n\nexport function rerequestOnAccessTokenFailure(_ref5) {\n  var infoJson, windowId, tokenServiceId, authService, accessTokenServices, service;\n  return _regeneratorRuntime.wrap(function rerequestOnAccessTokenFailure$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          infoJson = _ref5.infoJson, windowId = _ref5.windowId, tokenServiceId = _ref5.tokenServiceId;\n\n          if (tokenServiceId) {\n            _context4.next = 3;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 3:\n          // make sure we have an auth service to try\n          authService = Utils.getServices(infoJson).find(function (service) {\n            var tokenService = Utils.getService(service, 'http://iiif.io/api/auth/1/token') || Utils.getService(service, 'http://iiif.io/api/auth/0/token');\n            return tokenService && tokenService.id === tokenServiceId;\n          });\n\n          if (authService) {\n            _context4.next = 6;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 6:\n          _context4.next = 8;\n          return select(getAccessTokens);\n\n        case 8:\n          accessTokenServices = _context4.sent;\n          service = accessTokenServices[tokenServiceId];\n\n          if (service && service.success) {\n            _context4.next = 12;\n            break;\n          }\n\n          return _context4.abrupt(\"return\");\n\n        case 12:\n          _context4.next = 14;\n          return put(requestAccessToken(tokenServiceId, authService.id));\n\n        case 14:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n/** */\n\nexport function invalidateInvalidAuth(_ref6) {\n  var serviceId, accessTokenServices, authServices, accessTokenService, authService;\n  return _regeneratorRuntime.wrap(function invalidateInvalidAuth$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          serviceId = _ref6.serviceId;\n          _context5.next = 3;\n          return select(getAccessTokens);\n\n        case 3:\n          accessTokenServices = _context5.sent;\n          _context5.next = 6;\n          return select(getAuth);\n\n        case 6:\n          authServices = _context5.sent;\n          accessTokenService = accessTokenServices[serviceId];\n\n          if (accessTokenService) {\n            _context5.next = 10;\n            break;\n          }\n\n          return _context5.abrupt(\"return\");\n\n        case 10:\n          authService = authServices[accessTokenService.authId];\n\n          if (authService) {\n            _context5.next = 13;\n            break;\n          }\n\n          return _context5.abrupt(\"return\");\n\n        case 13:\n          if (!accessTokenService.success) {\n            _context5.next = 18;\n            break;\n          }\n\n          _context5.next = 16;\n          return put(resetAuthenticationState({\n            authServiceId: authService.id,\n            tokenServiceId: accessTokenService.id\n          }));\n\n        case 16:\n          _context5.next = 20;\n          break;\n\n        case 18:\n          _context5.next = 20;\n          return put(resolveAuthenticationRequest(authService.id, accessTokenService.id, {\n            ok: false\n          }));\n\n        case 20:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n/** */\n\nexport default function authSaga() {\n  return _regeneratorRuntime.wrap(function authSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return all([takeEvery(ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE, rerequestOnAccessTokenFailure), takeEvery(ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE, invalidateInvalidAuth), takeEvery(ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE, doAuthWorkflow), takeEvery(ActionTypes.RECEIVE_ACCESS_TOKEN, refetchInfoResponses), takeEvery(ActionTypes.RESET_AUTHENTICATION_STATE, refetchInfoResponsesOnLogout)]);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(launchSaga);\n\nimport { all, call, spawn } from 'redux-saga/effects';\nimport appSaga from './app';\nimport iiifSaga from './iiif';\nimport windowSaga from './windows';\nimport annotationsSaga from './annotations';\nimport authSaga from './auth';\n/** */\n\nfunction launchSaga(saga) {\n  return _regeneratorRuntime.wrap(function launchSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          if (!true) {\n            _context.next = 12;\n            break;\n          }\n\n          _context.prev = 1;\n          _context.next = 4;\n          return call(saga);\n\n        case 4:\n          return _context.abrupt(\"break\", 12);\n\n        case 7:\n          _context.prev = 7;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(_context.t0);\n\n        case 10:\n          _context.next = 0;\n          break;\n\n        case 12:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 7]]);\n}\n/** */\n\n\nfunction getRootSaga() {\n  var pluginSagas = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  return /*#__PURE__*/_regeneratorRuntime.mark(function rootSaga() {\n    var sagas;\n    return _regeneratorRuntime.wrap(function rootSaga$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            sagas = [annotationsSaga, appSaga, iiifSaga, windowSaga, authSaga].concat(_toConsumableArray(pluginSagas));\n            _context2.next = 3;\n            return all(sagas.map(function (saga) {\n              return spawn(launchSaga, saga);\n            }));\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, rootSaga);\n  });\n}\n\nexport default getRootSaga;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Topics for understanding\n// redux modules for nested stores\n// state normalisation\n// (normalizer library)\nimport thunkMiddleware from 'redux-thunk';\nimport createSagaMiddleware from 'redux-saga';\nimport { combineReducers, createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createRootReducer from './reducers/rootReducer';\nimport getRootSaga from './sagas';\nimport settings from '../config/settings';\n/**\n * Configure Store\n */\n\nfunction configureStore(pluginReducers) {\n  var pluginSagas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var miradorReducer = createRootReducer(pluginReducers);\n  var rootReducer = settings.state.slice ? combineReducers(_defineProperty({}, settings.state.slice, miradorReducer)) : miradorReducer; // create the saga middleware\n\n  var sagaMiddleware = createSagaMiddleware();\n  var store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunkMiddleware, sagaMiddleware))); // then run the saga\n\n  sagaMiddleware.run(getRootSaga(pluginSagas));\n  return store;\n}\n\nexport default configureStore;","import deepmerge from 'deepmerge';\nimport createStore from './createStore';\nimport { importConfig } from './actions/config';\nimport { filterValidPlugins, getConfigFromPlugins, getReducersFromPlugins, getSagasFromPlugins } from '../extend/pluginPreprocessing';\n/**\n * Configure Store\n */\n\nfunction createPluggableStore(config) {\n  var plugins = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var filteredPlugins = filterValidPlugins(plugins);\n  var store = createStore(getReducersFromPlugins(filteredPlugins), getSagasFromPlugins(filteredPlugins));\n  store.dispatch(importConfig(deepmerge(getConfigFromPlugins(filteredPlugins), config)));\n  return store;\n}\n\nexport default createPluggableStore;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport HotApp from '../components/App';\nimport { filterValidPlugins } from '../extend/pluginPreprocessing';\nimport createPluggableStore from '../state/createPluggableStore';\n/**\n * Default Mirador instantiation\n */\n\nvar MiradorViewer = /*#__PURE__*/function () {\n  /**\n   */\n  function MiradorViewer(config) {\n    var viewerConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, MiradorViewer);\n\n    this.plugins = filterValidPlugins(viewerConfig.plugins || []);\n    this.config = config;\n    this.store = viewerConfig.store || createPluggableStore(this.config, this.plugins);\n    config.id && ReactDOM.render(this.render(), document.getElementById(config.id));\n  }\n  /**\n   * Render the mirador viewer\n   */\n\n\n  _createClass(MiradorViewer, [{\n    key: \"render\",\n    value: function render() {\n      var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return /*#__PURE__*/React.createElement(Provider, {\n        store: this.store\n      }, /*#__PURE__*/React.createElement(HotApp, Object.assign({\n        plugins: this.plugins\n      }, props)));\n    }\n    /**\n     * Cleanup method to unmount Mirador from the dom\n     */\n\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      this.config.id && ReactDOM.unmountComponentAtNode(document.getElementById(this.config.id));\n    }\n  }]);\n\n  return MiradorViewer;\n}();\n\nexport default MiradorViewer;","import MiradorViewer from './lib/MiradorViewer';\n/**\n * Default Mirador instantiation\n */\n\nfunction viewer(config, pluginsOrStruct) {\n  var struct;\n\n  if (Array.isArray(pluginsOrStruct)) {\n    struct = {\n      plugins: pluginsOrStruct\n    };\n  } else {\n    struct = pluginsOrStruct;\n  }\n\n  return new MiradorViewer(config, struct);\n}\n\nexport default {\n  viewer: viewer\n};","import * as actions from './actions';\nimport * as reducers from './reducers';\nimport * as sagas from './sagas';\nimport * as selectors from './selectors';\nimport createStore from './createStore';\nexport default {\n  actions: actions,\n  createStore: createStore,\n  reducers: reducers,\n  sagas: sagas,\n  selectors: selectors\n};","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport init from './init';\nimport state from './state';\nexport default _objectSpread(_objectSpread({}, init), state);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport compact from 'lodash/compact';\nimport flatten from 'lodash/flatten';\nimport { v4 as uuid } from 'uuid';\n/** */\n\nvar AnnotationResource = /*#__PURE__*/function () {\n  /** */\n  function AnnotationResource() {\n    var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnnotationResource);\n\n    this.resource = resource;\n  }\n  /** */\n\n\n  _createClass(AnnotationResource, [{\n    key: \"isOnlyTag\",\n    value: function isOnlyTag() {\n      return this.motivations.length === 1 && this.motivations[0] === 'oa:tagging';\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      this._id = this._id || this.resource['@id'] || this.resources[0] && this.resources[0]['@id'] || uuid();\n      return this._id; // eslint-disable-line no-underscore-dangle\n    }\n    /** */\n\n  }, {\n    key: \"targetId\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return on.replace(/#?xywh=(.*)$/, '');\n\n        case 'object':\n          return on.full.replace(/#?xywh=(.*)$/, '');\n\n        default:\n          return null;\n      }\n    }\n    /**\n     * @return {[Array]}\n     */\n\n  }, {\n    key: \"motivations\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.motivation)));\n    }\n    /** */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.resource)));\n    }\n    /** */\n\n  }, {\n    key: \"on\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.on)));\n    }\n    /** */\n\n  }, {\n    key: \"tags\",\n    get: function get() {\n      if (this.isOnlyTag()) {\n        return this.resources.map(function (r) {\n          return r.chars;\n        });\n      }\n\n      return this.resources.filter(function (r) {\n        return r['@type'] === 'oa:Tag';\n      }).map(function (r) {\n        return r.chars;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"chars\",\n    get: function get() {\n      return this.resources.filter(function (r) {\n        return r['@type'] !== 'oa:Tag';\n      }).map(function (r) {\n        return r.chars;\n      }).join(' ');\n    }\n    /** */\n\n  }, {\n    key: \"selector\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return on;\n\n        case 'object':\n          // For choices, just return the default for now. FIXME: enhance for SVG\n          // selectors\n          if (on.selector['@type'] === 'oa:Choice') {\n            return on.selector[\"default\"];\n          }\n\n          return on.selector;\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgSelector\",\n    get: function get() {\n      var on = this.on[0];\n\n      switch (typeof on) {\n        case 'string':\n          return null;\n\n        case 'object':\n          if (on.selector && on.selector.item && on.selector.item['@type'] === 'oa:SvgSelector') {\n            return on.selector.item;\n          }\n\n          return null;\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"fragmentSelector\",\n    get: function get() {\n      var selector = this.selector;\n      var match;\n\n      switch (typeof selector) {\n        case 'string':\n          match = selector.match(/xywh=(.*)$/);\n          break;\n\n        case 'object':\n          match = selector.value.match(/xywh=(.*)$/);\n          break;\n\n        default:\n          return null;\n      }\n\n      return match && match[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n  }]);\n\n  return AnnotationResource;\n}();\n\nexport { AnnotationResource as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport AnnotationResource from './AnnotationResource';\n/** */\n\nvar AnnotationList = /*#__PURE__*/function () {\n  /** */\n  function AnnotationList(json, target) {\n    _classCallCheck(this, AnnotationList);\n\n    this.json = json;\n    this.target = target;\n  }\n  /** */\n\n\n  _createClass(AnnotationList, [{\n    key: \"present\",\n\n    /** */\n    value: function present() {\n      return this.resources && this.resources.length > 0;\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this.json['@id'];\n    }\n  }, {\n    key: \"resources\",\n    get: function get() {\n      var _this = this;\n\n      this._resources = this._resources || function () {\n        // eslint-disable-line no-underscore-dangle\n        if (!_this.json || !_this.json.resources) return [];\n        return flatten([_this.json.resources]).map(function (resource) {\n          return new AnnotationResource(resource);\n        });\n      }();\n\n      return this._resources; // eslint-disable-line no-underscore-dangle\n    }\n  }]);\n\n  return AnnotationList;\n}();\n\nexport { AnnotationList as default };","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * CanvasAnnotationDisplay - class used to display a SVG and fragment based\n * annotations.\n */\nvar CanvasAnnotationDisplay = /*#__PURE__*/function () {\n  /** */\n  function CanvasAnnotationDisplay(_ref) {\n    var resource = _ref.resource,\n        palette = _ref.palette,\n        zoomRatio = _ref.zoomRatio,\n        offset = _ref.offset,\n        selected = _ref.selected,\n        hovered = _ref.hovered;\n\n    _classCallCheck(this, CanvasAnnotationDisplay);\n\n    this.resource = resource;\n    this.palette = palette;\n    this.zoomRatio = zoomRatio;\n    this.offset = offset;\n    this.selected = selected;\n    this.hovered = hovered;\n  }\n  /** */\n\n\n  _createClass(CanvasAnnotationDisplay, [{\n    key: \"toContext\",\n    value: function toContext(context) {\n      this.context = context;\n\n      if (this.resource.svgSelector) {\n        this.svgContext();\n      } else if (this.resource.fragmentSelector) {\n        this.fragmentContext();\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgContext\",\n\n    /** */\n    value: function svgContext() {\n      var _this = this;\n\n      var currentPalette;\n\n      if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n\n      if (currentPalette.globalAlpha === 0) return;\n\n      _toConsumableArray(this.svgPaths).forEach(function (element) {\n        /**\n         *  Note: Path2D is not supported in IE11.\n         *  TODO: Support multi canvas offset\n         *  One example: https://developer.mozilla.org/en-US/docs/Web/API/Path2D/addPath\n         */\n        _this.context.save();\n\n        _this.context.translate(_this.offset.x, _this.offset.y);\n\n        var p = new Path2D(element.attributes.d.nodeValue); // Setup styling from SVG -> Canvas\n\n        _this.context.strokeStyle = _this.color;\n\n        if (element.attributes['stroke-dasharray']) {\n          _this.context.setLineDash(element.attributes['stroke-dasharray'].nodeValue.split(','));\n        }\n\n        var svgToCanvasMap = {\n          fill: 'fillStyle',\n          stroke: 'strokeStyle',\n          'stroke-dashoffset': 'lineDashOffset',\n          'stroke-linecap': 'lineCap',\n          'stroke-linejoin': 'lineJoin',\n          'stroke-miterlimit': 'miterlimit',\n          'stroke-width': 'lineWidth'\n        };\n        Object.keys(svgToCanvasMap).forEach(function (key) {\n          if (element.attributes[key]) {\n            _this.context[svgToCanvasMap[key]] = element.attributes[key].nodeValue;\n          }\n        }); // Resize the stroke based off of the zoomRatio (currentZoom / maxZoom)\n\n        _this.context.lineWidth /= _this.zoomRatio; // Reset the color if it is selected or hovered on\n\n        if (_this.selected || _this.hovered) {\n          _this.context.strokeStyle = currentPalette.strokeStyle || currentPalette.fillStyle;\n        }\n\n        if (element.attributes['stroke-opacity']) {\n          _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['stroke-opacity'].nodeValue;\n        } else {\n          _this.context.globalAlpha = currentPalette.globalAlpha;\n        }\n\n        _this.context.stroke(p); // Wait to set the fill, so we can adjust the globalAlpha value if we need to\n\n\n        if (element.attributes.fill && element.attributes.fill.nodeValue !== 'none') {\n          if (element.attributes['fill-opacity']) {\n            _this.context.globalAlpha = currentPalette.globalAlpha * element.attributes['fill-opacity'].nodeValue;\n          } else {\n            _this.context.globalAlpha = currentPalette.globalAlpha;\n          }\n\n          _this.context.fill(p);\n        }\n\n        _this.context.restore();\n      });\n    }\n    /** */\n\n  }, {\n    key: \"fragmentContext\",\n    value: function fragmentContext() {\n      var _this2 = this;\n\n      var fragment = this.resource.fragmentSelector;\n      fragment[0] += this.offset.x;\n      fragment[1] += this.offset.y;\n      var currentPalette;\n\n      if (this.selected) {\n        currentPalette = this.palette.selected;\n      } else if (this.hovered) {\n        currentPalette = this.palette.hovered;\n      } else {\n        currentPalette = this.palette[\"default\"];\n      }\n\n      this.context.save();\n      Object.keys(currentPalette).forEach(function (key) {\n        _this2.context[key] = currentPalette[key];\n      });\n      if (currentPalette.globalAlpha === 0) return;\n\n      if (currentPalette.fillStyle) {\n        var _this$context;\n\n        (_this$context = this.context).fillRect.apply(_this$context, _toConsumableArray(fragment));\n      } else {\n        var _this$context2;\n\n        this.context.lineWidth = 1 / this.zoomRatio;\n\n        (_this$context2 = this.context).strokeRect.apply(_this$context2, _toConsumableArray(fragment));\n      }\n\n      this.context.restore();\n    }\n    /** */\n\n  }, {\n    key: \"svgString\",\n    get: function get() {\n      return this.resource.svgSelector.value;\n    }\n  }, {\n    key: \"svgPaths\",\n    get: function get() {\n      var parser = new DOMParser();\n      var xmlDoc = parser.parseFromString(this.svgString, 'text/xml');\n      return xmlDoc.getElementsByTagName('path');\n    }\n  }]);\n\n  return CanvasAnnotationDisplay;\n}();\n\nexport { CanvasAnnotationDisplay as default };","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport normalizeUrl from 'normalize-url';\nimport MiradorCanvas from './MiradorCanvas';\n/**\n * CanvasWorld\n */\n\nvar CanvasWorld = /*#__PURE__*/function () {\n  /**\n   * @param {Array} canvases - Array of Manifesto:Canvas objects to create a\n   * world from.\n   */\n  function CanvasWorld(canvases, layers) {\n    var viewingDirection = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left-to-right';\n\n    _classCallCheck(this, CanvasWorld);\n\n    this.canvases = canvases.map(function (c) {\n      return new MiradorCanvas(c);\n    });\n    this.layers = layers;\n    this.viewingDirection = viewingDirection;\n    this._canvasDimensions = null; // eslint-disable-line no-underscore-dangle\n  }\n  /** */\n\n\n  _createClass(CanvasWorld, [{\n    key: \"contentResourceToWorldCoordinates\",\n\n    /**\n     * contentResourceToWorldCoordinates - calculates the contentResource coordinates\n     * respective to the world.\n     */\n    value: function contentResourceToWorldCoordinates(contentResource) {\n      var miradorCanvasIndex = this.canvases.findIndex(function (c) {\n        return c.imageResources.find(function (r) {\n          return r.id === contentResource.id;\n        });\n      });\n      var canvas = this.canvases[miradorCanvasIndex];\n      if (!canvas) return [];\n\n      var _this$canvasToWorldCo = this.canvasToWorldCoordinates(canvas.id),\n          _this$canvasToWorldCo2 = _slicedToArray(_this$canvasToWorldCo, 4),\n          x = _this$canvasToWorldCo2[0],\n          y = _this$canvasToWorldCo2[1],\n          w = _this$canvasToWorldCo2[2],\n          h = _this$canvasToWorldCo2[3];\n\n      var fragmentOffset = canvas.onFragment(contentResource.id);\n\n      if (fragmentOffset) {\n        return [x + fragmentOffset[0], y + fragmentOffset[1], fragmentOffset[2], fragmentOffset[3]];\n      }\n\n      return [x, y, w, h];\n    }\n    /** */\n\n  }, {\n    key: \"canvasToWorldCoordinates\",\n    value: function canvasToWorldCoordinates(canvasId) {\n      var canvasDimensions = this.canvasDimensions.find(function (c) {\n        return c.canvas.id === canvasId;\n      });\n      return [canvasDimensions.x, canvasDimensions.y, canvasDimensions.width, canvasDimensions.height];\n    }\n    /** */\n\n  }, {\n    key: \"contentResource\",\n\n    /** Get the IIIF content resource for an image */\n    value: function contentResource(infoResponseId) {\n      var miradorCanvas = this.canvases.find(function (c) {\n        return c.imageServiceIds.some(function (id) {\n          return normalizeUrl(id, {\n            stripAuthentication: false\n          }) === normalizeUrl(infoResponseId, {\n            stripAuthentication: false\n          });\n        });\n      });\n      if (!miradorCanvas) return undefined;\n      return miradorCanvas.imageResources.find(function (r) {\n        return normalizeUrl(r.getServices()[0].id, {\n          stripAuthentication: false\n        }) === normalizeUrl(infoResponseId, {\n          stripAuthentication: false\n        });\n      });\n    }\n    /** @private */\n\n  }, {\n    key: \"getLayerMetadata\",\n    value: function getLayerMetadata(contentResource) {\n      if (!this.layers) return undefined;\n      var miradorCanvas = this.canvases.find(function (c) {\n        return c.imageResources.find(function (r) {\n          return r.id === contentResource.id;\n        });\n      });\n      if (!miradorCanvas) return undefined;\n      var resourceIndex = miradorCanvas.imageResources.findIndex(function (r) {\n        return r.id === contentResource.id;\n      });\n      var layer = this.layers[miradorCanvas.canvas.id];\n      var imageResourceLayer = layer && layer[contentResource.id];\n      return _objectSpread({\n        index: resourceIndex,\n        opacity: 1,\n        total: miradorCanvas.imageResources.length,\n        visibility: true\n      }, imageResourceLayer);\n    }\n    /** */\n\n  }, {\n    key: \"layerOpacityOfImageResource\",\n    value: function layerOpacityOfImageResource(contentResource) {\n      var layer = this.getLayerMetadata(contentResource);\n      if (!layer) return 1;\n      if (!layer.visibility) return 0;\n      return layer.opacity;\n    }\n    /** */\n\n  }, {\n    key: \"layerIndexOfImageResource\",\n    value: function layerIndexOfImageResource(contentResource) {\n      var layer = this.getLayerMetadata(contentResource);\n      if (!layer) return undefined;\n      return layer.total - layer.index - 1;\n    }\n    /**\n     * offsetByCanvas - calculates the offset for a given canvas target. Currently\n     * assumes a horrizontal only layout.\n     */\n\n  }, {\n    key: \"offsetByCanvas\",\n    value: function offsetByCanvas(canvasTarget) {\n      var coordinates = this.canvasToWorldCoordinates(canvasTarget);\n      return {\n        x: coordinates[0],\n        y: coordinates[1]\n      };\n    }\n    /**\n     * worldBounds - calculates the \"World\" bounds. World in this case is canvases\n     * lined up horizontally starting from left to right.\n     */\n\n  }, {\n    key: \"worldBounds\",\n    value: function worldBounds() {\n      var worldWidth = Math.max.apply(Math, _toConsumableArray(this.canvasDimensions.map(function (c) {\n        return c.x + c.width;\n      })));\n      var worldHeight = Math.max.apply(Math, _toConsumableArray(this.canvasDimensions.map(function (c) {\n        return c.y + c.height;\n      })));\n      return [0, 0, worldWidth, worldHeight];\n    }\n    /** */\n\n  }, {\n    key: \"canvasAtPoint\",\n    value: function canvasAtPoint(point) {\n      var canvasDimensions = this.canvasDimensions.find(function (c) {\n        return c.x <= point.x && point.x <= c.x + c.width && c.y <= point.y && point.y <= c.y + c.height;\n      });\n      return canvasDimensions && canvasDimensions.canvas;\n    }\n  }, {\n    key: \"canvasIds\",\n    get: function get() {\n      return this.canvases.map(function (canvas) {\n        return canvas.id;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"canvasDimensions\",\n    get: function get() {\n      if (this._canvasDimensions) {\n        // eslint-disable-line no-underscore-dangle\n        return this._canvasDimensions; // eslint-disable-line no-underscore-dangle\n      }\n\n      var _this$canvasDirection = _slicedToArray(this.canvasDirection, 2),\n          dirX = _this$canvasDirection[0],\n          dirY = _this$canvasDirection[1];\n\n      var scale = dirY === 0 ? Math.min.apply(Math, _toConsumableArray(this.canvases.map(function (c) {\n        return c.getHeight();\n      }))) : Math.min.apply(Math, _toConsumableArray(this.canvases.map(function (c) {\n        return c.getWidth();\n      })));\n      var incX = 0;\n      var incY = 0;\n      var canvasDims = this.canvases.reduce(function (acc, canvas) {\n        var canvasHeight = 0;\n        var canvasWidth = 0;\n\n        if (!isNaN(canvas.aspectRatio)) {\n          if (dirY === 0) {\n            // constant height\n            canvasHeight = scale;\n            canvasWidth = Math.floor(scale * canvas.aspectRatio);\n          } else {\n            // constant width\n            canvasWidth = scale;\n            canvasHeight = Math.floor(scale * (1 / canvas.aspectRatio));\n          }\n        }\n\n        acc.push({\n          canvas: canvas,\n          height: canvasHeight,\n          width: canvasWidth,\n          x: incX,\n          y: incY\n        });\n        incX += dirX * canvasWidth;\n        incY += dirY * canvasHeight;\n        return acc;\n      }, []);\n      var worldHeight = dirY === 0 ? scale : Math.abs(incY);\n      var worldWidth = dirX === 0 ? scale : Math.abs(incX);\n      this._canvasDimensions = canvasDims // eslint-disable-line no-underscore-dangle\n      .reduce(function (acc, dims) {\n        acc.push(_objectSpread(_objectSpread({}, dims), {}, {\n          x: dirX === -1 ? dims.x + worldWidth - dims.width : dims.x,\n          y: dirY === -1 ? dims.y + worldHeight - dims.height : dims.y\n        }));\n        return acc;\n      }, []);\n      return this._canvasDimensions; // eslint-disable-line no-underscore-dangle\n    }\n  }, {\n    key: \"canvasDirection\",\n    get: function get() {\n      switch (this.viewingDirection) {\n        case 'left-to-right':\n          return [1, 0];\n\n        case 'right-to-left':\n          return [-1, 0];\n\n        case 'top-to-bottom':\n          return [0, 1];\n\n        case 'bottom-to-top':\n          return [0, -1];\n\n        default:\n          return [1, 0];\n      }\n    }\n  }]);\n\n  return CanvasWorld;\n}();\n\nexport { CanvasWorld as default };","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { ThumbnailNavigation } from '../components/ThumbnailNavigation';\nimport { getCompanionWindow, getWindow, getCanvasGroupings, getCanvasIndex, getWindowViewType, getSequenceViewingDirection, getConfig } from '../state/selectors';\n/**\n * mapStateToProps - used to hook up state to props\n * @memberof ThumbnailNavigation\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    canvasGroupings: getCanvasGroupings(state, {\n      windowId: windowId\n    }),\n    canvasIndex: getCanvasIndex(state, {\n      windowId: windowId\n    }),\n    position: getCompanionWindow(state, {\n      companionWindowId: getWindow(state, {\n        windowId: windowId\n      }).thumbnailNavigationId\n    }).position,\n    thumbnailNavigation: getConfig(state).thumbnailNavigation,\n    view: getWindowViewType(state, {\n      windowId: windowId\n    }),\n    viewingDirection: getSequenceViewingDirection(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    thumbNavigation: {\n      '&:focus': {\n        boxShadow: 0,\n        outline: 0\n      }\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('ThumbnailNavigation'));\nexport default enhance(ThumbnailNavigation);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getVisibleCanvasIds, getAnnotationResourcesByMotivation } from '../state/selectors';\nimport { WindowSideBarAnnotationsPanel } from '../components/WindowSideBarAnnotationsPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarAnnotationsPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var windowId = _ref.windowId;\n  return {\n    annotationCount: getAnnotationResourcesByMotivation(state, {\n      windowId: windowId\n    }).length,\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    })\n  };\n};\n/** */\n\n\nvar styles = function styles(theme) {\n  return {\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, null), withPlugins('WindowSideBarAnnotationsPanel') // further HOC\n);\nexport default enhance(WindowSideBarAnnotationsPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getManifestLocale, getMetadataLocales, getVisibleCanvasIds, getWindowConfig, getWindow } from '../state/selectors';\nimport { WindowSideBarInfoPanel } from '../components/WindowSideBarInfoPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    availableLocales: getMetadataLocales(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    }),\n    collectionPath: (getWindow(state, {\n      windowId: windowId\n    }) || {}).collectionPath,\n    locale: getCompanionWindow(state, {\n      companionWindowId: id\n    }).locale || getManifestLocale(state, {\n      windowId: windowId\n    }),\n    showLocalePicker: getWindowConfig(state, {\n      windowId: windowId\n    }).showLocalePicker\n  };\n};\n/** */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var windowId = _ref2.windowId,\n      id = _ref2.id;\n  return {\n    setLocale: function setLocale(locale) {\n      return dispatch(actions.updateCompanionWindow(windowId, id, {\n        locale: locale\n      }));\n    }\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarInfoPanel'));\nexport default enhance(WindowSideBarInfoPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { WindowSideBarCanvasPanel } from '../components/WindowSideBarCanvasPanel';\nimport { getCompanionWindow, getDefaultSidebarVariant, getSequenceTreeStructure, getWindow, getManifestoInstance, getSequence, getSequences } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var treeStructure = getSequenceTreeStructure(state, {\n    windowId: windowId\n  });\n  var window = getWindow(state, {\n    windowId: windowId\n  });\n  var config = state.config;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  var collectionPath = window.collectionPath || [];\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var sequence = getSequence(state, {\n    windowId: windowId\n  });\n  return {\n    collection: collectionId && getManifestoInstance(state, {\n      manifestId: collectionId\n    }),\n    config: config,\n    sequenceId: sequence && sequence.id,\n    sequences: getSequences(state, {\n      windowId: windowId\n    }),\n    showToc: treeStructure && treeStructure.nodes && treeStructure.nodes.length > 0,\n    variant: companionWindow.variant || getDefaultSidebarVariant(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof WindowSideBarCanvasPanel\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    showMultipart: function showMultipart() {\n      return dispatch(actions.addOrUpdateCompanionWindow(windowId, {\n        content: 'collection',\n        position: 'right'\n      }));\n    },\n    updateSequence: function updateSequence(sequenceId) {\n      return dispatch(actions.updateWindow(windowId, {\n        sequenceId: sequenceId\n      }));\n    },\n    updateVariant: function updateVariant(variant) {\n      return dispatch(actions.updateCompanionWindow(windowId, id, {\n        variant: variant\n      }));\n    }\n  };\n};\n/**\n *\n * @param theme\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    \"break\": {\n      flexBasis: '100%',\n      height: 0\n    },\n    collectionNavigationButton: {\n      textTransform: 'none'\n    },\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    select: {\n      '&:focus': {\n        backgroundColor: theme.palette.background.paper\n      }\n    },\n    selectEmpty: {\n      backgroundColor: theme.palette.background.paper\n    },\n    variantTab: {\n      minWidth: 'auto'\n    }\n  };\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarCanvasPanel'));\nexport default enhance(WindowSideBarCanvasPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { getManifestLogo, getRequiredStatement, getRights } from '../state/selectors';\nimport { AttributionPanel } from '../components/AttributionPanel';\n/**\n * mapStateToProps - to hook up connect\n * @memberof WindowSideBarInfoPanel\n * @private\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    manifestLogo: getManifestLogo(state, {\n      windowId: windowId\n    }),\n    requiredStatement: getRequiredStatement(state, {\n      windowId: windowId\n    }),\n    rights: getRights(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    logo: {\n      maxWidth: '100%'\n    },\n    placeholder: {\n      backgroundColor: theme.palette.grey[300]\n    },\n    section: {\n      borderBottom: \".5px solid \".concat(theme.palette.section_divider),\n      paddingBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n      paddingTop: theme.spacing(2)\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps), withPlugins('AttributionPanel'));\nexport default enhance(AttributionPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport * as actions from '../state/actions';\nimport { withPlugins } from '../extend/withPlugins';\nimport { SearchPanel } from '../components/SearchPanel';\nimport { getManifestSearchService, getSearchQuery, getWindow } from '../state/selectors';\n/** */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    query: getSearchQuery(state, {\n      companionWindowId: id,\n      windowId: windowId\n    }),\n    searchService: getManifestSearchService(state, {\n      windowId: windowId\n    }),\n    suggestedSearches: getWindow(state, {\n      windowId: windowId\n    }).suggestedSearches\n  };\n};\n/** */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, props) {\n  return {\n    fetchSearch: function fetchSearch(searchId, query) {\n      return dispatch(actions.fetchSearch(props.windowId, props.id, searchId, query));\n    },\n    removeSearch: function removeSearch() {\n      return dispatch(actions.removeSearch(props.windowId, props.id));\n    }\n  };\n};\n/**\n* Styles for withStyles HOC\n*/\n\n\nvar styles = function styles(theme) {\n  return {\n    clearChip: {\n      marginLeft: theme.spacing(1)\n    },\n    inlineButton: {\n      '& span': {\n        lineHeight: '1.5em'\n      },\n      margin: theme.spacing(2),\n      padding: 0,\n      textAlign: 'inherit',\n      textTransform: 'none'\n    }\n  };\n};\n\nvar enhance = compose(connect(mapStateToProps, mapDispatchToProps), withStyles(styles), withTranslation(), withPlugins('SearchPanel'));\nexport default enhance(SearchPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { LayersPanel } from '../components/LayersPanel';\nimport { getVisibleCanvasIds } from '../state/selectors';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {\n    canvasIds: getVisibleCanvasIds(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('LayersPanel'));\nexport default enhance(LayersPanel);","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport { CustomPanel } from '../components/CustomPanel';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  return {};\n};\n/**\n *\n * @param theme\n * @returns {label: {paddingLeft: number}}}\n */\n\n\nvar styles = function styles(theme) {\n  return {};\n};\n\nvar enhance = compose(withTranslation(), withStyles(styles), connect(mapStateToProps), withPlugins('CustomPanel'));\nexport default enhance(CustomPanel);","import ThumbnailNavigation from '../containers/ThumbnailNavigation';\nimport WindowSideBarAnnotationsPanel from '../containers/WindowSideBarAnnotationsPanel';\nimport WindowSideBarInfoPanel from '../containers/WindowSideBarInfoPanel';\nimport WindowSideBarCanvasPanel from '../containers/WindowSideBarCanvasPanel';\nimport AttributionPanel from '../containers/AttributionPanel';\nimport SearchPanel from '../containers/SearchPanel';\nimport LayersPanel from '../containers/LayersPanel';\nimport CustomPanel from '../containers/CustomPanel';\nimport WindowSideBarCollectionPanel from '../containers/WindowSideBarCollectionPanel';\nvar map = {\n  annotations: WindowSideBarAnnotationsPanel,\n  attribution: AttributionPanel,\n  canvas: WindowSideBarCanvasPanel,\n  collection: WindowSideBarCollectionPanel,\n  custom: CustomPanel,\n  info: WindowSideBarInfoPanel,\n  layers: LayersPanel,\n  search: SearchPanel,\n  thumbnailNavigation: ThumbnailNavigation\n};\nexport default map;","import { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport { withStyles } from '@material-ui/core/styles';\nimport { withPlugins } from '../extend/withPlugins';\nimport * as actions from '../state/actions';\nimport { getCompanionWindow, getManifest, getManifestoInstance, getDefaultSidebarVariant, getWindow } from '../state/selectors';\nimport { WindowSideBarCollectionPanel } from '../components/WindowSideBarCollectionPanel';\n/**\n * mapStateToProps - to hook up connect\n */\n\nvar mapStateToProps = function mapStateToProps(state, _ref) {\n  var id = _ref.id,\n      windowId = _ref.windowId;\n  var window = getWindow(state, {\n    windowId: windowId\n  });\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: id\n  });\n  var localCollectionPath = companionWindow.collectionPath;\n  var collectionPath = localCollectionPath || window.collectionPath;\n  var collectionId = collectionPath && collectionPath[collectionPath.length - 1];\n  var parentCollectionId = collectionPath && collectionPath[collectionPath.length - 2];\n  var collection = collectionId && getManifest(state, {\n    manifestId: collectionId\n  });\n  var parentCollection = parentCollectionId && getManifest(state, {\n    manifestId: parentCollectionId\n  });\n  var manifest = getManifest(state, {\n    windowId: windowId\n  });\n  return {\n    canvasNavigation: state.config.canvasNavigation,\n    collection: collection && getManifestoInstance(state, {\n      manifestId: collection.id\n    }),\n    collectionId: collectionId,\n    collectionPath: collectionPath,\n    error: collection && collection.error,\n    isFetching: collection && collection.isFetching,\n    manifestId: manifest && manifest.id,\n    parentCollection: parentCollection && getManifestoInstance(state, {\n      manifestId: parentCollection.id\n    }),\n    ready: collection && !!collection.json,\n    variant: companionWindow.variant || getDefaultSidebarVariant(state, {\n      windowId: windowId\n    })\n  };\n};\n/**\n * mapStateToProps - used to hook up connect to state\n * @memberof SidebarIndexList\n * @private\n */\n\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch, _ref2) {\n  var id = _ref2.id,\n      windowId = _ref2.windowId;\n  return {\n    updateCompanionWindow: function updateCompanionWindow() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return dispatch(actions.updateCompanionWindow.apply(actions, [windowId, id].concat(args)));\n    },\n    updateWindow: function updateWindow() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return dispatch(actions.updateWindow.apply(actions, [windowId].concat(args)));\n    }\n  };\n};\n/**\n * Styles for withStyles HOC\n */\n\n\nvar styles = function styles(theme) {\n  return {\n    label: {\n      paddingLeft: theme.spacing(1)\n    },\n    menuItem: {\n      borderBottom: \"0.5px solid \".concat(theme.palette.divider),\n      paddingRight: theme.spacing(1),\n      whiteSpace: 'normal'\n    }\n  };\n};\n\nvar enhance = compose(withStyles(styles), withTranslation(), connect(mapStateToProps, mapDispatchToProps), withPlugins('WindowSideBarCollectionPanel'));\nexport default enhance(WindowSideBarCollectionPanel);","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport flattenDeep from 'lodash/flattenDeep';\nimport { Canvas } from 'manifesto.js';\n/**\n * MiradorCanvas - adds additional, testable logic around Manifesto's Canvas\n * https://iiif-commons.github.io/manifesto/classes/_canvas_.manifesto.canvas.html\n */\n\nvar MiradorCanvas = /*#__PURE__*/function () {\n  /**\n   * @param {MiradorCanvas} canvas\n   */\n  function MiradorCanvas(canvas) {\n    _classCallCheck(this, MiradorCanvas);\n\n    this.canvas = canvas;\n  }\n  /** */\n\n\n  _createClass(MiradorCanvas, [{\n    key: \"getWidth\",\n\n    /** */\n    value: function getWidth() {\n      return this.canvas.getWidth();\n    }\n    /** */\n\n  }, {\n    key: \"getHeight\",\n    value: function getHeight() {\n      return this.canvas.getHeight();\n    }\n    /**\n     */\n\n  }, {\n    key: \"resourceAnnotation\",\n\n    /**\n     * Returns a given resource Annotation, based on a contained resource or body\n     * id\n     */\n    value: function resourceAnnotation(id) {\n      return this.resourceAnnotations.find(function (anno) {\n        return anno.getResource().id === id || flatten(new Array(anno.getBody())).some(function (body) {\n          return body.id === id;\n        });\n      });\n    }\n    /**\n     * Returns the fragment placement values if a resourceAnnotation is placed on\n     * a canvas somewhere besides the full extent\n     */\n\n  }, {\n    key: \"onFragment\",\n    value: function onFragment(id) {\n      var resourceAnnotation = this.resourceAnnotation(id);\n      if (!resourceAnnotation) return undefined; // IIIF v2\n\n      var on = resourceAnnotation.getProperty('on'); // IIIF v3\n\n      var target = resourceAnnotation.getProperty('target');\n      var fragmentMatch = (on || target).match(/xywh=(.*)$/);\n      if (!fragmentMatch) return undefined;\n      return fragmentMatch[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n    /** */\n\n  }, {\n    key: \"getLabel\",\n\n    /**\n     * Get the canvas label\n     */\n    value: function getLabel() {\n      return this.canvas.getLabel().length > 0 ? this.canvas.getLabel().getValue() : String(this.canvas.index + 1);\n    }\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this.canvas.id;\n    }\n  }, {\n    key: \"aspectRatio\",\n    get: function get() {\n      return this.canvas.getWidth() / this.canvas.getHeight();\n    }\n    /**\n     * Fetches AnnotationList URIs from canvas's otherContent property\n     *\n     * Supported otherContent types:\n     * - Objects having @type property of \"sc:AnnotationList\" and URI in @id\n     * - Strings being the URIs\n     */\n\n  }, {\n    key: \"annotationListUris\",\n    get: function get() {\n      return flatten(new Array(this.canvas.__jsonld.otherContent) // eslint-disable-line no-underscore-dangle\n      ).filter(function (otherContent) {\n        return otherContent && (typeof otherContent === 'string' || otherContent['@type'] === 'sc:AnnotationList');\n      }).map(function (otherContent) {\n        return typeof otherContent === 'string' ? otherContent : otherContent['@id'];\n      });\n    }\n    /** */\n\n  }, {\n    key: \"canvasAnnotationPages\",\n    get: function get() {\n      return flatten(new Array(this.canvas.__jsonld.annotations) // eslint-disable-line no-underscore-dangle\n      ).filter(function (annotations) {\n        return annotations && annotations.type === 'AnnotationPage';\n      });\n    }\n    /**\n     * Will negotiate a v2 or v3 type of resource\n     */\n\n  }, {\n    key: \"imageResource\",\n    get: function get() {\n      return this.imageResources[0];\n    }\n    /** */\n\n  }, {\n    key: \"imageResources\",\n    get: function get() {\n      var _this = this;\n\n      var resources = flattenDeep([this.canvas.getImages().map(function (i) {\n        return i.getResource();\n      }), this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.map(function (resource) {\n        switch (resource.getProperty('type')) {\n          case 'oa:Choice':\n            return new Canvas({\n              images: flatten([resource.getProperty('default'), resource.getProperty('item')]).map(function (r) {\n                return {\n                  resource: r\n                };\n              })\n            }, _this.canvas.options).getImages().map(function (i) {\n              return i.getResource();\n            });\n\n          default:\n            return resource;\n        }\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"videoResources\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('type') === 'Video';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"audioResources\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('type') === 'Sound';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"vttContent\",\n    get: function get() {\n      var resources = flattenDeep([this.canvas.getContent().map(function (i) {\n        return i.getBody();\n      })]);\n      return flatten(resources.filter(function (resource) {\n        return resource.getProperty('format') === 'text/vtt';\n      }));\n    }\n    /** */\n\n  }, {\n    key: \"resourceAnnotations\",\n    get: function get() {\n      return flattenDeep([this.canvas.getImages(), this.canvas.getContent()]);\n    }\n  }, {\n    key: \"iiifImageResources\",\n    get: function get() {\n      return this.imageResources.filter(function (r) {\n        return r && r.getServices()[0] && r.getServices()[0].id;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"imageServiceIds\",\n    get: function get() {\n      return this.iiifImageResources.map(function (r) {\n        return r.getServices()[0].id;\n      });\n    }\n    /**\n     * Get the canvas service\n     */\n\n  }, {\n    key: \"service\",\n    get: function get() {\n      return this.canvas.__jsonld.service; // eslint-disable-line no-underscore-dangle\n    }\n  }]);\n\n  return MiradorCanvas;\n}();\n\nexport { MiradorCanvas as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * MiradorManifest - adds additional, testable logic around Manifesto's Manifest\n * https://iiif-commons.github.io/manifesto/classes/_canvas_.manifesto.canvas.html\n */\nvar MiradorManifest = /*#__PURE__*/function () {\n  /** */\n  function MiradorManifest(manifest) {\n    _classCallCheck(this, MiradorManifest);\n\n    this.manifest = manifest;\n  }\n  /**\n   * Returns the starting canvas specified in the manifest\n   * @param {object} manifest manifesto instance\n   * @param {number} canvasIndexFromState\n   * @return {Canvas}\n   */\n\n\n  _createClass(MiradorManifest, [{\n    key: \"canvasAt\",\n\n    /** */\n    value: function canvasAt(index) {\n      var sequence = this.manifest.getSequences()[0];\n      var canvases = sequence && sequence.getCanvases();\n      return canvases && canvases[index];\n    }\n  }, {\n    key: \"startCanvas\",\n    get: function get() {\n      var canvasId;\n      var sequence = this.manifest.getSequences()[0];\n      if (!sequence) return undefined; // IIIF v2\n\n      canvasId = sequence.getProperty('startCanvas');\n\n      if (!canvasId) {\n        // IIIF v3\n        var start = this.manifest.getProperty('start') || sequence.getProperty('start');\n        canvasId = start && (start.id || start.source);\n      }\n\n      return canvasId && sequence.getCanvasById(canvasId) || undefined;\n    }\n  }]);\n\n  return MiradorManifest;\n}();\n\nexport { MiradorManifest as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { createRemoveUpdate, updateTree } from 'react-mosaic-component/lib/util/mosaicUpdates';\nimport { getNodeAtPath, getOtherDirection, getPathToCorner, Corner } from 'react-mosaic-component/lib/util/mosaicUtilities';\nimport dropRight from 'lodash/dropRight';\n/** */\n\nvar MosaicLayout = /*#__PURE__*/function () {\n  /** */\n  function MosaicLayout(layout) {\n    _classCallCheck(this, MosaicLayout);\n\n    this.layout = layout;\n  }\n  /** */\n\n\n  _createClass(MosaicLayout, [{\n    key: \"pathToCorner\",\n    value: function pathToCorner() {\n      var corner = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Corner.TOP_RIGHT;\n      return getPathToCorner(this.layout, corner);\n    }\n    /** */\n\n  }, {\n    key: \"pathToParent\",\n    value: function pathToParent(path) {\n      return getNodeAtPath(this.layout, dropRight(path));\n    }\n    /** */\n\n  }, {\n    key: \"nodeAtPath\",\n    value: function nodeAtPath(path) {\n      return getNodeAtPath(this.layout, path);\n    }\n    /**\n     * addWindows - updates the layout with new windows using an algorithm ported\n     * from the react-mosaic-components examples. Will always add to the Top Right\n     * https://github.com/nomcopter/react-mosaic/blob/5081df8d1528d4c3b83a72763a46a30b3048fe95/demo/ExampleApp.tsx#L119-L154\n     * @param {Array} addedWindowIds [description]\n     */\n\n  }, {\n    key: \"addWindows\",\n    value: function addWindows(addedWindowIds) {\n      var _this = this;\n\n      addedWindowIds.forEach(function (windowId, i) {\n        var path = _this.pathToCorner();\n\n        var parent = _this.pathToParent(path);\n\n        var destination = _this.nodeAtPath(path);\n\n        var direction = parent ? getOtherDirection(parent.direction) : 'row';\n        var first;\n        var second;\n\n        if (direction === 'row') {\n          first = destination;\n          second = addedWindowIds[i];\n        } else {\n          first = addedWindowIds[i];\n          second = destination;\n        }\n\n        var update = {\n          path: path,\n          spec: {\n            $set: {\n              direction: direction,\n              first: first,\n              second: second\n            }\n          }\n        }; // We cannot batch the updates together because we need to recalculate\n        // the new location for each new window\n\n        _this.layout = updateTree(_this.layout, [update]);\n      });\n    }\n    /**\n     * removeWindows - Generate a set of \"removeUpdates\" to update layout binary\n     * tree. Then update the layout.\n     * @param  {Array} removedWindowIds\n     * @param  {Object} windowPaths - a lookup table for window paths\n     */\n\n  }, {\n    key: \"removeWindows\",\n    value: function removeWindows(removedWindowIds, windowPaths) {\n      var _this2 = this;\n\n      var removeUpdates = removedWindowIds.map(function (windowId) {\n        return createRemoveUpdate(_this2.layout, windowPaths[windowId]);\n      });\n      this.layout = updateTree(this.layout, removeUpdates);\n    }\n  }]);\n\n  return MosaicLayout;\n}();\n\nexport { MosaicLayout as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport OpenSeadragon from 'openseadragon';\n/**\n * OpenSeadragonCanvasOverlay - adapted from https://github.com/altert/OpenSeadragonCanvasOverlay\n * used rather than an \"onRedraw\" function we tap into our own method. Existing\n * repository is not published as an npm package.\n * Code ported from https://github.com/altert/OpenSeadragonCanvasOverlay\n * carries a BSD 3-Clause license originally authored by @altert from\n * https://github.com/altert/OpenseadragonFabricjsOverlay\n */\n\nvar OpenSeadragonCanvasOverlay = /*#__PURE__*/function () {\n  /**\n   * constructor - sets up the Canvas overlay container\n   */\n  function OpenSeadragonCanvasOverlay(viewer, ref) {\n    _classCallCheck(this, OpenSeadragonCanvasOverlay);\n\n    this.viewer = viewer;\n    this.ref = ref;\n    this.containerWidth = 0;\n    this.containerHeight = 0;\n    this.imgAspectRatio = 1;\n  }\n  /** */\n\n\n  _createClass(OpenSeadragonCanvasOverlay, [{\n    key: \"clear\",\n\n    /** */\n    value: function clear() {\n      this.context2d.clearRect(0, 0, this.containerWidth, this.containerHeight);\n    }\n    /**\n     * resize - resizes the added Canvas overlay.\n     */\n\n  }, {\n    key: \"resize\",\n    value: function resize() {\n      if (this.containerWidth !== this.viewer.container.clientWidth) {\n        this.containerWidth = this.viewer.container.clientWidth;\n        this.canvasDiv.setAttribute('width', this.containerWidth);\n        this.canvas.setAttribute('width', this.containerWidth);\n      }\n\n      if (this.containerHeight !== this.viewer.container.clientHeight) {\n        this.containerHeight = this.viewer.container.clientHeight;\n        this.canvasDiv.setAttribute('height', this.containerHeight);\n        this.canvas.setAttribute('height', this.containerHeight);\n      }\n\n      this.viewportOrigin = new OpenSeadragon.Point(0, 0);\n      var boundsRect = this.viewer.viewport.getBoundsNoRotate(true);\n      this.viewportOrigin.x = boundsRect.x;\n      this.viewportOrigin.y = boundsRect.y * this.imgAspectRatio;\n      this.viewportWidth = boundsRect.width;\n      this.viewportHeight = boundsRect.height * this.imgAspectRatio;\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      this.imgWidth = image1.source.dimensions.x;\n      this.imgHeight = image1.source.dimensions.y;\n      this.imgAspectRatio = this.imgWidth / this.imgHeight;\n    }\n    /**\n     * canvasUpdate - sets up the dimensions for the canvas update to mimick image\n     * 0 dimensions. Then call provided update function.\n     * @param {Function} update\n     */\n\n  }, {\n    key: \"canvasUpdate\",\n    value: function canvasUpdate(update) {\n      var viewportZoom = this.viewer.viewport.getZoom(true);\n      var image1 = this.viewer.world.getItemAt(0);\n      if (!image1) return;\n      var zoom = image1.viewportToImageZoom(viewportZoom);\n      var x = (this.viewportOrigin.x / this.imgWidth - this.viewportOrigin.x) / this.viewportWidth * this.containerWidth;\n      var y = (this.viewportOrigin.y / this.imgHeight - this.viewportOrigin.y) / this.viewportHeight * this.containerHeight;\n      if (this.clearBeforeRedraw) this.clear();\n      this.context2d.translate(x, y);\n      this.context2d.scale(zoom, zoom);\n      var center = this.viewer.viewport.getCenter();\n      var flip = this.viewer.viewport.getFlip();\n\n      if (flip) {\n        this.context2d.translate(center.x * 2, 0);\n        this.context2d.scale(-1, 1);\n      }\n\n      var rotation = this.viewer.viewport.getRotation();\n\n      if (rotation !== 0) {\n        this.context2d.translate(center.x, center.y);\n        this.context2d.rotate(rotation * Math.PI / 180);\n        this.context2d.translate(-1 * center.x, -1 * center.y);\n      }\n\n      update();\n      this.context2d.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }, {\n    key: \"canvas\",\n    get: function get() {\n      return this.canvasDiv.firstElementChild;\n    }\n    /** */\n\n  }, {\n    key: \"canvasDiv\",\n    get: function get() {\n      return this.ref.current;\n    }\n    /** */\n\n  }, {\n    key: \"context2d\",\n    get: function get() {\n      return this.canvas.getContext('2d');\n    }\n  }]);\n\n  return OpenSeadragonCanvasOverlay;\n}();\n\nexport { OpenSeadragonCanvasOverlay as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport { Utils } from 'manifesto.js';\nimport MiradorManifest from './MiradorManifest';\nimport MiradorCanvas from './MiradorCanvas';\nimport asArray from './asArray';\n/** */\n\nfunction isLevel0ImageProfile(service) {\n  var profile = service.getProfile(); // work around a bug in manifesto with normalized urls that strip # values.\n\n  if (profile.endsWith('#level1') || profile.endsWith('#level2')) return false; // support IIIF v3-style profiles\n\n  if (profile === 'level0') return true;\n  return Utils.isLevel0ImageProfile(profile);\n}\n/** */\n\n\nfunction isLevel2ImageProfile(service) {\n  var profile = service.getProfile(); // work around a bug in manifesto with normalized urls that strip # values.\n\n  if (profile.endsWith('#level0') || profile.endsWith('#level1')) return false; // support IIIF v3-style profiles\n\n  if (profile === 'level2') return true;\n  return Utils.isLevel2ImageProfile(profile);\n}\n/** */\n\n\nfunction iiifv3ImageServiceType(service) {\n  var type = service.getProperty('type') || [];\n  return asArray(type).some(function (v) {\n    return v.startsWith('ImageService');\n  });\n}\n/** */\n\n\nfunction iiifImageService(resource) {\n  var service = resource && resource.getServices().find(function (s) {\n    return iiifv3ImageServiceType(s) || Utils.isImageProfile(s.getProfile());\n  });\n  if (!service) return undefined;\n  return service;\n}\n/** */\n\n\nvar ThumbnailFactory = /*#__PURE__*/function () {\n  /** */\n  function ThumbnailFactory(resource) {\n    var iiifOpts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, ThumbnailFactory);\n\n    this.resource = resource;\n    this.iiifOpts = iiifOpts;\n  }\n  /** */\n\n\n  _createClass(ThumbnailFactory, [{\n    key: \"iiifThumbnailUrl\",\n\n    /**\n     * Determines the appropriate thumbnail to use to represent an Image Resource.\n     * @param {Object} resource The Image Resource from which to derive a thumbnail\n     * @return {Object} The thumbnail URL and any spatial dimensions that can be determined\n     */\n    value: function iiifThumbnailUrl(resource) {\n      var size;\n      var width;\n      var height;\n      var minDimension = 120;\n      var maxHeight = minDimension;\n      var maxWidth = minDimension;\n      var _this$iiifOpts = this.iiifOpts,\n          requestedMaxHeight = _this$iiifOpts.maxHeight,\n          requestedMaxWidth = _this$iiifOpts.maxWidth;\n      if (requestedMaxHeight) maxHeight = Math.max(requestedMaxHeight, minDimension);\n      if (requestedMaxWidth) maxWidth = Math.max(requestedMaxWidth, minDimension);\n      var service = iiifImageService(resource);\n      if (!service) return ThumbnailFactory.staticImageUrl(resource);\n      var aspectRatio = resource.getWidth() && resource.getHeight() && resource.getWidth() / resource.getHeight();\n      var target = requestedMaxWidth && requestedMaxHeight ? requestedMaxWidth * requestedMaxHeight : maxHeight * maxWidth;\n      var closestSize = ThumbnailFactory.selectBestImageSize(service, target);\n\n      if (closestSize) {\n        // Embedded service advertises an appropriate size\n        width = closestSize.width;\n        height = closestSize.height;\n        size = \"\".concat(width, \",\").concat(height);\n      } else if (isLevel0ImageProfile(service)) {\n        /** Bail if the best available size is the full size.. maybe we'll get lucky with the @id */\n        if (!service.getProperty('height') && !service.getProperty('width')) {\n          return ThumbnailFactory.staticImageUrl(resource);\n        }\n      } else if (requestedMaxHeight && requestedMaxWidth) {\n        // IIIF level 2, no problem.\n        if (isLevel2ImageProfile(service)) {\n          size = \"!\".concat(maxWidth, \",\").concat(maxHeight);\n          width = maxWidth;\n          height = maxHeight;\n          if (aspectRatio && aspectRatio > 1) height = Math.round(maxWidth / aspectRatio);\n          if (aspectRatio && aspectRatio < 1) width = Math.round(maxHeight * aspectRatio);\n        } else if (maxWidth / maxHeight < aspectRatio) {\n          size = \"\".concat(maxWidth, \",\");\n          width = maxWidth;\n          if (aspectRatio) height = Math.round(maxWidth / aspectRatio);\n        } else {\n          size = \",\".concat(maxHeight);\n          height = maxHeight;\n          if (aspectRatio) width = Math.round(maxHeight * aspectRatio);\n        }\n      } else if (requestedMaxHeight && !requestedMaxWidth) {\n        size = \",\".concat(maxHeight);\n        height = maxHeight;\n        if (aspectRatio) width = Math.round(maxHeight * aspectRatio);\n      } else if (!requestedMaxHeight && requestedMaxWidth) {\n        size = \"\".concat(maxWidth, \",\");\n        width = maxWidth;\n        if (aspectRatio) height = Math.round(maxWidth / aspectRatio);\n      } else {\n        size = \",\".concat(minDimension);\n        height = minDimension;\n        if (aspectRatio) width = Math.round(height * aspectRatio);\n      }\n\n      var region = 'full';\n      var quality = Utils.getImageQuality(service.getProfile());\n      var id = service.id.replace(/\\/+$/, '');\n      var format = this.getFormat(service);\n      return {\n        height: height,\n        url: [id, region, size, 0, \"\".concat(quality, \".\").concat(format)].join('/'),\n        width: width\n      };\n    }\n    /**\n     * Figure out what format thumbnail to use by looking at the preferred formats\n     * on offer, and selecting a format shared in common with the application's\n     * preferred format list.\n     *\n     * Fall back to jpg, which is required to work for all IIIF services.\n     */\n\n  }, {\n    key: \"getFormat\",\n    value: function getFormat(service) {\n      var _this$iiifOpts$prefer = this.iiifOpts.preferredFormats,\n          preferredFormats = _this$iiifOpts$prefer === void 0 ? [] : _this$iiifOpts$prefer;\n      var servicePreferredFormats = service.getProperty('preferredFormats');\n      if (!servicePreferredFormats) return 'jpg';\n      var filteredFormats = servicePreferredFormats.filter(function (value) {\n        return preferredFormats.includes(value);\n      }); // this is a format found in common between the preferred formats of the service\n      // and the application\n\n      if (filteredFormats[0]) return filteredFormats[0]; // IIIF Image API guarantees jpg support; if it wasn't provided by the service\n      // but the application is fine with it, we might as well try it.\n\n      if (!servicePreferredFormats.includes('jpg') && preferredFormats.includes('jpg')) {\n        return 'jpg';\n      } // there were no formats in common, and the application didn't want jpg... so\n      // just trust that the IIIF service is advertising something useful?\n\n\n      if (servicePreferredFormats[0]) return servicePreferredFormats[0]; // JPG support is guaranteed by the spec, so it's a good worst-case fallback\n\n      return 'jpg';\n    }\n    /**\n     * Determines the content resource from which to derive a thumbnail to represent a given resource.\n     * This method is recursive.\n     * @param {Object} resource A IIIF resource to derive a thumbnail from\n     * @return {Object|undefined} The Image Resource to derive a thumbnail from, or undefined\n     * if no appropriate resource exists\n     */\n\n  }, {\n    key: \"getSourceContentResource\",\n    value: function getSourceContentResource(resource) {\n      var thumbnail = resource.getThumbnail(); // Any resource type may have a thumbnail\n\n      if (thumbnail) {\n        if (typeof thumbnail.__jsonld === 'string') return thumbnail.__jsonld; // Prefer an image's ImageService over its image's thumbnail\n        // Note that Collection, Manifest, and Canvas don't have `getType()`\n\n        if (!resource.isCollection() && !resource.isManifest() && !resource.isCanvas()) {\n          if (resource.getType() === 'image' && iiifImageService(resource) && !iiifImageService(thumbnail)) {\n            return resource;\n          }\n        }\n\n        return thumbnail;\n      }\n\n      if (resource.isCollection()) {\n        var firstManifest = resource.getManifests()[0];\n        if (firstManifest) return this.getSourceContentResource(firstManifest);\n        return undefined;\n      }\n\n      if (resource.isManifest()) {\n        var miradorManifest = new MiradorManifest(resource);\n        var canvas = miradorManifest.startCanvas || miradorManifest.canvasAt(0);\n        if (canvas) return this.getSourceContentResource(canvas);\n        return undefined;\n      }\n\n      if (resource.isCanvas()) {\n        var image = ThumbnailFactory.getPreferredImage(resource);\n        if (image) return this.getSourceContentResource(image);\n        return undefined;\n      }\n\n      if (resource.getType() === 'image') {\n        return resource;\n      }\n\n      return undefined;\n    }\n    /**\n     * Gets a thumbnail representing the resource.\n     * @return {Object|undefined} A thumbnail representing the resource, or undefined if none could\n     * be determined\n     */\n\n  }, {\n    key: \"get\",\n    value: function get() {\n      if (!this.resource) return undefined; // Determine which content resource we should use to derive a thumbnail\n\n      var sourceContentResource = this.getSourceContentResource(this.resource);\n      if (!sourceContentResource) return undefined; // Special treatment for external resources\n\n      if (typeof sourceContentResource === 'string') return {\n        url: sourceContentResource\n      };\n      return this.iiifThumbnailUrl(sourceContentResource);\n    }\n  }], [{\n    key: \"staticImageUrl\",\n    value: function staticImageUrl(resource) {\n      return {\n        height: resource.getProperty('height'),\n        url: resource.id,\n        width: resource.getProperty('width')\n      };\n    }\n    /**\n     * Selects the image resource that is representative of the given canvas.\n     * @param {Object} canvas A Manifesto Canvas\n     * @return {Object} A Manifesto Image Resource\n     */\n\n  }, {\n    key: \"getPreferredImage\",\n    value: function getPreferredImage(canvas) {\n      var miradorCanvas = new MiradorCanvas(canvas);\n      return miradorCanvas.iiifImageResources[0] || miradorCanvas.imageResource;\n    }\n    /**\n     * Chooses the best available image size based on a target area (w x h) value.\n     * @param {Object} service A IIIF Image API service that has a `sizes` array\n     * @param {Number} targetArea The target area value to compare potential sizes against\n     * @return {Object|undefined} The best size, or undefined if none are acceptable\n     */\n\n  }, {\n    key: \"selectBestImageSize\",\n    value: function selectBestImageSize(service, targetArea) {\n      var sizes = asArray(service.getProperty('sizes'));\n      var closestSize = {\n        \"default\": true,\n        height: service.getProperty('height') || Number.MAX_SAFE_INTEGER,\n        width: service.getProperty('width') || Number.MAX_SAFE_INTEGER\n      };\n      /** Compare the total image area to our target */\n\n      var imageFitness = function imageFitness(test) {\n        return test.width * test.height - targetArea;\n      };\n      /** Look for the size that's just bigger than we prefer... */\n\n\n      closestSize = sizes.reduce(function (best, test) {\n        var score = imageFitness(test);\n        if (score < 0) return best;\n        return Math.abs(score) < Math.abs(imageFitness(best)) ? test : best;\n      }, closestSize);\n      /** .... but not \"too\" big; we'd rather scale up an image than download too much */\n\n      if (closestSize.width * closestSize.height > targetArea * 6) {\n        closestSize = sizes.reduce(function (best, test) {\n          return Math.abs(imageFitness(test)) < Math.abs(imageFitness(best)) ? test : best;\n        }, closestSize);\n      }\n\n      if (closestSize[\"default\"]) return undefined;\n      return closestSize;\n    }\n  }]);\n\n  return ThumbnailFactory;\n}();\n/** */\n\n\nfunction getBestThumbnail(resource, iiifOpts) {\n  return new ThumbnailFactory(resource, iiifOpts).get();\n}\n\nexport { getBestThumbnail as default, ThumbnailFactory };","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/** */\nvar TruncatedHit = /*#__PURE__*/function () {\n  /** */\n  function TruncatedHit(hit) {\n    var annotation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n        _ref$maxChars = _ref.maxChars,\n        maxChars = _ref$maxChars === void 0 ? 200 : _ref$maxChars,\n        _ref$minimum = _ref.minimum,\n        minimum = _ref$minimum === void 0 ? 20 : _ref$minimum;\n\n    _classCallCheck(this, TruncatedHit);\n\n    this.hit = hit;\n    this.annotation = annotation;\n    this.maxChars = maxChars || 200;\n    this.minimum = minimum || 20;\n  }\n  /** */\n\n\n  _createClass(TruncatedHit, [{\n    key: \"match\",\n    get: function get() {\n      return this.hit.match || this.annotation && this.annotation.resource.resource.chars || '-';\n    }\n    /** */\n\n  }, {\n    key: \"charsOnSide\",\n    get: function get() {\n      var resultingChars = (this.maxChars - this.match.length) / 2;\n      var measured = [(this.hit.before || '').length, (this.hit.after || '').length].filter(function (length) {\n        return length > 0;\n      });\n      return Math.max(Math.min.apply(Math, [resultingChars].concat(_toConsumableArray(measured))), this.minimum);\n    }\n    /** */\n\n  }, {\n    key: \"before\",\n    get: function get() {\n      if (!this.hit.before) return '';\n      return this.hit.before.substring(this.hit.before.length - this.charsOnSide, this.hit.before.length);\n    }\n    /** */\n\n  }, {\n    key: \"after\",\n    get: function get() {\n      if (!this.hit.after) return '';\n      return this.hit.after.substring(0, Math.min(this.hit.after.length, this.charsOnSide));\n    }\n  }]);\n\n  return TruncatedHit;\n}();\n\nexport { TruncatedHit as default };","/**\n */\nexport default function asArray(value) {\n  if (value === undefined) return [];\n\n  if (!Array.isArray(value)) {\n    return [value];\n  }\n\n  return value;\n}","// Only remove security related tags and attributes. Allow each other.\nvar liberal = {}; // No html at all. Only text will remain.\n\nvar noHtml = {\n  ALLOWED_TAGS: []\n}; // Presentation API 2 suggestion.\n\nvar iiif = {\n  ALLOWED_ATTR: ['href', 'src', 'alt'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'i', 'img', 'p', 'span']\n}; // Rule set that is used in Mirador 2.\n\nvar mirador2 = {\n  ALLOWED_ATTR: ['href', 'target', 'src', 'alt', 'dir'],\n  ALLOWED_TAGS: ['a', 'b', 'br', 'i', 'img', 'p', 'span', 'strong', 'em', 'ul', 'ol', 'li']\n};\nvar htmlRules = {\n  iiif: iiif,\n  liberal: liberal,\n  mirador2: mirador2,\n  noHtml: noHtml\n};\nexport default htmlRules;","/** Extract metadata from an image File */\nexport function readImageMetadata(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.addEventListener('load', function () {\n      var image = new Image();\n      image.addEventListener('load', function () {\n        resolve({\n          height: image.height,\n          name: file.name,\n          type: file.type,\n          url: reader.result,\n          width: image.width\n        });\n      });\n      image.src = reader.result;\n    });\n    reader.readAsDataURL(file);\n  });\n}","export var OSDReferences = {\n  /** */\n  get: function get(windowId) {\n    return this.refs[windowId];\n  },\n  refs: {},\n\n  /** */\n  set: function set(windowId, ref) {\n    this.refs[windowId] = ref;\n  }\n};","/* eslint-disable sort-keys */\nvar ActionTypes = {\n  ADD_COMPANION_WINDOW: 'mirador/ADD_COMPANION_WINDOW',\n  UPDATE_COMPANION_WINDOW: 'mirador/UPDATE_COMPANION_WINDOW',\n  REMOVE_COMPANION_WINDOW: 'mirador/REMOVE_COMPANION_WINDOW',\n  TOGGLE_TOC_NODE: 'mirador/TOGGLE_TOC_NODE',\n  UPDATE_WINDOW: 'mirador/UPDATE_WINDOW',\n  REQUEST_CANVAS_ANNOTATIONS: 'mirador/REQUEST_CANVAS_ANNOTATIONS',\n  HOVER_ANNOTATION: 'mirador/HOVER_ANNOTATION',\n  REQUEST_ANNOTATION: 'mirador/REQUEST_ANNOTATION',\n  RECEIVE_ANNOTATION: 'mirador/RECEIVE_ANNOTATION',\n  RECEIVE_ANNOTATION_FAILURE: 'mirador/RECEIVE_ANNOTATION_FAILURE',\n  DESELECT_ANNOTATION: 'mirador/DESELECT_ANNOTATION',\n  SELECT_ANNOTATION: 'mirador/SELECT_ANNOTATION',\n  TOGGLE_ANNOTATION_DISPLAY: 'mirador/TOGGLE_ANNOTATION_DISPLAY',\n  FOCUS_WINDOW: 'mirador/FOCUS_WINDOW',\n  SET_WORKSPACE_FULLSCREEN: 'mirador/SET_WORKSPACE_FULLSCREEN',\n  SET_WORKSPACE_VIEWPORT_POSITION: 'mirador/SET_WORKSPACE_VIEWPORT_POSITION',\n  ADD_MANIFEST: 'mirador/ADD_MANIFEST',\n  ADD_WINDOW: 'mirador/ADD_WINDOW',\n  ADD_ERROR: 'mirador/ADD_ERROR',\n  IMPORT_CONFIG: 'mirador/IMPORT_CONFIG',\n  IMPORT_MIRADOR_STATE: 'mirador/IMPORT_MIRADOR_STATE',\n  SET_CANVAS: 'mirador/SET_CANVAS',\n  MAXIMIZE_WINDOW: 'mirador/MAXIMIZE_WINDOW',\n  MINIMIZE_WINDOW: 'mirador/MINIMIZE_WINDOW',\n  UPDATE_WINDOW_POSITION: 'mirador/UPDATE_WINDOW_POSITION',\n  SET_WINDOW_SIZE: 'mirador/SET_WINDOW_SIZE',\n  REMOVE_WINDOW: 'mirador/REMOVE_WINDOW',\n  PICK_WINDOWING_SYSTEM: 'mirador/PICK_WINDOWING_SYSTEM',\n  REQUEST_MANIFEST: 'mirador/REQUEST_MANIFEST',\n  RECEIVE_MANIFEST: 'mirador/RECEIVE_MANIFEST',\n  RECEIVE_MANIFEST_FAILURE: 'mirador/RECEIVE_MANIFEST_FAILURE',\n  REMOVE_ERROR: 'mirador/REMOVE_ERROR',\n  SET_CONFIG: 'mirador/SET_CONFIG',\n  UPDATE_WORKSPACE: 'mirador/UPDATE_WORKSPACE',\n  SET_WINDOW_THUMBNAIL_POSITION: 'mirador/SET_WINDOW_THUMBNAIL_POSITION',\n  SET_WINDOW_VIEW_TYPE: 'mirador/SET_WINDOW_VIEW_TYPE',\n  SET_WORKSPACE_ADD_VISIBILITY: 'mirador/SET_WORKSPACE_ADD_VISIBILITY',\n  TOGGLE_WINDOW_SIDE_BAR: 'mirador/TOGGLE_WINDOW_SIDE_BAR',\n  TOGGLE_DRAGGING: 'mirador/TOGGLE_DRAGGING',\n  TOGGLE_ZOOM_CONTROLS: 'mirador/TOGGLE_ZOOM_CONTROLS',\n  UPDATE_CONFIG: 'mirador/UPDATE_CONFIG',\n  REMOVE_MANIFEST: 'mirador/REMOVE_MANIFEST',\n  REQUEST_INFO_RESPONSE: 'mirador/REQUEST_INFO_RESPONSE',\n  RECEIVE_INFO_RESPONSE: 'mirador/RECEIVE_INFO_RESPONSE',\n  RECEIVE_DEGRADED_INFO_RESPONSE: 'mirador/RECEIVE_DEGRADED_INFO_RESPONSE',\n  RECEIVE_INFO_RESPONSE_FAILURE: 'mirador/RECEIVE_INFO_RESPONSE_FAILURE',\n  REMOVE_INFO_RESPONSE: 'mirador/REMOVE_INFO_RESPONSE',\n  UPDATE_WORKSPACE_MOSAIC_LAYOUT: 'mirador/UPDATE_WORKSPACE_MOSAIC_LAYOUT',\n  UPDATE_VIEWPORT: 'mirador/UPDATE_VIEWPORT',\n  UPDATE_ELASTIC_WINDOW_LAYOUT: 'mirador/UPDATE_ELASTIC_WINDOW_LAYOUT',\n  ADD_AUTHENTICATION_REQUEST: 'mirador/ADD_AUTHENTICATION_REQUEST',\n  RESOLVE_AUTHENTICATION_REQUEST: 'mirador/RESOLVE_AUTHENTICATION_REQUEST',\n  REQUEST_ACCESS_TOKEN: 'mirador/REQUEST_ACCESS_TOKEN',\n  RECEIVE_ACCESS_TOKEN: 'mirador/RECEIVE_ACCESS_TOKEN',\n  RECEIVE_ACCESS_TOKEN_FAILURE: 'mirador/RECEIVE_ACCESS_TOKEN_FAILURE',\n  RESET_AUTHENTICATION_STATE: 'mirador/RESET_AUTHENTICATION_STATE',\n  CLEAR_ACCESS_TOKEN_QUEUE: 'mirador/CLEAR_ACCESS_TOKEN_QUEUE',\n  REQUEST_SEARCH: 'mirador/REQUEST_SEARCH',\n  RECEIVE_SEARCH: 'mirador/RECEIVE_SEARCH',\n  RECEIVE_SEARCH_FAILURE: 'mirador/RECEIVE_SEARCH_FAILURE',\n  REMOVE_SEARCH: 'mirador/REMOVE_SEARCH',\n  SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS: 'mirador/SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS',\n  UPDATE_LAYERS: 'mirador/UPDATE_LAYERS',\n  ADD_RESOURCE: 'mirador/ADD_RESOURCE',\n  REMOVE_RESOURCE: 'mirador/REMOVE_RESOURCE',\n  SHOW_COLLECTION_DIALOG: 'mirador/SHOW_COLLECTION_DIALOG',\n  HIDE_COLLECTION_DIALOG: 'mirador/HIDE_COLLECTION_DIALOG'\n};\nexport default ActionTypes;","import ActionTypes from './action-types';\n/**\n * Request annotations on a canvas\n *\n * NOTE: there is no corresponding reducer; the expected API is sagas will\n *  pick this action up and act on it accordingly.\n */\n\nexport function requestCanvasAnnotations(windowId, canvasId) {\n  return {\n    canvasId: canvasId,\n    type: ActionTypes.REQUEST_CANVAS_ANNOTATIONS,\n    windowId: windowId\n  };\n}\n/**\n * requestAnnotation - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function requestAnnotation(targetId, annotationId) {\n  return {\n    annotationId: annotationId,\n    targetId: targetId,\n    type: ActionTypes.REQUEST_ANNOTATION\n  };\n}\n/**\n * receiveAnnotation - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @param  {Object} annotationJson\n * @memberof ActionCreators\n */\n\nexport function receiveAnnotation(targetId, annotationId, annotationJson) {\n  return {\n    annotationId: annotationId,\n    annotationJson: annotationJson,\n    targetId: targetId,\n    type: ActionTypes.RECEIVE_ANNOTATION\n  };\n}\n/**\n * receiveAnnotationFailure - action creator\n *\n * @param  {String} targetId\n * @param  {String} annotationId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveAnnotationFailure(targetId, annotationId, error) {\n  return {\n    annotationId: annotationId,\n    error: error,\n    targetId: targetId,\n    type: ActionTypes.RECEIVE_ANNOTATION_FAILURE\n  };\n}\n/**\n * selectAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function selectAnnotation(windowId, annotationId) {\n  return {\n    annotationId: annotationId,\n    type: ActionTypes.SELECT_ANNOTATION,\n    windowId: windowId\n  };\n}\n/**\n * deselectAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} targetId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function deselectAnnotation(windowId, annotationId) {\n  return {\n    annotationId: annotationId,\n    type: ActionTypes.DESELECT_ANNOTATION,\n    windowId: windowId\n  };\n}\n/**\n * toggleAnnotationDisplay - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function toggleAnnotationDisplay(windowId) {\n  return {\n    type: ActionTypes.TOGGLE_ANNOTATION_DISPLAY,\n    windowId: windowId\n  };\n}\n/**\n * toggleAnnotationDisplay - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function hoverAnnotation(windowId, annotationIds) {\n  return {\n    annotationIds: annotationIds,\n    type: ActionTypes.HOVER_ANNOTATION,\n    windowId: windowId\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\n/**\n * addAuthenticationRequest - action creator\n *\n * @param  {String} windowId\n * @param  {String} id\n * @memberof ActionCreators\n */\n\nexport function addAuthenticationRequest(windowId, id) {\n  var profile = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  return {\n    id: id,\n    profile: profile,\n    type: ActionTypes.ADD_AUTHENTICATION_REQUEST,\n    windowId: windowId\n  };\n}\n/**\n * resolveAuthenticationRequest - action creator\n * Triggered when we might have an IIIF auth cookie available (but we\n *   can't be really sure until try the access token)\n *\n * @param {String} id\n * @memberof ActionCreators\n */\n\nexport function resolveAuthenticationRequest(id, tokenServiceId, props) {\n  return _objectSpread({\n    id: id,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RESOLVE_AUTHENTICATION_REQUEST\n  }, props);\n}\n/**\n * requestAccessToken - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {String} authId\n * @memberof ActionCreators\n */\n\nexport function requestAccessToken(serviceId, authId) {\n  return {\n    authId: authId,\n    serviceId: serviceId,\n    type: ActionTypes.REQUEST_ACCESS_TOKEN\n  };\n}\n/**\n * receiveAccessToken - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {Object} json\n * @memberof ActionCreators\n */\n\nexport function receiveAccessToken(authId, serviceId, json) {\n  return {\n    authId: authId,\n    json: json,\n    serviceId: serviceId,\n    type: ActionTypes.RECEIVE_ACCESS_TOKEN\n  };\n}\n/**\n * receiveAccessTokenFailure - action creator\n * @private\n *\n * @param  {String} serviceId\n * @param  {Object} error\n * @memberof ActionCreators\n */\n\nexport function receiveAccessTokenFailure(authId, serviceId, error) {\n  return {\n    authId: authId,\n    error: error,\n    serviceId: serviceId,\n    type: ActionTypes.RECEIVE_ACCESS_TOKEN_FAILURE\n  };\n}\n/**\n * resolveAccessTokenRequest - action creator\n *\n * @param {Object} message\n * @memberof ActionCreators\n */\n\nexport function resolveAccessTokenRequest(authServiceId, tokenServiceId, json) {\n  if (!json.accessToken) return receiveAccessTokenFailure(authServiceId, tokenServiceId, json);\n  return receiveAccessToken(authServiceId, tokenServiceId, json);\n}\n/**\n * Resets authentication state for a token service\n */\n\nexport function resetAuthenticationState(_ref) {\n  var authServiceId = _ref.authServiceId,\n      tokenServiceId = _ref.tokenServiceId;\n  return {\n    id: authServiceId,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RESET_AUTHENTICATION_STATE\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\nimport { getNextCanvasGrouping, getPreviousCanvasGrouping, getCanvasGrouping } from '../selectors';\n/**\n * setCanvas - action creator\n *\n * @param  {String} windowId\n * @param  {String} canvasId\n * @memberof ActionCreators\n */\n\nexport function setCanvas(windowId, canvasId) {\n  var newGroup = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return function (dispatch, getState) {\n    var state = getState();\n    var visibleCanvases = newGroup;\n\n    if (!visibleCanvases) {\n      var group = getCanvasGrouping(state, {\n        canvasId: canvasId,\n        windowId: windowId\n      });\n      visibleCanvases = (group || []).map(function (c) {\n        return c.id;\n      });\n    }\n\n    dispatch(_objectSpread(_objectSpread({}, options), {}, {\n      canvasId: canvasId,\n      type: ActionTypes.SET_CANVAS,\n      visibleCanvases: visibleCanvases,\n      windowId: windowId\n    }));\n  };\n}\n/** Set the window's canvas to the next canvas grouping */\n\nexport function setNextCanvas(windowId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var newGroup = getNextCanvasGrouping(state, {\n      windowId: windowId\n    });\n    var ids = (newGroup || []).map(function (c) {\n      return c.id;\n    });\n    newGroup && dispatch(setCanvas(windowId, ids[0], ids));\n  };\n}\n/** Set the window's canvas to the previous canvas grouping */\n\nexport function setPreviousCanvas(windowId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var newGroup = getPreviousCanvasGrouping(state, {\n      windowId: windowId\n    });\n    var ids = (newGroup || []).map(function (c) {\n      return c.id;\n    });\n    newGroup && dispatch(setCanvas(windowId, ids[0], ids));\n  };\n}\n/**\n *\n * @param windowId\n * @param payload\n * @returns {{payload: *, type: string, windowId: *}}\n */\n\nexport function updateViewport(windowId, payload) {\n  return {\n    payload: payload,\n    type: ActionTypes.UPDATE_VIEWPORT,\n    windowId: windowId\n  };\n}","import ActionTypes from './action-types';\n/**\n * add a manifest to the resource catalog\n * @param {string} manifestId\n */\n\nexport function addResource(manifestId) {\n  var manifestJson = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var payload = arguments.length > 2 ? arguments[2] : undefined;\n  return {\n    manifestId: manifestId,\n    manifestJson: manifestJson,\n    payload: payload,\n    type: ActionTypes.ADD_RESOURCE\n  };\n}\n/** remove a manifest from the resource catalog */\n\nexport function removeResource(manifestId) {\n  return {\n    manifestId: manifestId,\n    type: ActionTypes.REMOVE_RESOURCE\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\nimport { getCompanionWindowIdsForPosition, getManuallyExpandedNodeIds, getVisibleNodeIds } from '../selectors';\nvar defaultProps = {\n  content: null,\n  position: null\n};\n/** */\n\nexport function addCompanionWindow(windowId, payload) {\n  var defaults = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultProps;\n  var id = \"cw-\".concat(uuid());\n  return {\n    id: id,\n    payload: _objectSpread(_objectSpread(_objectSpread({}, defaults), payload), {}, {\n      id: id,\n      windowId: windowId\n    }),\n    type: ActionTypes.ADD_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function addOrUpdateCompanionWindow(windowId, payload) {\n  var defaults = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultProps;\n  return function (dispatch, getState) {\n    var state = getState();\n    var position = payload.position;\n    var updatableWindowId = position === 'left' && getCompanionWindowIdsForPosition(state, {\n      position: position,\n      windowId: windowId\n    })[0];\n\n    if (updatableWindowId) {\n      dispatch(updateCompanionWindow(windowId, updatableWindowId, payload));\n    } else {\n      dispatch(addCompanionWindow(windowId, payload, defaults));\n    }\n  };\n}\n/** */\n\nexport function updateCompanionWindow(windowId, id, payload) {\n  return {\n    id: id,\n    payload: payload,\n    type: ActionTypes.UPDATE_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function removeCompanionWindow(windowId, id) {\n  return {\n    id: id,\n    type: ActionTypes.REMOVE_COMPANION_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function toggleNode(windowId, id, nodeId) {\n  return function (dispatch, getState) {\n    var state = getState();\n    var collapsedNodeIds = getManuallyExpandedNodeIds(state, {\n      companionWindowId: id\n    }, false);\n    var expandedNodeIds = getManuallyExpandedNodeIds(state, {\n      companionWindowId: id\n    }, true);\n    var visibleNodeIds = getVisibleNodeIds(state, {\n      id: id,\n      windowId: windowId\n    });\n    var expand = collapsedNodeIds.indexOf(nodeId) !== -1 || expandedNodeIds.indexOf(nodeId) === -1 && visibleNodeIds.indexOf(nodeId) === -1;\n    return dispatch({\n      id: id,\n      payload: _defineProperty({}, nodeId, {\n        expanded: expand\n      }),\n      type: ActionTypes.TOGGLE_TOC_NODE,\n      windowId: windowId\n    });\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\n/**\n * importConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function importConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.IMPORT_CONFIG\n  };\n}\n/**\n * setConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function setConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.SET_CONFIG\n  };\n}\n/**\n * updateConfig - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function updateConfig(config) {\n  return {\n    config: config,\n    type: ActionTypes.UPDATE_CONFIG\n  };\n}\n/**\n * importMiradorState - action creator\n *\n * @param  {Object} config\n * @memberof ActionCreators\n */\n\nexport function importMiradorState(state) {\n  var newState = _objectSpread(_objectSpread({}, state), {}, {\n    workspace: _objectSpread(_objectSpread({}, state.workspace), {}, {\n      id: uuid()\n    })\n  });\n\n  return {\n    state: newState,\n    type: ActionTypes.IMPORT_MIRADOR_STATE\n  };\n}","import ActionTypes from './action-types';\n/** */\n\nexport function updateElasticWindowLayout(windowId, payload) {\n  return {\n    payload: payload,\n    type: ActionTypes.UPDATE_ELASTIC_WINDOW_LAYOUT,\n    windowId: windowId\n  };\n}","import { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\n/**\n * addError - action creator\n * @param {string} error\n */\n\nexport function addError(error) {\n  return {\n    id: \"error-\".concat(uuid()),\n    message: error,\n    type: ActionTypes.ADD_ERROR\n  };\n}\n/**\n * removeError - action creator\n * @param {string} id\n */\n\nexport function removeError(id) {\n  return {\n    id: id,\n    type: ActionTypes.REMOVE_ERROR\n  };\n}","import ActionTypes from './action-types';\n/**\n * requestInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function requestInfoResponse(infoId, imageResource, windowId) {\n  return {\n    imageResource: imageResource,\n    infoId: infoId,\n    type: ActionTypes.REQUEST_INFO_RESPONSE,\n    windowId: windowId\n  };\n}\n/**\n * receiveInfoResponse - action creator\n *\n * @param  {String} infoId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveInfoResponse(infoId, infoJson, ok, tokenServiceId) {\n  return {\n    infoId: infoId,\n    infoJson: infoJson,\n    ok: ok,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_INFO_RESPONSE\n  };\n}\n/**\n * receiveDegradedInfoResponse - action creator\n *\n * @param  {String} infoId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveDegradedInfoResponse(infoId, infoJson, ok, tokenServiceId, windowId) {\n  return {\n    infoId: infoId,\n    infoJson: infoJson,\n    ok: ok,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_DEGRADED_INFO_RESPONSE,\n    windowId: windowId\n  };\n}\n/**\n * receiveInfoResponseFailure - action creator\n *\n * @param  {String} infoId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveInfoResponseFailure(infoId, error, tokenServiceId) {\n  return {\n    error: error,\n    infoId: infoId,\n    tokenServiceId: tokenServiceId,\n    type: ActionTypes.RECEIVE_INFO_RESPONSE_FAILURE\n  };\n}\n/**\n * fetchInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function fetchInfoResponse(_ref) {\n  var imageId = _ref.imageId,\n      imageResource = _ref.imageResource,\n      windowId = _ref.windowId;\n  var imageService = imageResource && imageResource.getServices()[0];\n  var infoId = imageId || imageService.id;\n  return requestInfoResponse(infoId, imageService, windowId);\n}\n/**\n * removeInfoResponse - action creator\n *\n * @param  {String} infoId\n * @memberof ActionCreators\n */\n\nexport function removeInfoResponse(infoId) {\n  return {\n    infoId: infoId,\n    type: ActionTypes.REMOVE_INFO_RESPONSE\n  };\n}","import ActionTypes from './action-types';\n/**\n * updateLayers - action creator\n * @param {string} id\n */\n\nexport function updateLayers(windowId, canvasId, payload) {\n  return {\n    canvasId: canvasId,\n    payload: payload,\n    type: ActionTypes.UPDATE_LAYERS,\n    windowId: windowId\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ActionTypes from './action-types';\n/**\n * requestManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function requestManifest(manifestId, properties) {\n  return {\n    manifestId: manifestId,\n    properties: properties,\n    type: ActionTypes.REQUEST_MANIFEST\n  };\n}\n/**\n * receiveManifest - action creator\n *\n * @param  {String} manifestId\n * @param  {Object} manifestJson\n * @memberof ActionCreators\n */\n\nexport function receiveManifest(manifestId, manifestJson) {\n  return {\n    manifestId: manifestId,\n    manifestJson: manifestJson,\n    type: ActionTypes.RECEIVE_MANIFEST\n  };\n}\n/**\n * receiveManifestFailure - action creator\n *\n * @param  {String} windowId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveManifestFailure(manifestId, error) {\n  return {\n    error: error,\n    manifestId: manifestId,\n    type: ActionTypes.RECEIVE_MANIFEST_FAILURE\n  };\n}\n/**\n * fetchManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function fetchManifest(manifestId, properties) {\n  return requestManifest(manifestId, _objectSpread(_objectSpread({}, properties), {}, {\n    isFetching: true\n  }));\n}\n/**\n * removeManifest - action creator\n *\n * @param  {String} manifestId\n * @memberof ActionCreators\n */\n\nexport function removeManifest(manifestId) {\n  return {\n    manifestId: manifestId,\n    type: ActionTypes.REMOVE_MANIFEST\n  };\n}","import ActionTypes from './action-types';\n/**\n * requestSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {String} query\n * @memberof ActionCreators\n */\n\nexport function requestSearch(windowId, companionWindowId, searchId, query) {\n  return {\n    companionWindowId: companionWindowId,\n    query: query,\n    searchId: searchId,\n    type: ActionTypes.REQUEST_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * receiveSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {Object} searchJson\n * @memberof ActionCreators\n */\n\nexport function receiveSearch(windowId, companionWindowId, searchId, searchJson) {\n  return {\n    companionWindowId: companionWindowId,\n    searchId: searchId,\n    searchJson: searchJson,\n    type: ActionTypes.RECEIVE_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * receiveSearchFailure - action creator\n *\n * @param  {String} windowId\n * @param  {String} searchId\n * @param  {String} error\n * @memberof ActionCreators\n */\n\nexport function receiveSearchFailure(windowId, companionWindowId, searchId, error) {\n  return {\n    companionWindowId: companionWindowId,\n    error: error,\n    searchId: searchId,\n    type: ActionTypes.RECEIVE_SEARCH_FAILURE,\n    windowId: windowId\n  };\n}\n/**\n * removeSearch - action creator\n *\n * @param  {String} windowId\n * @param  {String} companionWindowId\n * @memberof ActionCreators\n */\n\nexport function removeSearch(windowId, companionWindowId) {\n  return {\n    companionWindowId: companionWindowId,\n    type: ActionTypes.REMOVE_SEARCH,\n    windowId: windowId\n  };\n}\n/**\n * fetchSearch - action creator\n *\n * @param  {String} searchId\n * @param  {String} query\n * @memberof ActionCreators\n */\n\nexport function fetchSearch(windowId, companionWindowId, searchId, query) {\n  return requestSearch(windowId, companionWindowId, searchId, query);\n}\n/**\n * setContentSearchCurrentAnnotation - action creator\n *\n * @param  {String} windowId\n * @param  {String} annotationId\n * @memberof ActionCreators\n */\n\nexport function setContentSearchCurrentAnnotation(windowId, companionWindowId, annotationIds) {\n  return {\n    annotationIds: annotationIds,\n    companionWindowId: companionWindowId,\n    type: ActionTypes.SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS,\n    windowId: windowId\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { v4 as uuid } from 'uuid';\nimport ActionTypes from './action-types';\nimport { miradorSlice } from '../selectors/utils';\n/**\n * focusWindow - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function focusWindow(windowId) {\n  var pan = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  return {\n    pan: pan,\n    type: ActionTypes.FOCUS_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * addWindow - action creator\n *\n * @param  {Object} options\n * @memberof ActionCreators\n */\n\nexport function addWindow(_ref) {\n  var companionWindows = _ref.companionWindows,\n      manifest = _ref.manifest,\n      options = _objectWithoutProperties(_ref, [\"companionWindows\", \"manifest\"]);\n\n  return function (dispatch, getState) {\n    var _miradorSlice = miradorSlice(getState()),\n        config = _miradorSlice.config,\n        _miradorSlice$workspa = _miradorSlice.workspace.windowIds,\n        windowIds = _miradorSlice$workspa === void 0 ? [] : _miradorSlice$workspa;\n\n    var numWindows = windowIds.length;\n    var windowId = options.id || \"window-\".concat(uuid());\n    var cwThumbs = \"cw-\".concat(uuid());\n    var defaultCompanionWindows = [{\n      content: 'thumbnailNavigation',\n      \"default\": true,\n      id: cwThumbs,\n      position: options.thumbnailNavigationPosition || config.thumbnailNavigation.defaultPosition,\n      windowId: windowId\n    }].concat(_toConsumableArray((companionWindows || []).map(function (cw, i) {\n      return _objectSpread(_objectSpread({}, cw), {}, {\n        id: \"cw-\".concat(uuid())\n      });\n    })));\n\n    if (options.sideBarPanel || config.window.defaultSideBarPanel || config.window.sideBarPanel) {\n      defaultCompanionWindows.unshift({\n        content: options.sideBarPanel || options.defaultSearchQuery && 'search' || config.window.defaultSideBarPanel || config.window.sideBarPanel,\n        \"default\": true,\n        id: \"cw-\".concat(uuid()),\n        position: 'left',\n        windowId: windowId\n      });\n    }\n\n    var defaultOptions = {\n      canvasId: undefined,\n      collectionIndex: 0,\n      companionAreaOpen: true,\n      companionWindowIds: defaultCompanionWindows.map(function (cw) {\n        return cw.id;\n      }),\n      draggingEnabled: true,\n      highlightAllAnnotations: config.window.highlightAllAnnotations || false,\n      id: windowId,\n      manifestId: null,\n      maximized: false,\n      rangeId: null,\n      rotation: 0,\n      selectedAnnotations: {},\n      sideBarOpen: config.window.sideBarOpenByDefault !== undefined ? config.window.sideBarOpenByDefault || !!options.defaultSearchQuery : config.window.sideBarOpen || !!options.defaultSearchQuery,\n      sideBarPanel: options.sideBarPanel || config.window.defaultSideBarPanel || config.window.sideBarPanel,\n      thumbnailNavigationId: cwThumbs\n    };\n\n    var elasticLayout = _objectSpread(_objectSpread({}, config.window.elastic || {\n      height: 400,\n      width: 480\n    }), {}, {\n      x: 200 + (Math.floor(numWindows / 10) * 50 + numWindows * 30 % 300),\n      y: 200 + numWindows * 50 % 300\n    });\n\n    dispatch({\n      companionWindows: defaultCompanionWindows,\n      elasticLayout: elasticLayout,\n      manifest: manifest,\n      type: ActionTypes.ADD_WINDOW,\n      window: _objectSpread(_objectSpread({}, defaultOptions), options)\n    });\n  };\n}\n/** */\n\nexport function updateWindow(id, payload) {\n  return {\n    id: id,\n    payload: payload,\n    type: ActionTypes.UPDATE_WINDOW\n  };\n}\n/**\n * maximizeWindow\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function maximizeWindow(windowId, layout) {\n  return {\n    type: ActionTypes.MAXIMIZE_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * minimizeWindow\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function minimizeWindow(windowId) {\n  return {\n    type: ActionTypes.MINIMIZE_WINDOW,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function setCompanionAreaOpen(id, companionAreaOpen) {\n  return {\n    id: id,\n    payload: {\n      companionAreaOpen: companionAreaOpen\n    },\n    type: ActionTypes.UPDATE_WINDOW\n  };\n}\n/**\n * removeWindow - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function removeWindow(windowId) {\n  return {\n    type: ActionTypes.REMOVE_WINDOW,\n    windowId: windowId\n  };\n}\n/**\n * toggleWindowSideBar - action creator\n *\n * @param  {String} windowId\n * @memberof ActionCreators\n */\n\nexport function toggleWindowSideBar(windowId) {\n  return {\n    type: ActionTypes.TOGGLE_WINDOW_SIDE_BAR,\n    windowId: windowId\n  };\n}\n/**\n * setWindowThumbnailPosition - action creator\n *\n * @param  {String} windowId\n * @param  {String} position\n * @memberof ActionCreators\n */\n\nexport function setWindowThumbnailPosition(windowId, position) {\n  return function (dispatch, getState) {\n    var _getState = getState(),\n        windows = _getState.windows;\n\n    var thumbnailNavigationId = windows[windowId].thumbnailNavigationId;\n    dispatch({\n      id: thumbnailNavigationId,\n      payload: {\n        position: position\n      },\n      type: ActionTypes.UPDATE_COMPANION_WINDOW\n    });\n  };\n}\n/**\n * setWindowViewType - action creator\n *\n * @param  {String} windowId\n * @param  {String} viewType\n * @memberof ActionCreators\n */\n\nexport function setWindowViewType(windowId, viewType) {\n  return {\n    type: ActionTypes.SET_WINDOW_VIEW_TYPE,\n    viewType: viewType,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function showCollectionDialog(manifestId) {\n  var collectionPath = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var windowId = arguments.length > 2 ? arguments[2] : undefined;\n  return {\n    collectionPath: collectionPath,\n    manifestId: manifestId,\n    type: ActionTypes.SHOW_COLLECTION_DIALOG,\n    windowId: windowId\n  };\n}\n/** */\n\nexport function hideCollectionDialog(windowId) {\n  return {\n    type: ActionTypes.HIDE_COLLECTION_DIALOG,\n    windowId: windowId\n  };\n}","import ActionTypes from './action-types';\n/**\n * updateWorkspace - action creator\n *\n * @param {Object} config\n */\n\nexport function updateWorkspace(config) {\n  return {\n    config: config,\n    type: ActionTypes.UPDATE_WORKSPACE\n  };\n}\n/**\n * setWorkspaceFullscreen - action creator\n *\n * @param  {Boolean} isFullscreenEnabled\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceFullscreen(isFullscreenEnabled) {\n  return {\n    isFullscreenEnabled: isFullscreenEnabled,\n    type: ActionTypes.SET_WORKSPACE_FULLSCREEN\n  };\n}\n/**\n * toggleZoomControls - action creator\n * @param {Boolean} showZoomControls\n * @memberof ActionCreators\n*/\n\nexport function toggleZoomControls(showZoomControls) {\n  return {\n    showZoomControls: showZoomControls,\n    type: ActionTypes.TOGGLE_ZOOM_CONTROLS\n  };\n}\n/**\n * updateWorkspaceMosaicLayout - action creator\n *\n * @param  {Object} layout\n * @memberof ActionCreators\n */\n\nexport function updateWorkspaceMosaicLayout(layout) {\n  return {\n    layout: layout,\n    type: ActionTypes.UPDATE_WORKSPACE_MOSAIC_LAYOUT\n  };\n}\n/**\n * updateWorkspaceMosaicLayout - action creator\n *\n * @param  {Object} isWorkspaceAddVisible\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceAddVisibility(isWorkspaceAddVisible) {\n  return {\n    isWorkspaceAddVisible: isWorkspaceAddVisible,\n    type: ActionTypes.SET_WORKSPACE_ADD_VISIBILITY\n  };\n}\n/**\n * setWorkspaceViewportPosition - action creator\n *\n * @param  {Object} position\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceViewportPosition(_ref) {\n  var x = _ref.x,\n      y = _ref.y;\n  return {\n    payload: {\n      position: {\n        x: x,\n        y: y\n      }\n    },\n    type: ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION\n  };\n}\n/**\n * setWorkspaceViewportDimensions - action creator\n *\n * @param  {Object} position\n * @memberof ActionCreators\n */\n\nexport function setWorkspaceViewportDimensions(_ref2) {\n  var width = _ref2.width,\n      height = _ref2.height;\n  return {\n    payload: {\n      position: {\n        height: height,\n        width: width\n      }\n    },\n    type: ActionTypes.SET_WORKSPACE_VIEWPORT_POSITION\n  };\n}\n/**\n * toggleDraggingEnabled - action creator\n */\n\nexport function toggleDraggingEnabled() {\n  return {\n    type: ActionTypes.TOGGLE_DRAGGING\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport compact from 'lodash/compact';\nimport flatten from 'lodash/flatten';\nimport { v4 as uuid } from 'uuid';\n/**\n * A modeled WebAnnotation item\n */\n\nvar AnnotationItem = /*#__PURE__*/function () {\n  /** */\n  function AnnotationItem() {\n    var resource = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, AnnotationItem);\n\n    this.resource = resource;\n  }\n  /** */\n\n\n  _createClass(AnnotationItem, [{\n    key: \"isOnlyTag\",\n    value: function isOnlyTag() {\n      return this.motivations.length === 1 && this.motivations[0] === 'tagging';\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      this._id = this._id || this.resource.id || uuid(); // eslint-disable-line no-underscore-dangle\n\n      return this._id; // eslint-disable-line no-underscore-dangle\n    }\n    /** */\n\n  }, {\n    key: \"targetId\",\n    get: function get() {\n      var target = this.target[0];\n\n      switch (typeof target) {\n        case 'string':\n          return target.replace(/#?xywh=(.*)$/, '');\n\n        case 'object':\n          return target.source && target.source.id || target.source || target.id;\n\n        default:\n          return null;\n      }\n    }\n    /**\n     * @return {[Array]}\n     */\n\n  }, {\n    key: \"motivations\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.motivation)));\n    }\n    /** */\n\n  }, {\n    key: \"body\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.body)));\n    }\n    /** */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return this.body;\n    }\n    /** */\n\n  }, {\n    key: \"tags\",\n    get: function get() {\n      if (this.isOnlyTag()) {\n        return this.body.map(function (r) {\n          return r.value;\n        });\n      }\n\n      return this.body.filter(function (r) {\n        return r.purpose === 'tagging';\n      }).map(function (r) {\n        return r.value;\n      });\n    }\n    /** */\n\n  }, {\n    key: \"target\",\n    get: function get() {\n      return flatten(compact(new Array(this.resource.target)));\n    }\n    /** */\n\n  }, {\n    key: \"chars\",\n    get: function get() {\n      if (this.isOnlyTag()) return null;\n      return this.body.filter(function (r) {\n        return r.purpose !== 'tagging';\n      }).map(function (r) {\n        return r.value;\n      }).join(' ');\n    }\n    /** */\n\n  }, {\n    key: \"selector\",\n    get: function get() {\n      var target = this.target[0];\n\n      switch (typeof target) {\n        case 'string':\n          return target;\n\n        case 'object':\n          return flatten(compact(new Array(target.selector)));\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"svgSelector\",\n    get: function get() {\n      var selector = this.selector;\n\n      switch (typeof selector) {\n        case 'string':\n          return null;\n\n        case 'object':\n          return selector.find(function (s) {\n            return s.type && s.type === 'SvgSelector';\n          });\n\n        default:\n          return null;\n      }\n    }\n    /** */\n\n  }, {\n    key: \"fragmentSelector\",\n    get: function get() {\n      var selector = this.selector;\n      var match;\n      var fragmentSelector;\n\n      switch (typeof selector) {\n        case 'string':\n          match = selector.match(/xywh=(.*)$/);\n          break;\n\n        case 'object':\n          fragmentSelector = selector.find(function (s) {\n            return s.type && s.type === 'FragmentSelector';\n          });\n          match = fragmentSelector && fragmentSelector.value.match(/xywh=(.*)$/);\n          break;\n\n        default:\n          return null;\n      }\n\n      return match && match[1].split(',').map(function (str) {\n        return parseInt(str, 10);\n      });\n    }\n  }]);\n\n  return AnnotationItem;\n}();\n\nexport { AnnotationItem as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport flatten from 'lodash/flatten';\nimport AnnotationItem from './AnnotationItem';\n/**\n * Annotation representation for IIIF Presentation v3\n * https://iiif.io/api/presentation/3.0/#55-annotation-page\n */\n\nvar AnnotationPage = /*#__PURE__*/function () {\n  /** */\n  function AnnotationPage(json, target) {\n    _classCallCheck(this, AnnotationPage);\n\n    this.json = json;\n    this.target = target;\n  }\n  /** */\n\n\n  _createClass(AnnotationPage, [{\n    key: \"present\",\n\n    /** */\n    value: function present() {\n      return this.items && this.items.length > 0;\n    }\n    /** */\n\n  }, {\n    key: \"id\",\n    get: function get() {\n      return this.json.id;\n    }\n  }, {\n    key: \"items\",\n    get: function get() {\n      var _this = this;\n\n      this._items = this._items || function () {\n        // eslint-disable-line no-underscore-dangle\n        if (!_this.json || !_this.json.items) return [];\n        return flatten([_this.json.items]).map(function (resource) {\n          return new AnnotationItem(resource);\n        });\n      }();\n\n      return this._items; // eslint-disable-line no-underscore-dangle\n    }\n    /**\n     * Alias to items for compatibility for right now.\n     */\n\n  }, {\n    key: \"resources\",\n    get: function get() {\n      return this.items;\n    }\n  }]);\n\n  return AnnotationPage;\n}();\n\nexport { AnnotationPage as default };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nimport AnnotationList from './AnnotationList';\nimport AnnotationPage from './AnnotationPage';\n/**\n * Used to determine the type of Annotation supported by a version of the IIIF\n * Presentation API.\n */\n\nvar AnnotationFactory = /*#__PURE__*/function () {\n  function AnnotationFactory() {\n    _classCallCheck(this, AnnotationFactory);\n  }\n\n  _createClass(AnnotationFactory, null, [{\n    key: \"determineAnnotation\",\n\n    /** */\n    value: function determineAnnotation(json, target) {\n      if (!json) {\n        return null;\n      } // IIIF Presentation API v3. AnnotationPage\n\n\n      if (json.type === 'AnnotationPage') {\n        return new AnnotationPage(json, target);\n      } // IIIF Presentation API v2. OpenAnnotation and SharedCanvas models\n\n\n      return new AnnotationList(json, target);\n    }\n  }]);\n\n  return AnnotationFactory;\n}();\n\nexport { AnnotationFactory as default };","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { createSelector } from 'reselect';\nimport filter from 'lodash/filter';\nimport flatten from 'lodash/flatten';\nimport AnnotationFactory from '../../lib/AnnotationFactory';\nimport { miradorSlice } from './utils';\nimport { getCanvas, getVisibleCanvasIds } from './canvases';\nimport { getConfig } from './config';\nimport { getWindow } from './getters';\n/** */\n\nexport var getAnnotations = function getAnnotations(state) {\n  return miradorSlice(state).annotations;\n};\nvar getMotivation = createSelector([getConfig, function (state, _ref) {\n  var motivations = _ref.motivations;\n  return motivations;\n}], function (config, motivations) {\n  return motivations || config.annotations.filteredMotivations;\n});\nvar getAnnotationsOnCanvas = createSelector([getCanvas, getAnnotations], function (canvas, annotations) {\n  if (!annotations || !canvas) return [];\n  if (!annotations[canvas.id]) return [];\n  return flatten(Object.values(annotations[canvas.id]));\n});\nvar getPresentAnnotationsCanvas = createSelector([getAnnotationsOnCanvas], function (annotations) {\n  return filter(Object.values(annotations).map(function (annotation) {\n    return annotation && AnnotationFactory.determineAnnotation(annotation.json);\n  }), function (annotation) {\n    return annotation && annotation.present();\n  });\n});\nvar getAnnotationsOnSelectedCanvases = createSelector([function (state, _ref2) {\n  var canvasId = _ref2.canvasId,\n      otherProps = _objectWithoutProperties(_ref2, [\"canvasId\"]);\n\n  return canvasId ? [canvasId] : getVisibleCanvasIds(state, otherProps);\n}, getAnnotations], function (canvasIds, annotations) {\n  if (!annotations || canvasIds.length === 0) return [];\n  return flatten(canvasIds.map(function (targetId) {\n    return annotations[targetId] && Object.values(annotations[targetId]);\n  }));\n});\nexport var getPresentAnnotationsOnSelectedCanvases = createSelector([getAnnotationsOnSelectedCanvases], function (annotations) {\n  return filter(Object.values(annotations).map(function (annotation) {\n    return annotation && AnnotationFactory.determineAnnotation(annotation.json);\n  }), function (annotation) {\n    return annotation && annotation.present();\n  });\n});\n/**\n* Return an array of annotation resources filtered by the given motivation for a particular canvas\n* @param {Array} annotations\n* @param {Array} motivations\n* @return {Array}\n*/\n\nexport var getAnnotationResourcesByMotivationForCanvas = createSelector([getPresentAnnotationsCanvas, getMotivation], function (annotations, motivations) {\n  return filter(flatten(annotations.map(function (annotation) {\n    return annotation.resources;\n  })), function (resource) {\n    return resource.motivations.some(function (motivation) {\n      return motivations.includes(motivation);\n    });\n  });\n});\n/**\n* Return an array of annotation resources filtered by the given motivation\n* @param {Array} annotations\n* @param {Array} motivations\n* @return {Array}\n*/\n\nexport var getAnnotationResourcesByMotivation = createSelector([getPresentAnnotationsOnSelectedCanvases, getMotivation], function (annotations, motivations) {\n  return filter(flatten(annotations.map(function (annotation) {\n    return annotation.resources;\n  })), function (resource) {\n    return resource.motivations.some(function (motivation) {\n      return motivations.includes(motivation);\n    });\n  });\n});\n/**\n * Return the selected annotations IDs of a given CanvasId\n * @param {Object} state\n * @param {String} windowId\n * @param {Array} targetIds\n * @return {Array}\n */\n\nexport var getSelectedAnnotationId = createSelector([getWindow], function (_ref3) {\n  var selectedAnnotationId = _ref3.selectedAnnotationId;\n  return selectedAnnotationId;\n});\nexport var getSelectedAnnotationsOnCanvases = createSelector([getPresentAnnotationsOnSelectedCanvases, getSelectedAnnotationId], function (canvasAnnotations, selectedAnnotationId) {\n  return canvasAnnotations.map(function (annotation) {\n    return {\n      id: annotation['@id'] || annotation.id,\n      resources: annotation.resources.filter(function (r) {\n        return selectedAnnotationId === r.id;\n      })\n    };\n  }).filter(function (val) {\n    return val.resources.length > 0;\n  });\n});","function _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport { Utils } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { miradorSlice } from './utils';\nimport { getConfig } from './config';\nimport { getVisibleCanvases, selectInfoResponses } from './canvases';\nexport var getAuthProfiles = createSelector([getConfig], function (_ref) {\n  var _ref$auth = _ref.auth;\n  _ref$auth = _ref$auth === void 0 ? {} : _ref$auth;\n  var _ref$auth$serviceProf = _ref$auth.serviceProfiles,\n      serviceProfiles = _ref$auth$serviceProf === void 0 ? [] : _ref$auth$serviceProf;\n  return serviceProfiles;\n});\n/** */\n\nexport var getAccessTokens = function getAccessTokens(state) {\n  return miradorSlice(state).accessTokens || {};\n};\n/** */\n\nexport var getAuth = function getAuth(state) {\n  return miradorSlice(state).auth || {};\n};\nexport var selectCurrentAuthServices = createSelector([getVisibleCanvases, selectInfoResponses, getAuthProfiles, getAuth, function (state, _ref2) {\n  var iiifResources = _ref2.iiifResources;\n  return iiifResources;\n}], function (canvases) {\n  var infoResponses = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var serviceProfiles = arguments.length > 2 ? arguments[2] : undefined;\n  var auth = arguments.length > 3 ? arguments[3] : undefined;\n  var iiifResources = arguments.length > 4 ? arguments[4] : undefined;\n  var currentAuthResources = iiifResources;\n\n  if (!currentAuthResources && canvases) {\n    currentAuthResources = flatten(canvases.map(function (c) {\n      var miradorCanvas = new MiradorCanvas(c);\n      var images = miradorCanvas.iiifImageResources;\n      return images.map(function (i) {\n        var iiifImageService = i.getServices()[0];\n        var infoResponse = infoResponses[iiifImageService.id];\n\n        if (infoResponse && infoResponse.json) {\n          return _objectSpread(_objectSpread({}, infoResponse.json), {}, {\n            options: {}\n          });\n        }\n\n        return iiifImageService;\n      });\n    }));\n  }\n\n  if (!currentAuthResources) return [];\n  if (currentAuthResources.length === 0) return [];\n  var currentAuthServices = currentAuthResources.map(function (resource) {\n    var lastAttemptedService;\n    var services = Utils.getServices(resource);\n\n    var _iterator = _createForOfIteratorHelper(serviceProfiles),\n        _step;\n\n    try {\n      var _loop = function _loop() {\n        var authProfile = _step.value;\n        var profiledAuthServices = services.filter(function (p) {\n          return authProfile.profile === p.getProfile();\n        });\n\n        var _iterator2 = _createForOfIteratorHelper(profiledAuthServices),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var service = _step2.value;\n            lastAttemptedService = service;\n\n            if (!auth[service.id] || auth[service.id].isFetching || auth[service.id].ok) {\n              return {\n                v: service\n              };\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      };\n\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _ret = _loop();\n\n        if (typeof _ret === \"object\") return _ret.v;\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return lastAttemptedService;\n  });\n  return Object.values(currentAuthServices.reduce(function (h, service) {\n    if (service && !h[service.id]) {\n      h[service.id] = service; // eslint-disable-line no-param-reassign\n    }\n\n    return h;\n  }, {}));\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n *\n */\nvar CanvasGroupings = /*#__PURE__*/function () {\n  /**\n   */\n  function CanvasGroupings(canvases) {\n    var viewType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'single';\n\n    _classCallCheck(this, CanvasGroupings);\n\n    this.canvases = canvases;\n    this.viewType = viewType;\n    this._groupings = null; // eslint-disable-line no-underscore-dangle\n  }\n  /**\n   */\n\n\n  _createClass(CanvasGroupings, [{\n    key: \"getCanvases\",\n    value: function getCanvases(index) {\n      switch (this.viewType) {\n        case 'book':\n          return this.groupings()[Math.ceil(index / 2)];\n\n        default:\n          return this.groupings()[index];\n      }\n    }\n    /**\n     * Groups a set of canvases based on the view type. Single, is just an array\n     * of canvases, while book view creates pairs.\n     */\n\n  }, {\n    key: \"groupings\",\n    value: function groupings() {\n      if (this._groupings) {\n        // eslint-disable-line no-underscore-dangle\n        return this._groupings; // eslint-disable-line no-underscore-dangle\n      }\n\n      if (this.viewType === 'scroll') {\n        return [this.canvases];\n      }\n\n      if (this.viewType !== 'book') {\n        return this.canvases.map(function (canvas) {\n          return [canvas];\n        });\n      }\n\n      var groupings = [];\n      this.canvases.forEach(function (canvas, i) {\n        if (i === 0) {\n          groupings.push([canvas]);\n          return;\n        } // Odd page\n\n\n        if (i % 2 !== 0) {\n          groupings.push([canvas]);\n        } else {\n          // Even page\n          groupings[Math.ceil(i / 2)].push(canvas);\n        }\n      });\n      this._groupings = groupings; // eslint-disable-line no-underscore-dangle\n\n      return groupings;\n    }\n  }]);\n\n  return CanvasGroupings;\n}();\n\nexport { CanvasGroupings as default };","import { createSelector } from 'reselect';\nimport flatten from 'lodash/flatten';\nimport CanvasGroupings from '../../lib/CanvasGroupings';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { miradorSlice } from './utils';\nimport { getWindow } from './getters';\nimport { getSequence } from './sequences';\nimport { getWindowViewType } from './windows';\n/** */\n\nexport var selectInfoResponses = function selectInfoResponses(state) {\n  return miradorSlice(state).infoResponses;\n};\nexport var getCanvases = createSelector([getSequence], function (sequence) {\n  return sequence && sequence.getCanvases() || [];\n});\n/**\n* Return the canvas selected by an id\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Object}\n*/\n\nexport var getCanvas = createSelector([getSequence, function (state, _ref) {\n  var canvasId = _ref.canvasId;\n  return canvasId;\n}], function (sequence, canvasId) {\n  if (!sequence || !canvasId) return undefined;\n  return sequence.getCanvasById(canvasId);\n});\nexport var getCurrentCanvas = createSelector([getSequence, getWindow], function (sequence, window) {\n  if (!sequence || !window) return undefined;\n  if (!window.canvasId) return sequence.getCanvasByIndex(0);\n  return sequence.getCanvasById(window.canvasId);\n});\n/** */\n\nexport var getVisibleCanvasIds = createSelector([getWindow], function (window) {\n  return window && (window.visibleCanvases || window.canvasId && [window.canvasId]) || [];\n});\n/** */\n\nexport var getVisibleCanvases = createSelector([getVisibleCanvasIds, getCanvases], function (canvasIds, canvases) {\n  return (canvases || []).filter(function (c) {\n    return canvasIds.includes(c.id);\n  });\n});\n/**\n* Return the current canvases grouped by how they'll appear in the viewer\n* For book view returns groups of 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getCanvasGroupings = createSelector([getCanvases, getWindowViewType], function (canvases, view) {\n  return canvases && new CanvasGroupings(canvases, view).groupings();\n});\n/**\n* Return the current canvases selected in a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getCanvasGrouping = createSelector([getCanvasGroupings, function (state, _ref2) {\n  var canvasId = _ref2.canvasId;\n  return canvasId;\n}], function (groupings, canvasId) {\n  return groupings && groupings.find(function (group) {\n    return group.some(function (c) {\n      return c.id === canvasId;\n    });\n  }) || [];\n});\n/**\n* Return the next canvas(es) for a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getNextCanvasGrouping = createSelector([getCanvasGroupings, getCurrentCanvas], function (groupings, canvas, view) {\n  if (!groupings || !canvas) return undefined;\n  var currentGroupIndex = groupings.findIndex(function (group) {\n    return group.some(function (c) {\n      return c.id === canvas.id;\n    });\n  });\n  if (currentGroupIndex < 0 || currentGroupIndex + 1 >= groupings.length) return undefined;\n  var newGroup = groupings[currentGroupIndex + 1];\n  return newGroup;\n});\n/**\n* Return the previous canvas(es) for a window\n* For book view returns 2, for single returns 1\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {Array}\n*/\n\nexport var getPreviousCanvasGrouping = createSelector([getCanvasGroupings, getCurrentCanvas], function (groupings, canvas, view) {\n  if (!groupings || !canvas) return undefined;\n  var currentGroupIndex = groupings.findIndex(function (group) {\n    return group.some(function (c) {\n      return c.id === canvas.id;\n    });\n  });\n  if (currentGroupIndex < 1) return undefined;\n  var newGroup = groupings[currentGroupIndex - 1];\n  return newGroup;\n});\n/**\n* Return canvas label, or alternatively return the given index + 1 to be displayed\n* @param {object} canvas\n* @return {String|Integer}\n*/\n\nexport var getCanvasLabel = createSelector([getCanvas], function (canvas) {\n  return canvas && (canvas.getLabel().length > 0 ? canvas.getLabel().getValue() : String(canvas.index + 1));\n});\n/**\n* Return canvas description\n* @param {object} canvas\n* @param {String}\n*/\n\nexport var getCanvasDescription = createSelector([getCanvas], function (canvas) {\n  return canvas && canvas.getProperty('description');\n});\nexport var getVisibleCanvasNonTiledResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).imageResources;\n  })).filter(function (resource) {\n    return resource.getServices().length < 1;\n  });\n});\nexport var getVisibleCanvasVideoResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).videoResources;\n  }));\n});\nexport var getVisibleCanvasCaptions = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).vttContent;\n  }));\n});\nexport var getVisibleCanvasAudioResources = createSelector([getVisibleCanvases], function (canvases) {\n  return flatten(canvases.map(function (canvas) {\n    return new MiradorCanvas(canvas).audioResources;\n  }));\n});\nexport var selectInfoResponse = createSelector([function (state, _ref3) {\n  var infoId = _ref3.infoId;\n  return infoId;\n}, getCanvas, selectInfoResponses], function (infoId, canvas, infoResponses) {\n  var iiifServiceId = infoId;\n\n  if (!infoId) {\n    if (!canvas) return undefined;\n    var miradorCanvas = new MiradorCanvas(canvas);\n    var image = miradorCanvas.iiifImageResources[0];\n    iiifServiceId = image && image.getServices()[0].id;\n  }\n\n  return iiifServiceId && infoResponses[iiifServiceId] && !infoResponses[iiifServiceId].isFetching && infoResponses[iiifServiceId];\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport groupBy from 'lodash/groupBy';\nimport { miradorSlice } from './utils';\nimport { getWindow, getWindows } from './getters';\n/** */\n\nexport function getCompanionWindows(state) {\n  return miradorSlice(state).companionWindows || {};\n}\nexport var getCompanionWindow = createSelector([getCompanionWindows, function (state, _ref) {\n  var companionWindowId = _ref.companionWindowId;\n  return companionWindowId;\n}], function (companionWindows, companionWindowId) {\n  return companionWindowId && companionWindows[companionWindowId];\n});\n/** Return position of thumbnail navigation in a certain window.\n* @param {object} state\n* @param {String} windowId\n* @param {String}\n*/\n\nexport var getThumbnailNavigationPosition = createSelector([getWindow, getCompanionWindows], function (window, companionWindows) {\n  return window && companionWindows[window.thumbnailNavigationId] && companionWindows[window.thumbnailNavigationId].position;\n});\n/**\n* Return compantion window ids from a window\n* @param {String} windowId\n* @return {Array}\n*/\n\nvar getCompanionWindowIndexByWindowAndPosition = createSelector([getWindows, getCompanionWindows], function (windows, companionWindows) {\n  return (Object.keys(windows) || []).reduce(function (obj, id) {\n    return _objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, id, groupBy(windows[id].companionWindowIds, function (cwid) {\n      return companionWindows[cwid] && companionWindows[cwid].position;\n    })));\n  }, {});\n});\n/**\n* Return compantion window ids from a window\n* @param {String} windowId\n* @return {Array}\n*/\n\nvar getCompanionWindowsByWindowAndPosition = createSelector([getWindows, getCompanionWindows], function (windows, companionWindows) {\n  return (Object.keys(windows) || []).reduce(function (obj, id) {\n    return _objectSpread(_objectSpread({}, obj), {}, _defineProperty({}, id, groupBy(windows[id].companionWindowIds.map(function (cwid) {\n      return companionWindows[cwid];\n    }), function (cw) {\n      return cw.position;\n    })));\n  }, {});\n});\n/**\n * Return companion windows of a window\n * @param {String} windowId\n * @return {Array}\n */\n\nvar getCompanionWindowsOfWindow = createSelector([function (state, _ref2) {\n  var windowId = _ref2.windowId;\n  return windowId;\n}, getCompanionWindowsByWindowAndPosition], function (windowId, companionWindows) {\n  return companionWindows[windowId] || {};\n});\n/**\n * Return companion windows of a window\n * @param {String} windowId\n * @return {Array}\n */\n\nvar getCompanionWindowIdsOfWindow = createSelector([function (state, _ref3) {\n  var windowId = _ref3.windowId;\n  return windowId;\n}, getCompanionWindowIndexByWindowAndPosition], function (windowId, companionWindowIds) {\n  return companionWindowIds[windowId] || {};\n});\n/**\n* Return the companion window string from state in a given windowId and position\n* @param {object} state\n* @param {String} windowId\n* @param {String} position\n* @return {String}\n*/\n\nexport var getCompanionWindowsForPosition = createSelector([getCompanionWindowsOfWindow, function (state, _ref4) {\n  var position = _ref4.position;\n  return {\n    position: position\n  };\n}], function (companionWindows, _ref5) {\n  var position = _ref5.position;\n  return companionWindows[position] || EMPTY_ARRAY;\n});\n/**\n* Return the companion window string from state in a given windowId and content type\n* @param {object} state\n* @param {String} windowId\n* @param {String} position\n* @return {String}\n*/\n\nexport var getCompanionWindowsForContent = createSelector([getCompanionWindowsOfWindow, function (state, _ref6) {\n  var content = _ref6.content;\n  return {\n    content: content\n  };\n}], function (companionWindows, _ref7) {\n  var _ref8;\n\n  var content = _ref7.content;\n  return (_ref8 = []).concat.apply(_ref8, _toConsumableArray(Object.values(companionWindows))).filter(function (w) {\n    return w.content === content;\n  });\n});\nvar EMPTY_ARRAY = [];\n/** */\n\nexport var getCompanionWindowIdsForPosition = createSelector([getCompanionWindowIdsOfWindow, function (state, _ref9) {\n  var position = _ref9.position;\n  return {\n    position: position\n  };\n}], function (companionWindowIds, _ref10) {\n  var position = _ref10.position;\n  return companionWindowIds[position] || EMPTY_ARRAY;\n});\n/**\n * Returns the visibility of the companion area\n * @param {object} state\n * @param {object} props\n * @return {Boolean}\n */\n\nexport var getCompanionAreaVisibility = createSelector([function (state, _ref11) {\n  var position = _ref11.position;\n  return position;\n}, getWindow], function (position, window) {\n  if (!window) return false;\n  var companionAreaOpen = window.companionAreaOpen,\n      sideBarOpen = window.sideBarOpen;\n  if (position !== 'left') return true;\n  return !!(companionAreaOpen && sideBarOpen);\n});\nexport var selectCompanionWindowDimensions = createSelector([getCompanionWindowsOfWindow], function (companionWindows) {\n  var _ref12;\n\n  var width = 0;\n  var height = 0;\n\n  (_ref12 = []).concat.apply(_ref12, _toConsumableArray(Object.values(companionWindows))).forEach(function (cw) {\n    if (cw.position.match(/right/)) {\n      width += 235;\n    }\n\n    if (cw.position.match(/bottom/)) {\n      height += 201;\n    }\n  });\n\n  return {\n    height: height,\n    width: width\n  };\n});","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { createSelector } from 'reselect';\nimport deepmerge from 'deepmerge';\nimport { miradorSlice } from './utils';\nimport { getWorkspace } from './getters';\n/** */\n\nexport function getConfig(state) {\n  var slice = miradorSlice(state || {});\n  return slice.config || {};\n}\n/**\n * Extract an exportable version of state using the configuration from the config.\n */\n\nexport function getExportableState(state) {\n  var exportConfig = getConfig(state)[\"export\"];\n  return Object.entries(exportConfig).reduce(function (acc, _ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        stem = _ref2[0],\n        value = _ref2[1];\n\n    if (value === true) {\n      acc[stem] = state[stem];\n    } else if (value.filter) {\n      acc[stem] = Object.entries(state[stem]).filter(value.filter).reduce(function (stemAcc, _ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n            k = _ref4[0],\n            v = _ref4[1];\n\n        stemAcc[k] = v; // eslint-disable-line no-param-reassign\n\n        return stemAcc;\n      }, {});\n    }\n\n    return acc;\n  }, {});\n}\n/**\n* Return languages from config (in state) and indicate which is currently set\n* @param {object} state\n* @return {Array} [ {locale: 'de', label: 'Deutsch', current: true}, ... ]\n*/\n\nexport var getLanguagesFromConfigWithCurrent = createSelector([getConfig], function (_ref5) {\n  var availableLanguages = _ref5.availableLanguages,\n      language = _ref5.language;\n  return Object.keys(availableLanguages).map(function (key) {\n    return {\n      current: key === language,\n      label: availableLanguages[key],\n      locale: key\n    };\n  });\n});\nexport var getShowZoomControlsConfig = createSelector([getWorkspace, getConfig], function (workspace, config) {\n  return workspace.showZoomControls === undefined ? config.workspace.showZoomControls : workspace.showZoomControls;\n});\nexport var getTheme = createSelector([getConfig], function (_ref6) {\n  var theme = _ref6.theme,\n      themes = _ref6.themes,\n      selectedTheme = _ref6.selectedTheme;\n  return deepmerge(theme, themes[selectedTheme] || {});\n});\nexport var getThemeIds = createSelector([getConfig], function (_ref7) {\n  var themes = _ref7.themes;\n  return Object.keys(themes);\n});\nexport var getContainerId = createSelector([getConfig], function (_ref8) {\n  var id = _ref8.id;\n  return id;\n});\nexport var getThemeDirection = createSelector([getConfig], function (_ref9) {\n  var theme = _ref9.theme;\n  return theme.direction || 'ltr';\n});\nexport var getRequestsConfig = createSelector([getConfig], function (_ref10) {\n  var requests = _ref10.requests;\n  return requests || {};\n});","import { createSelector } from 'reselect';\nimport { miradorSlice } from './utils';\n/**\n * Return the manifest titles for all open windows\n * @param {object} state\n * @return {object}\n */\n\nexport function getWindowManifests(state) {\n  return Object.values(miradorSlice(state).windows).map(function (window) {\n    return window.manifestId;\n  });\n}\n/** */\n\nexport function getWindows(state) {\n  return miradorSlice(state).windows || {};\n}\n/** */\n\nexport function getWindow(state, _ref) {\n  var windowId = _ref.windowId;\n  return getWindows(state)[windowId];\n}\nexport var getViewer = createSelector([function (state) {\n  return miradorSlice(state).viewers;\n}, function (state, _ref2) {\n  var windowId = _ref2.windowId;\n  return windowId;\n}], function (viewers, windowId) {\n  return viewers[windowId];\n});\n/** */\n\nexport function getWorkspace(state) {\n  return miradorSlice(state).workspace;\n}\n/** */\n\nexport var getWindowIds = createSelector([getWorkspace], function (_ref3) {\n  var windowIds = _ref3.windowIds;\n  return windowIds || [];\n});\n/** */\n\nexport function getManifests(state) {\n  return miradorSlice(state).manifests || {};\n}\n/** Get the relevant manifest information */\n\nexport function getManifest(state, _ref4) {\n  var manifestId = _ref4.manifestId,\n      windowId = _ref4.windowId;\n  var manifests = getManifests(state);\n  return manifests && manifests[manifestId || windowId && (getWindow(state, {\n    windowId: windowId\n  }) || {}).manifestId];\n}\n/** */\n\nexport function getCatalog(state) {\n  return miradorSlice(state).catalog || {};\n}","import { createSelector } from 'reselect';\nimport MiradorCanvas from '../../lib/MiradorCanvas';\nimport { getCanvas, getVisibleCanvasIds } from './canvases';\nimport { miradorSlice } from './utils';\n/**\n * Get the image layers from a canvas\n */\n\nexport var getCanvasLayers = createSelector([getCanvas], function (canvas) {\n  if (!canvas) return [];\n  var miradorCanvas = new MiradorCanvas(canvas);\n  return miradorCanvas.imageResources;\n});\n/**\n * Get the layer state for a particular canvas\n */\n\nexport var getLayers = createSelector([function (state) {\n  return miradorSlice(state).layers || {};\n}, function (state, _ref) {\n  var windowId = _ref.windowId;\n  return windowId;\n}, function (state, _ref2) {\n  var canvasId = _ref2.canvasId;\n  return canvasId;\n}], function (layers, windowId, canvasId) {\n  return (layers[windowId] || {})[canvasId];\n});\n/**\n * Returns a list of canvas layers, sorted by the layer state configuration\n */\n\nexport var getSortedLayers = createSelector([getCanvasLayers, getLayers], function (canvasLayers, layerConfig) {\n  if (!layerConfig) return canvasLayers;\n  var sorted = canvasLayers.sort(function (a, b) {\n    if (layerConfig[a.id] && layerConfig[a.id].index !== undefined && layerConfig[b.id] && layerConfig[b.id].index !== undefined) {\n      return layerConfig[a.id].index - layerConfig[b.id].index;\n    } // sort a layer with index data above layers without\n\n\n    if (layerConfig[a.id] && layerConfig[a.id].index !== undefined) return -1;\n    if (layerConfig[b.id] && layerConfig[b.id].index !== undefined) return 1;\n    return 0;\n  });\n  return sorted;\n});\n/**\n * Get all the layer configuration for visible canvases\n */\n\nexport var getLayersForVisibleCanvases = createSelector([getVisibleCanvasIds, function (state, _ref3) {\n  var windowId = _ref3.windowId;\n  return function (canvasId) {\n    return getLayers(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    });\n  };\n}], function (canvasIds, getLayersForCanvas) {\n  return canvasIds.reduce(function (acc, canvasId) {\n    acc[canvasId] = getLayersForCanvas(canvasId);\n    return acc;\n  }, {});\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { createSelector } from 'reselect';\nimport createCachedSelector from 're-reselect';\nimport { PropertyValue, Utils } from 'manifesto.js';\nimport getThumbnail from '../../lib/ThumbnailFactory';\nimport asArray from '../../lib/asArray';\nimport { getCompanionWindow } from './companionWindows';\nimport { getManifest } from './getters';\nimport { getConfig } from './config';\n/** */\n\nfunction createManifestoInstance(json, locale) {\n  if (!json) return undefined;\n  var manifestoObject = Utils.parseManifest(json, locale ? {\n    locale: locale\n  } : undefined); // Local patching of Manifesto so that when its a Collection, it behaves similarly\n\n  if (typeof manifestoObject.getSequences != 'function') {\n    manifestoObject.getSequences = function () {\n      return [];\n    };\n  }\n\n  return manifestoObject;\n}\n/** */\n\n\nvar getLocale = createSelector([getCompanionWindow, getConfig], function () {\n  var companionWindow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return companionWindow.locale || config.language;\n});\n/** Convenience selector to get a manifest (or placeholder) */\n\nexport var getManifestStatus = createSelector([getManifest], function (manifest) {\n  return manifest || {\n    missing: true\n  };\n});\n/** Convenience selector to get a manifest loading error */\n\nexport var getManifestError = createSelector([getManifest], function (manifest) {\n  return manifest && manifest.error;\n});\n/** Instantiate a manifesto instance */\n\nvar getContextualManifestoInstance = createCachedSelector(getManifest, getLocale, function (manifest, locale) {\n  return manifest && createManifestoInstance(manifest.json, locale);\n})(function (state, _ref) {\n  var companionWindowId = _ref.companionWindowId,\n      manifestId = _ref.manifestId,\n      windowId = _ref.windowId;\n  return [manifestId, windowId, getLocale(state, {\n    companionWindowId: companionWindowId\n  })].join(' - ');\n} // Cache key consisting of manifestId, windowId, and locale\n);\n/** Instantiate a manifesto instance */\n\nexport var getManifestoInstance = createSelector(getContextualManifestoInstance, function (state, _ref2) {\n  var json = _ref2.json;\n  return json;\n}, getLocale, function (manifesto, manifestJson, locale) {\n  return manifestJson && createManifestoInstance(manifestJson, locale) || manifesto;\n});\nexport var getManifestLocale = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.options && manifest.options.locale && manifest.options.locale.replace(/-.*$/, '');\n});\n/** */\n\nfunction getProperty(property) {\n  return createSelector([getManifestoInstance], function (manifest) {\n    return manifest && manifest.getProperty(property);\n  });\n}\n/**\n * Get the logo for a manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {String|null}\n */\n\n\nexport var getManifestLogo = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getLogo();\n});\n/**\n* Return the IIIF v3 provider of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestProvider = createSelector([getProperty('provider'), getManifestLocale], function (provider, locale) {\n  return provider && provider[0].label && PropertyValue.parse(provider[0].label, locale).getValue();\n});\n/**\n* Return the IIIF v3 homepage of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestHomepage = createSelector([getProperty('homepage'), getManifestLocale], function (homepages, locale) {\n  return homepages && asArray(homepages).map(function (homepage) {\n    return {\n      label: PropertyValue.parse(homepage.label, locale).getValue(),\n      value: homepage.id || homepage['@id']\n    };\n  });\n});\n/**\n* Return the IIIF v3 renderings of a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestRenderings = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getRenderings().map(function (rendering) {\n    return {\n      label: rendering.getLabel().getValue(),\n      value: rendering.id\n    };\n  });\n});\n/**\n* Return the IIIF v2/v3 seeAlso data from a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getManifestRelatedContent = createSelector([getProperty('seeAlso'), getManifestLocale], function (seeAlso, locale) {\n  return seeAlso && asArray(seeAlso).map(function (related) {\n    return {\n      format: related.format,\n      label: PropertyValue.parse(related.label, locale).getValue(),\n      value: related.id || related['@id']\n    };\n  });\n});\n/**\n* Return the IIIF requiredStatement (v3) or attribution (v2) data from a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getRequiredStatement = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && asArray(manifest.getRequiredStatement()).filter(function (l) {\n    return l.getValues().some(function (v) {\n      return v;\n    });\n  }).map(function (labelValuePair) {\n    return {\n      label: labelValuePair.label && labelValuePair.label.getValue() || null,\n      values: labelValuePair.getValues()\n    };\n  });\n});\n/**\n* Return the IIIF v2 rights (v3) or license (v2) data from a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport var getRights = createSelector([getProperty('rights'), getProperty('license'), getManifestLocale], function (rights, license, locale) {\n  var data = rights || license;\n  return asArray(PropertyValue.parse(data, locale).getValues());\n});\n/**\n* Return the supplied thumbnail for a manifest or null\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String|null}\n*/\n\nexport function getManifestThumbnail(state, props) {\n  var manifest = getManifestoInstance(state, props);\n\n  var _getConfig = getConfig(state),\n      _getConfig$thumbnails = _getConfig.thumbnails,\n      thumbnails = _getConfig$thumbnails === void 0 ? {} : _getConfig$thumbnails;\n\n  if (!manifest) return undefined;\n  var thumbnail = getThumbnail(manifest, {\n    maxHeight: 80,\n    maxWidth: 120,\n    preferredFormats: thumbnails.preferredFormats\n  });\n  return thumbnail && thumbnail.url;\n}\n/**\n* Return manifest title\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestTitle = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getLabel().getValue();\n});\n/**\n* Return manifest description\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestDescription = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.getDescription().getValue();\n});\n/**\n* Return manifest title\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @return {String}\n*/\n\nexport var getManifestUrl = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && manifest.id;\n});\n/**\n* Return metadata in a label / value structure\n* This is a potential seam for pulling the i18n locale from\n* state and plucking out the appropriate language.\n* For now we're just getting the first.\n* @param {object} Manifesto IIIF Resource (e.g. canvas, manifest)\n* @return {Array[Object]}\n*/\n\nexport function getDestructuredMetadata(iiifResource) {\n  return iiifResource && iiifResource.getMetadata().map(function (labelValuePair) {\n    return {\n      label: labelValuePair.getLabel(),\n      values: labelValuePair.getValues()\n    };\n  });\n}\n/**\n * Return manifest metadata in a label / value structure\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Array[Object]}\n */\n\nexport var getManifestMetadata = createSelector([getManifestoInstance], function (manifest) {\n  return manifest && getDestructuredMetadata(manifest);\n});\n/** */\n\nfunction getLocalesForStructure(item) {\n  var languages = [];\n\n  if (Array.isArray(item)) {\n    languages.push.apply(languages, _toConsumableArray(item.filter(function (i) {\n      return typeof i === 'object' && i['@language'];\n    }).map(function (i) {\n      return i['@language'];\n    })));\n  } else if (item && typeof item === 'object') {\n    if (item['@language']) languages.push(item['@language']);\n  }\n\n  return languages;\n}\n/** */\n\n\nfunction getLocales(resource) {\n  if (!resource) return [];\n  var metadata = resource.getProperty('metadata') || [];\n  var languages = {};\n\n  for (var i = 0; i < metadata.length; i += 1) {\n    var item = metadata[i];\n    getLocalesForStructure(item.label).forEach(function (l) {\n      languages[l] = true;\n    });\n    getLocalesForStructure(item.value).forEach(function (l) {\n      languages[l] = true;\n    });\n  }\n\n  return Object.keys(languages);\n}\n\nexport var getMetadataLocales = createSelector([getManifestoInstance], function (manifest) {\n  return getLocales(manifest);\n});\n/** */\n\nexport var getManifestSearchService = createSelector([getManifestoInstance], function (manifest) {\n  if (!manifest) return null;\n  var searchService = manifest.getService('http://iiif.io/api/search/0/search') || manifest.getService('http://iiif.io/api/search/1/search');\n  if (searchService) return searchService;\n  return null;\n});\n/** */\n\nexport var getManifestAutocompleteService = createSelector([getManifestSearchService], function (searchService) {\n  var autocompleteService = searchService && (searchService.getService('http://iiif.io/api/search/0/autocomplete') || searchService.getService('http://iiif.io/api/search/1/autocomplete'));\n  return autocompleteService && autocompleteService;\n});","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { createSelector } from 'reselect';\nimport union from 'lodash/union';\nimport without from 'lodash/without';\nimport { Utils } from 'manifesto.js';\nimport { getVisibleCanvasIds } from './canvases';\nimport { getCompanionWindow } from './companionWindows';\nimport { getSequenceTreeStructure } from './sequences';\n/** */\n\nfunction rangeContainsCanvasId(range, canvasId) {\n  var canvasIds = range.getCanvasIds();\n\n  for (var i = 0; i < canvasIds.length; i += 1) {\n    if (Utils.normalisedUrlsMatch(canvasIds[i], canvasId)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n/** */\n\n\nfunction getAllParentIds(node) {\n  if (node.parentNode === undefined) {\n    return [];\n  }\n\n  if (node.parentNode.parentNode === undefined) {\n    return [node.parentNode.id];\n  }\n\n  return [].concat(_toConsumableArray(getAllParentIds(node.parentNode)), [node.parentNode.id]);\n}\n/** */\n\n\nfunction getVisibleNodeIdsInSubTree(nodes, canvasIds) {\n  return nodes.reduce(function (nodeIdAcc, node) {\n    var result = [];\n    result.push.apply(result, _toConsumableArray(nodeIdAcc));\n    var nodeContainsVisibleCanvas = canvasIds.reduce(function (acc, canvasId) {\n      return acc || rangeContainsCanvasId(node.data, canvasId);\n    }, false);\n    var subTreeVisibleNodeIds = node.nodes.length > 0 ? getVisibleNodeIdsInSubTree(node.nodes, canvasIds) : [];\n    result.push.apply(result, _toConsumableArray(subTreeVisibleNodeIds));\n\n    if (nodeContainsVisibleCanvas || subTreeVisibleNodeIds.length > 0) {\n      result.push({\n        containsVisibleCanvas: nodeContainsVisibleCanvas,\n        descendantsContainVisibleCanvas: subTreeVisibleNodeIds.length > 0,\n        id: node.id,\n        leaf: node.nodes.length === 0,\n        parentIds: getAllParentIds(node)\n      });\n    }\n\n    return result;\n  }, []);\n}\n/** */\n\n\nvar getVisibleLeafAndBranchNodeIds = createSelector([getSequenceTreeStructure, getVisibleCanvasIds], function (tree, canvasIds) {\n  if (canvasIds.length === 0 || !tree) return [];\n  return getVisibleNodeIdsInSubTree(tree.nodes, canvasIds);\n});\n/** */\n\nexport var getVisibleNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.map(function (item) {\n    return item.id;\n  });\n});\nvar getVisibleBranchNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.reduce(function (acc, item) {\n    return item.leaf || !item.descendantsContainVisibleCanvas ? acc : [].concat(_toConsumableArray(acc), [item.id]);\n  }, []);\n});\nvar getCanvasContainingNodeIds = createSelector([getVisibleLeafAndBranchNodeIds], function (visibleLeafAndBranchNodeIds) {\n  return visibleLeafAndBranchNodeIds.reduce(function (acc, item) {\n    return item.containsVisibleCanvas ? [].concat(_toConsumableArray(acc), [item]) : acc;\n  }, []);\n});\n/** */\n\nexport function getManuallyExpandedNodeIds(state, _ref, expanded) {\n  var companionWindowId = _ref.companionWindowId;\n  var companionWindow = getCompanionWindow(state, {\n    companionWindowId: companionWindowId\n  });\n  return companionWindow.tocNodes ? Object.keys(companionWindow.tocNodes).reduce(function (acc, nodeId) {\n    return companionWindow.tocNodes[nodeId].expanded === expanded ? [].concat(_toConsumableArray(acc), [nodeId]) : acc;\n  }, []) : [];\n}\n/** */\n\nexport function getExpandedNodeIds(state, _ref2) {\n  var companionWindowId = _ref2.companionWindowId,\n      windowId = _ref2.windowId;\n  var visibleBranchNodeIds = getVisibleBranchNodeIds(state, {\n    companionWindowId: companionWindowId,\n    windowId: windowId\n  });\n  var manuallyExpandedNodeIds = getManuallyExpandedNodeIds(state, {\n    companionWindowId: companionWindowId\n  }, true);\n  var manuallyClosedNodeIds = getManuallyExpandedNodeIds(state, {\n    companionWindowId: companionWindowId\n  }, false);\n  return without.apply(void 0, [union(manuallyExpandedNodeIds, visibleBranchNodeIds)].concat(_toConsumableArray(manuallyClosedNodeIds)));\n}\n/** */\n\nexport function getNodeIdToScrollTo(state, _ref3) {\n  var args = _extends({}, _ref3);\n\n  var canvasContainingNodeIds = getCanvasContainingNodeIds(state, _objectSpread({}, args));\n  var collapsedNodeIds = getManuallyExpandedNodeIds(state, args, false);\n\n  if (canvasContainingNodeIds && canvasContainingNodeIds.length > 0) {\n    for (var i = 0; i < canvasContainingNodeIds[0].parentIds.length; i += 1) {\n      if (collapsedNodeIds.indexOf(canvasContainingNodeIds[0].parentIds[i]) !== -1) {\n        return canvasContainingNodeIds[0].parentIds[i];\n      }\n    }\n\n    return canvasContainingNodeIds[0].id;\n  }\n\n  return null;\n}\n/**\n * Returns the default sidebar variant depending on whether or not ranges exist\n */\n\nexport var getDefaultSidebarVariant = createSelector([getSequenceTreeStructure], function (tree) {\n  return tree && tree.nodes && tree.nodes.length > 0 ? 'tableOfContents' : 'item';\n});","import { createSelector } from 'reselect';\nimport { PropertyValue } from 'manifesto.js';\nimport flatten from 'lodash/flatten';\nimport AnnotationList from '../../lib/AnnotationList';\nimport { getCanvas, getCanvases } from './canvases';\nimport { getWindow } from './getters';\nimport { getManifestLocale } from './manifests';\nimport { miradorSlice } from './utils';\n/** Get searches from state */\n\nvar getSearches = function getSearches(state) {\n  return miradorSlice(state).searches;\n};\n\nexport var getSearchForWindow = createSelector([function (state, _ref) {\n  var windowId = _ref.windowId;\n  return windowId;\n}, getSearches], function (windowId, searches) {\n  if (!windowId || !searches) return {};\n  return searches[windowId];\n});\nvar getSearchForCompanionWindow = createSelector([getSearchForWindow, function (state, _ref2) {\n  var companionWindowId = _ref2.companionWindowId;\n  return companionWindowId;\n}], function (results, companionWindowId) {\n  if (!results || !companionWindowId) return undefined;\n  return results[companionWindowId];\n});\nvar getSearchResponsesForCompanionWindow = createSelector([getSearchForCompanionWindow], function (results) {\n  if (!results) return [];\n  return Object.values(results.data);\n});\nexport var getSearchQuery = createSelector([getSearchForCompanionWindow], function (results) {\n  return results && results.query;\n});\nexport var getSearchIsFetching = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return results.some(function (result) {\n    return result.isFetching;\n  });\n});\nexport var getSearchNumTotal = createSelector([getSearchForCompanionWindow], function (results) {\n  var _resultWithWithin$jso, _resultWithWithin$jso2;\n\n  if (!results || !results.data) return undefined;\n  var resultWithWithin = Object.values(results.data).find(function (result) {\n    return !result.isFetching && result.json && result.json.within;\n  });\n  return resultWithWithin === null || resultWithWithin === void 0 ? void 0 : (_resultWithWithin$jso = resultWithWithin.json) === null || _resultWithWithin$jso === void 0 ? void 0 : (_resultWithWithin$jso2 = _resultWithWithin$jso.within) === null || _resultWithWithin$jso2 === void 0 ? void 0 : _resultWithWithin$jso2.total;\n});\nexport var getNextSearchId = createSelector([getSearchForCompanionWindow], function (results) {\n  if (!results || !results.data) return undefined;\n  var resultWithAnUnresolvedNext = Object.values(results.data).find(function (result) {\n    return !result.isFetching && result.json && result.json.next && !results.data[result.json.next];\n  });\n  return resultWithAnUnresolvedNext && resultWithAnUnresolvedNext.json && resultWithAnUnresolvedNext.json.next;\n});\nvar getSearchHitsForCompanionWindow = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return flatten(results.map(function (result) {\n    if (!result || !result.json || result.isFetching || !result.json.hits) return [];\n    return result.json.hits;\n  }));\n});\nexport var getSortedSearchHitsForCompanionWindow = createSelector([getSearchHitsForCompanionWindow, getCanvases, function (state, _ref3) {\n  var companionWindowId = _ref3.companionWindowId,\n      windowId = _ref3.windowId;\n  return function (annotationUri) {\n    return getResourceAnnotationForSearchHit(state, {\n      annotationUri: annotationUri,\n      companionWindowId: companionWindowId,\n      windowId: windowId\n    });\n  };\n}], function (searchHits, canvases, annotationForSearchHit) {\n  if (!canvases || canvases.length === 0) return [];\n  if (!searchHits || searchHits.length === 0) return [];\n  var canvasIds = canvases.map(function (canvas) {\n    return canvas.id;\n  });\n  return [].concat(searchHits).sort(function (a, b) {\n    var hitA = annotationForSearchHit(a.annotations[0]);\n    var hitB = annotationForSearchHit(b.annotations[0]);\n    return canvasIds.indexOf(hitA.targetId) - canvasIds.indexOf(hitB.targetId);\n  });\n});\n/** convert search results to an annotation */\n\nvar searchResultsToAnnotation = function searchResultsToAnnotation(results) {\n  var annotations = results.map(function (result) {\n    if (!result || !result.json || result.isFetching || !result.json.resources) return undefined;\n    var anno = new AnnotationList(result.json);\n    return {\n      id: anno.id,\n      resources: anno.resources\n    };\n  }).filter(Boolean);\n  return {\n    id: (annotations.find(function (a) {\n      return a.id;\n    }) || {}).id,\n    resources: flatten(annotations.map(function (a) {\n      return a.resources;\n    }))\n  };\n};\n\nexport var getSearchAnnotationsForCompanionWindow = createSelector([getSearchResponsesForCompanionWindow], function (results) {\n  return results && searchResultsToAnnotation(results);\n});\n/** */\n\nexport function sortSearchAnnotationsByCanvasOrder(searchAnnotations, canvases) {\n  if (!searchAnnotations || !searchAnnotations.resources || searchAnnotations.length === 0) return [];\n  if (!canvases || canvases.length === 0) return [];\n  var canvasIds = canvases.map(function (canvas) {\n    return canvas.id;\n  });\n  return [].concat(searchAnnotations.resources).sort(function (annoA, annoB) {\n    return canvasIds.indexOf(annoA.targetId) - canvasIds.indexOf(annoB.targetId);\n  });\n}\nexport var getSortedSearchAnnotationsForCompanionWindow = createSelector([getSearchAnnotationsForCompanionWindow, getCanvases], function (searchAnnotations, canvases) {\n  return sortSearchAnnotationsByCanvasOrder(searchAnnotations, canvases);\n});\nexport var getSearchAnnotationsForWindow = createSelector([getSearchForWindow], function (results) {\n  if (!results) return [];\n  var data = Object.values(results).map(function (r) {\n    return Object.values(r.data);\n  });\n  return data.map(function (d) {\n    return searchResultsToAnnotation(d);\n  }).filter(function (a) {\n    return a.resources.length > 0;\n  });\n});\nexport var getSelectedContentSearchAnnotationIds = createSelector([getWindow, getSearchForCompanionWindow], function (window, search) {\n  return search && search.selectedContentSearchAnnotationIds || [];\n});\nexport var getResourceAnnotationForSearchHit = createSelector([getSearchAnnotationsForCompanionWindow, function (state, _ref4) {\n  var annotationUri = _ref4.annotationUri;\n  return annotationUri;\n}], function (annotation, annotationUri) {\n  return annotation.resources.find(function (r) {\n    return r.id === annotationUri;\n  });\n});\nexport var getResourceAnnotationLabel = createSelector([getResourceAnnotationForSearchHit, getManifestLocale], function (resourceAnnotation, locale) {\n  if (!(resourceAnnotation && resourceAnnotation.resource && resourceAnnotation.resource.label)) return [];\n  return PropertyValue.parse(resourceAnnotation.resource.label, locale).getValues();\n});\nvar getAnnotationById = createSelector([getSearchAnnotationsForWindow, function (state, _ref5) {\n  var annotationId = _ref5.annotationId;\n  return annotationId;\n}], function (annotations, annotationId) {\n  var resourceAnnotations = flatten(annotations.map(function (a) {\n    return a.resources;\n  }));\n  return resourceAnnotations.find(function (r) {\n    return r.id === annotationId;\n  });\n});\nexport var getCanvasForAnnotation = createSelector([getAnnotationById, function (state, _ref6) {\n  var windowId = _ref6.windowId;\n  return function (canvasId) {\n    return getCanvas(state, {\n      canvasId: canvasId,\n      windowId: windowId\n    });\n  };\n}], function (annotation, getCanvasById) {\n  var canvasId = annotation && annotation.targetId;\n  return canvasId && getCanvasById(canvasId);\n});","import { createSelector } from 'reselect';\nimport { TreeNode } from 'manifesto.js';\nimport { getManifestoInstance } from './manifests';\nimport { getWindow } from './getters';\nexport var getSequences = createSelector([getManifestoInstance], function (manifest) {\n  if (!manifest || !manifest.getTopRanges) return null;\n  var topRangesOrRoot = manifest.getTopRanges();\n  var v2TopRanges = topRangesOrRoot.filter(function (r) {\n    return r.getProperty('viewingHint') === 'top';\n  });\n  var v3RangeSequences = [];\n\n  if (v2TopRanges.length === 0 && topRangesOrRoot.length === 1) {\n    v3RangeSequences = topRangesOrRoot[0].getRanges().filter(function (r) {\n      return r.getBehavior() === 'sequence';\n    });\n  }\n\n  var sequences = [].concat( // v2: multi-sequence manifests, or v3: items\n  manifest.getSequences(), // v3: all top-level ranges with behavior=sequence\n  v3RangeSequences);\n  return sequences;\n});\nexport var getSequence = createSelector([getSequences, getWindow, function (state, _ref) {\n  var sequenceId = _ref.sequenceId;\n  return sequenceId;\n}], function (sequences, window, sequenceId) {\n  if (!sequences) return null;\n\n  if (sequenceId || window && window.sequenceId) {\n    var currentSequence = sequences.find(function (s) {\n      return s.id === (sequenceId || window.sequenceId);\n    });\n    if (currentSequence) return currentSequence;\n  }\n\n  return sequences[0];\n});\n/** Return the canvas index for a certain window.\n* @param {object} state\n* @param {String} windowId\n* @param {Number}\n*/\n\nexport var getCanvasIndex = createSelector([getWindow, getSequence], function (window, sequence) {\n  return (sequence && window && window.canvasId && sequence.getCanvasById(window.canvasId) || {}).index || 0;\n});\n/**\n * Returns the viewing hint for the first sequence in the manifest or the manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Number}\n */\n\nexport var getSequenceViewingHint = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (!manifest) return null;\n  var viewingHint = sequence && sequence.getViewingHint() || manifest.getViewingHint();\n  if (viewingHint) return viewingHint;\n  return null;\n});\n/** */\n\nexport var getSequenceViewingDirection = createSelector([getWindow, getSequence, getManifestoInstance], function (window, sequence, manifest) {\n  var viewingDirection = window && window.viewingDirection || sequence && sequence.getViewingDirection() || manifest && manifest.getViewingDirection();\n  if (viewingDirection) return viewingDirection;\n  return null;\n});\n/**\n * Returns the behaviors viewing hint for the manifest\n * @param {object} state\n * @param {object} props\n * @param {string} props.manifestId\n * @param {string} props.windowId\n * @return {Number}\n */\n\nexport var getSequenceBehaviors = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (!manifest || !sequence) return [];\n  var sequenceBehaviors = sequence && sequence.getProperty('behavior');\n\n  if (sequenceBehaviors) {\n    if (Array.isArray(sequenceBehaviors)) return sequenceBehaviors;\n    return [sequenceBehaviors];\n  }\n\n  var behaviors = manifest.getProperty('behavior');\n  if (!behaviors) return [];\n  if (Array.isArray(behaviors)) return behaviors;\n  return [behaviors];\n});\n/** */\n\nexport var getSequenceTreeStructure = createSelector([getSequence, getManifestoInstance], function (sequence, manifest) {\n  if (sequence && sequence.getProperty('type') && sequence.isRange()) return sequence.getTree(new TreeNode('root'));\n  return manifest && manifest.getDefaultTree();\n});","import settings from '../../config/settings';\n/** */\n\nexport function miradorSlice(state) {\n  if (settings.state.slice) return state[settings.state.slice];\n  return state;\n}","import { createSelector } from 'reselect';\nimport CanvasWorld from '../../lib/CanvasWorld';\nimport { getVisibleCanvases } from './canvases';\nimport { getLayersForVisibleCanvases } from './layers';\nimport { getSequenceViewingDirection } from './sequences';\n/** Instantiate a manifesto instance */\n\nexport var getCurrentCanvasWorld = createSelector(getVisibleCanvases, getLayersForVisibleCanvases, getSequenceViewingDirection, function (canvases, layers, viewingDirection) {\n  return new CanvasWorld(canvases, layers, viewingDirection);\n});","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createSelector } from 'reselect';\nimport { getManifestTitle } from './manifests';\nimport { getConfig } from './config';\nimport { getWindows, getWindow, getWindowIds } from './getters';\nimport { getWorkspaceType } from './workspace';\nimport { getSequenceViewingHint, getSequenceBehaviors } from './sequences';\n/** */\n\nexport var getWindowConfig = createSelector([getConfig, getWindow], function (_ref) {\n  var defaultConfig = _ref.window;\n  var windowConfig = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return _objectSpread(_objectSpread({}, defaultConfig), windowConfig);\n});\n/**\n * Return the manifest titles for all open windows\n * @param {object} state\n * @return {object}\n */\n\nexport function getWindowTitles(state) {\n  var result = {};\n  Object.keys(getWindows(state)).forEach(function (windowId) {\n    result[windowId] = getManifestTitle(state, {\n      windowId: windowId\n    });\n  });\n  return result;\n}\n/** */\n\nexport var getMaximizedWindowsIds = createSelector([getWindows], function (windows) {\n  return Object.values(windows).filter(function (window) {\n    return window.maximized === true;\n  }).map(function (window) {\n    return window.id;\n  });\n});\n/** Return type of view in a certain window.\n* @param {object} state\n* @param {object} props\n* @param {string} props.manifestId\n* @param {string} props.windowId\n* @param {String}\n*/\n\nexport var getWindowViewType = createSelector([getWindow, getWindowConfig, getSequenceViewingHint, getSequenceBehaviors], function (window, _ref2, manifestViewingHint, manifestBehaviors) {\n  var _ref2$views = _ref2.views,\n      views = _ref2$views === void 0 ? [] : _ref2$views,\n      defaultView = _ref2.defaultView;\n  if (window && window.view) return window.view;\n  var config = (views || []).find(function (view) {\n    return view.behaviors && view.behaviors.some(function (b) {\n      return manifestViewingHint === b || manifestBehaviors.includes(b);\n    });\n  });\n  return config && config.key || defaultView;\n});\n/** */\n\nexport var getAllowedWindowViewTypes = createSelector([getSequenceViewingHint, getSequenceBehaviors, getWindowConfig], function (manifestViewingHint, manifestBehaviors, _ref3) {\n  var _ref3$views = _ref3.views,\n      views = _ref3$views === void 0 ? [] : _ref3$views,\n      defaultView = _ref3.defaultView;\n  return (views || []).reduce(function (allowedViews, view) {\n    if (view.key === defaultView || !view.behaviors || view.behaviors.some(function (b) {\n      return manifestViewingHint === b || manifestBehaviors.includes(b);\n    })) allowedViews.push(view.key);\n    return allowedViews;\n  }, []);\n});\n/**\n * Returns the draggability of a window\n * @param {object} state\n * @param {object} props\n * @return {Boolean}\n */\n\nexport var getWindowDraggability = createSelector([getWorkspaceType, getWindow, function (state) {\n  return getWindowIds(state).length > 1;\n}], function (workspaceType, window, manyWindows) {\n  if (workspaceType === 'elastic') return true;\n  return manyWindows && window && window.maximized === false;\n});","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { createSelector } from 'reselect';\nimport { getWorkspace } from './getters';\nimport { miradorSlice } from './utils';\n/** */\n\nexport function getElasticLayout(state) {\n  return miradorSlice(state).elasticLayout;\n}\nexport var getFullScreenEnabled = createSelector([getWorkspace], function (workspace) {\n  return workspace.isFullscreenEnabled;\n});\n/** Returns the latest error from the state\n * @param {object} state\n */\n\nexport function getLatestError(state) {\n  var _miradorSlice$errors$ = _slicedToArray(miradorSlice(state).errors.items, 1),\n      errorId = _miradorSlice$errors$[0];\n\n  return miradorSlice(state).errors[errorId];\n}\nexport var getWorkspaceType = createSelector([getWorkspace], function (_ref) {\n  var type = _ref.type;\n  return type;\n});\nvar getFocusedWindowId = createSelector([getWorkspace], function (_ref2) {\n  var focusedWindowId = _ref2.focusedWindowId;\n  return focusedWindowId;\n});\n/** Check if the current window is focused */\n\nexport var isFocused = function isFocused(state, _ref3) {\n  var windowId = _ref3.windowId;\n  return getFocusedWindowId(state) === windowId;\n};"],"names":["state","_ref","windowId","displayAll","highlightAllAnnotations","displayAllDisabled","length","dispatch","_ref2","toggleAnnotationDisplay","mapDispatchToProps","deselectAnnotation","hoverAnnotation","selectAnnotation","annotations","canvasWorld","drawAnnotations","window","forceDrawAnnotations","content","drawSearchAnnotations","hoveredAnnotationIds","palette","searchAnnotations","selectedAnnotationId","setWorkspaceFullscreen","createGenerateClassNameOptions","isFullscreenEnabled","language","theme","translations","audio","width","container","alignItems","display","audioOptions","audioResources","captions","annotationListItem","backgroundColor","action","hover","borderBottom","concat","divider","cursor","whiteSpace","chip","background","paper","marginRight","spacing","marginTop","hovered","sectionHeading","paddingLeft","paddingRight","paddingTop","resources","canvasId","map","resource","i","chars","id","tags","targetId","htmlSanitizationRuleSet","label","canvasDescription","companionWindowId","canvasLabel","canvasMetadata","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","updateLayers","dragging","dragHandle","borderRight","flex","flexDirection","marginBottom","maxWidth","image","list","listItem","shades","light","selected","paddingBottom","opacityIcon","opacityInput","typography","caption","margin","textAlign","slider","marginLeft","thumbnail","minWidth","layerMetadata","layers","dark","color","dialogContent","padding","listitem","focus","selectedTheme","themeIds","setSelectedTheme","button","justifyContent","heading","addWindow","hideCollectionDialog","setWorkspaceAddVisibility","showCollectionDialog","updateWindow","collectionFilter","collectionItem","collectionMetadata","dialog","position","grey","_getWindow","collectionPath","manifestId","collectionManifestId","manifest","collectionId","collection","containerId","error","isMultipart","includes","open","workspace","collectionDialogOn","ready","json","collectionLabel","setCompanionAreaOpen","horizontal","left","root","minHeight","zIndex","appBar","toggle","border","borderRadius","height","drawer","toggleButton","companionAreaOpen","companionWindowIds","direction","sideBarOpen","Component","forwardRef","props","ref","assign","innerRef","withTranslation","withStyles","closeButton","order","borderTop","borderLeft","companionWindowHeader","flexWrap","companionWindowTitleControls","flexGrow","companionWindowTitleControlsBottom","overflowY","wordBreak","positionButton","rnd","boxShadow","boxSizing","small","titleControls","flexFlow","toolbar","vertical","windowSideBarTitle","subtitle1","alignSelf","withSize","companionWindow","_getWindowConfig","defaultSidebarPanelHeight","defaultSidebarPanelWidth","isDisplayed","onCloseClick","updateCompanionWindow","_len","args","Array","_key","actions","withPlugins","CompanionWindow","alert","main","fontWeight","fontWeightMedium","details","metadata","viewer","showJsError","removeError","galleryContainer","overflowX","canvases","viewingDirection","canvas","currentCanvas","canvasAnnotations","a","hasOpenAnnotationsWindow","annotationsCount","reduce","v","r","config","galleryView","searchAnnotationsCount","focusOnCanvas","requestCanvasAnnotations","setCanvas","annotationIcon","annotationsChip","avatar","chips","opacity","right","top","galleryViewItem","primary","outline","maxHeight","overflow","hasAnnotations","searchChip","highlights","handleAuthInteraction","resetAuthenticationState","resolveAccessTokenRequest","resolveAuthenticationRequest","service","accessTokenService","logoutService","authStatuses","authStatus","accessTokens","accessTokenStatus","status","isFetching","ok","authProfiles","profile","getProfile","isInteractive","some","external","kiosk","accessTokenServiceId","authServiceId","confirm","getConfirmLabel","description","getDescription","failureDescription","getFailureDescription","failureHeader","getFailureHeader","header","getHeader","getLabel","logoutConfirm","logoutServiceId","lineHeight","insideCaption","lineClamp","insideLabel","bottom","insideRoot","textOverflow","outsideCaption","boxOrient","outsideLabel","outsideRoot","thumbnailsConfig","thumbnails","languages","afterSelect","handleClick","select","selectEmpty","addResource","buttons","breakpoints","up","input","body1","manifestDescription","manifestLabel","manifestMetadata","fetchManifest","active","buttonGrid","textTransform","logo","objectFit","placeholder","mixins","gutters","provider","manifesto","isCollection","size","getTotalItems","manifestLogo","title","onDismissClick","onTryAgainClick","errorIcon","manifestIdText","labelValueMetadata","homepage","manifestUrl","renderings","seeAlso","h6","windowTopBarStyle","allowClose","allowWindowSideBar","removeWindow","preview","h4","updateViewport","osdContainer","infoResponses","imageServiceIds","c","infoResponse","undefined","nonTiledImages","osdConfig","viewerConfig","primaryWindow","manifestoInstance","isCollectionDialogVisible","videoResources","textDecoration","_shadowScrollDialog","shadowScrollDialog","_arrayLikeToArray","arr","len","arr2","annotationId","_ref$hit","hit","realAnnoId","hitAnnotation","annotationUri","annotationLabel","selectedCanvasIds","selectedContentSearchAnnotationsIds","windowSelectedAnnotationId","allAnnoIds","isArray","_arrayWithoutHoles","iter","Symbol","iterator","from","_iterableToArray","o","minLen","n","prototype","toString","call","slice","constructor","name","test","_unsupportedIterableToArray","TypeError","_nonIterableSpread","adjacent","annotation","windowSelected","focused","hitCounter","subtitle2","verticalAlign","inlineButton","secondary","subtitle","fetchSearch","autocompleteService","query","searchIsFetching","searchService","endAdornment","form","searchProgress","numTotal","searchHits","selectedContentSearchAnnotation","body2","nextSearch","searchNumTotal","moreButton","navigation","noResults","toggleFocus","variant","group","treeItemRoot","visibleNode","fade","expandedNodeIds","nodeIdToScrollTo","treeStructure","visibleNodeIds","toggleNode","nodeId","data","canvasNavigation","outlineOffset","common","white","currentCanvasId","video","videoOptions","osdInfo","unicodeBidi","canvasIndex","canvasCount","osdNavigation","hasNextCanvas","hasPreviousCanvas","setNextCanvas","setPreviousCanvas","companionAreaBottom","flexBasis","companionAreaRight","maximized","middle","middleLeft","thumbnailArea","thumbnailAreaBottom","thumbnailAreaRight","modal","manifestError","thumbnailNavigationPosition","view","windowDraggable","workspaceType","focusWindow","buttonInvert","contrastText","hoverOpacity","expanded","failure","fauxButton","icon","topBar","visible","focusedWindowId","canvasNav","canvasNavStacked","controls","titles","windowIds","badge","ctrlBtn","ctrlBtnSelected","disabled","isWorkspaceAddVisible","windowCount","flexShrink","grow","borderInlineEnd","sideBarPanel","hasLayers","imageResources","notification","tab","tabSelected","tabsFlexContainer","tabsIndicator","hasAnyAnnotations","annotationListUris","canvasAnnotationPages","hasAnyLayers","hasCurrentLayers","hasSearchResults","suggestedSearches","hasSearchService","panels","addCompanionWindow","setWindowThumbnailPosition","MenuItem","selectedLabel","withRef","windowTopBarStyleDraggable","allowFullscreen","allowMaximize","allowTopMenuButton","maximizeWindow","minimizeWindow","toggleWindowSideBar","hideWindowTitle","manifestTitle","showThumbnailNavigationSettings","thumbnailNavigation","displaySettings","toggleDraggingEnabled","setWindowViewType","viewTypes","windowViewType","workspaceViewport","workspaceWithControlPanel","allowNewWindows","isWorkspaceControlPanelVisible","workspaceControlPanel","enabled","maximizedWindowIds","workspaceId","displayNone","fab","menuButton","typographyBody","workspaceAdd","catalog","fabPrimary","fabSecondary","useExtendedFab","type","controlPanelVariant","lang","_branding","branding","wide","workspaceButtons","transitionDuration","elasticLayout","setWorkspaceViewportDimensions","setWorkspaceViewportPosition","updateElasticWindowLayout","companionWindowDimensions","layout","accordionTitle","exportableState","addError","importConfig","cancelBtn","text","textField","textInput","fontFamily","toggleZoomControls","showThemePicker","showZoomControls","updateWorkspaceMosaicLayout","styles","touchAction","fallbacks","webkitBoxOrient","webkitBoxDirection","webkitBoxPack","webkitBoxAlign","webkitBoxFlex","WorkspaceMosaic","updateWorkspace","card","headline","media","menuItem","svgIcon","ListItem","zoom_controls","_toConsumableArray","connectPluginComponent","plugin","mapStateToProps","connectOptions","component","PluginProvider","plugins","children","_useState2","useState","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","err","_iterableToArrayLimit","_nonIterableRest","pluginMap","setPluginMap","useEffect","connectedPlugins","connectPluginsToStore","p","companionWindowKey","CompanionWindowRegistry","addPluginsToCompanionWindowsRegistry","mode","x","createTargetToPluginMapping","PluginContext","defaultProps","targetName","TargetComponent","PluginHoc","useContext","passDownProps","wrap","add","PluginComponents","targetComponent","reverse","WrapPluginComponent","targetProps","whatever","displayName","ar","de","en","fr","it","ja","kr","lt","nl","pl","sr","sv","vi","instance","use","init","fallbackLng","interpolation","escapeValue","lng","validatePlugin","checkPlugin","checkName","checkTarget","checkMode","checkMapStateToProps","checkMapDispatchToProps","checkReducers","every","check","s","reducers","filterValidPlugins","_splitPluginsByValida","invalidPlugins","validPlugins","splitPluginsByValidation","console","log","logInvalidPlugins","getReducersFromPlugins","acc","getConfigFromPlugins","getSagasFromPlugins","saga","accessTokensReducer","tokenServiceId","authId","serviceId","success","annotationsReducer","annotationJson","authReducer","catalogReducer","m","payload","companionWindowsReducer","companionWindows","newState","cw","orig","initialState","settings","overwriteMerge","destinationArray","sourceArray","options","configReducer","arrayMerge","elasticLayoutReducer","defaultState","items","errorsReducer","_objectSpread2","_objectSpread3","_objectSpread4","ret","message","infoId","searchId","infoResponsesReducer","degraded","infoJson","layersReducer","manifestsReducer","properties","manifestJson","manifests","searchesReducer","searchStruct","searchJson","selectedContentSearchAnnotationIds","annotationIds","search","searchHasAnnotation","values","resp","viewersReducer","preserveViewport","viewers","windowsReducer","viewType","y","visibleCanvases","windows","hasViewportPosition","viewportPosition","contains","containee","workspaceReducer","newWorkspaceDimensions","newWindowIds","draggingEnabled","createRootReducer","pluginReducers","auth","errors","searches","_marked","fetchIiifResource","_marked2","fetchIiifResourceWithAuth","_marked3","_marked4","getAccessTokenService","_marked5","fetchInfoResponse","_marked6","fetchSearchResponse","_marked7","fetchAnnotation","_marked8","fetchResourceManifest","_marked9","fetchManifests","_marked10","iiifSaga","fetchWrapper","url","then","response","statusText","_yield$select","_yield$select$preproc","preprocessors","_yield$select$postpro","postprocessors","reqOptions","_context","prev","sent","f","abrupt","t0","stop","iiifResource","_ref3","urlOptions","tokenService","_yield$call","authoritativeTokenService","_context2","headers","Authorization","accessToken","arg","put","stripAuthentication","replace","_ref4","callbacks","_context3","_ref5","String","_ref6","manifestoCompatibleResource","services","authService","token","_context4","__jsonld","match","_ref7","imageResource","_context5","_ref8","_ref9","_ref10","_ref11","_context6","_ref12","_ref13","_ref14","_context7","_ref15","_ref16","_ref17","_context8","delegateYield","_args9","_context9","_context10","all","takeEvery","fetchWindowManifest","setCanvasOnNewSequence","setCollectionPath","fetchCollectionManifests","setWindowStartingCanvas","setWindowDefaultSearchQuery","setCurrentAnnotationsOnCurrentCanvas","panToFocusedWindow","updateVisibleCanvases","setCanvasOfFirstSearchResult","_marked11","setCanvasforSelectedAnnotation","_marked12","fetchInfoResponses","_marked13","determineAndShowCollectionDialog","_marked14","windowsSaga","thunk","sequenceId","partOfs","partOf","getProperty","miradorManifest","startCanvas","_thunk","MiradorManifest","canvasAt","_action$window","defaultSearchQuery","getAnnotationsBySearch","canvasIds","accumulator","find","annotationBySearch","pan","_yield$select$viewpor","viewWidth","viewHeight","_yield$select2","switchCanvasOnSearch","_context11","visibleCanvasIds","_context12","miradorCanvas","MiradorCanvas","iiifImageResources","getServices","Boolean","_context13","_context14","importState","appSaga","_slicedToArray","entries","_ref7$config","thunks","miradorWindow","loadedManifest","defaultPosition","fetchCanvasAnnotations","fetchAnnotations","uri","_ref2$visibleCanvases","refetchInfoResponsesOnLogout","refetchInfoResponses","doAuthWorkflow","rerequestOnAccessTokenFailure","invalidateInvalidAuth","authSaga","delay","visibleImageApiIds","haveThisTokenService","obsoleteInfoResponses","e","infoTokenService","auths","_yield$select$auth","_yield$select$auth$se","nonInteractiveAuthFlowProfiles","profileConfig","serviceProfiles","accessTokenServices","authServices","launchSaga","pluginSagas","rootSaga","sagas","spawn","miradorReducer","rootReducer","sagaMiddleware","store","run","filteredPlugins","createStore","_classCallCheck","Constructor","_defineProperties","descriptor","MiradorViewer","this","render","document","getElementById","protoProps","pluginsOrStruct","struct","selectors","AnnotationResource","motivations","get","_id","on","full","motivation","isOnlyTag","join","selector","item","split","str","parseInt","AnnotationList","_this","_resources","CanvasAnnotationDisplay","zoomRatio","offset","context","svgSelector","svgContext","fragmentSelector","fragmentContext","currentPalette","globalAlpha","svgPaths","element","save","translate","Path2D","attributes","d","nodeValue","strokeStyle","setLineDash","svgToCanvasMap","fill","stroke","lineWidth","fillStyle","restore","_this$context","_this$context2","_this2","fragment","fillRect","strokeRect","DOMParser","parseFromString","svgString","getElementsByTagName","CanvasWorld","_canvasDimensions","contentResource","miradorCanvasIndex","findIndex","_this$canvasToWorldCo2","canvasToWorldCoordinates","w","h","fragmentOffset","onFragment","canvasDimensions","infoResponseId","resourceIndex","layer","imageResourceLayer","index","total","visibility","getLayerMetadata","canvasTarget","coordinates","Math","max","point","_this$canvasDirection","canvasDirection","dirX","dirY","scale","min","getHeight","getWidth","incX","incY","canvasDims","canvasHeight","canvasWidth","isNaN","aspectRatio","floor","worldHeight","abs","worldWidth","dims","thumbNavigation","canvasGroupings","thumbnailNavigationId","ThumbnailNavigation","section","section_divider","annotationCount","WindowSideBarAnnotationsPanel","availableLocales","locale","showLocalePicker","setLocale","WindowSideBarInfoPanel","collectionNavigationButton","variantTab","sequence","sequences","showToc","nodes","showMultipart","updateSequence","updateVariant","WindowSideBarCanvasPanel","requiredStatement","rights","AttributionPanel","A","removeSearch","clearChip","SearchPanel","LayersPanel","CustomPanel","attribution","parentCollectionId","parentCollection","_len2","_key2","WindowSideBarCollectionPanel","custom","info","resourceAnnotations","anno","getResource","getBody","body","resourceAnnotation","fragmentMatch","getValue","otherContent","getImages","getContent","images","getSequences","getCanvases","start","getCanvasById","MosaicLayout","corner","Corner","getPathToCorner","path","getNodeAtPath","addedWindowIds","first","second","pathToCorner","parent","pathToParent","destination","nodeAtPath","getOtherDirection","update","spec","$set","updateTree","removedWindowIds","windowPaths","removeUpdates","createRemoveUpdate","OpenSeadragonCanvasOverlay","containerWidth","containerHeight","imgAspectRatio","context2d","clearRect","clientWidth","canvasDiv","setAttribute","clientHeight","viewportOrigin","boundsRect","viewport","getBoundsNoRotate","viewportWidth","viewportHeight","image1","world","getItemAt","imgWidth","dimensions","imgHeight","viewportZoom","getZoom","zoom","viewportToImageZoom","clearBeforeRedraw","clear","center","getCenter","getFlip","rotation","getRotation","rotate","PI","setTransform","firstElementChild","current","getContext","iiifImageService","startsWith","iiifv3ImageServiceType","ThumbnailFactory","iiifOpts","staticProps","targetArea","sizes","closestSize","Number","MAX_SAFE_INTEGER","imageFitness","best","score","minDimension","_this$iiifOpts","requestedMaxHeight","requestedMaxWidth","staticImageUrl","selectBestImageSize","endsWith","isLevel0ImageProfile","isLevel2ImageProfile","round","quality","format","getFormat","_this$iiifOpts$prefer","preferredFormats","servicePreferredFormats","filteredFormats","getThumbnail","isManifest","isCanvas","getType","firstManifest","getManifests","getSourceContentResource","getPreferredImage","sourceContentResource","iiifThumbnailUrl","getBestThumbnail","TruncatedHit","_ref$maxChars","maxChars","_ref$minimum","minimum","resultingChars","measured","before","after","substring","charsOnSide","asArray","iiif","ALLOWED_ATTR","ALLOWED_TAGS","liberal","mirador2","noHtml","readImageMetadata","file","Promise","resolve","reject","reader","FileReader","addEventListener","Image","result","src","readAsDataURL","OSDReferences","refs","set","ADD_COMPANION_WINDOW","UPDATE_COMPANION_WINDOW","REMOVE_COMPANION_WINDOW","TOGGLE_TOC_NODE","UPDATE_WINDOW","REQUEST_CANVAS_ANNOTATIONS","HOVER_ANNOTATION","REQUEST_ANNOTATION","RECEIVE_ANNOTATION","RECEIVE_ANNOTATION_FAILURE","DESELECT_ANNOTATION","SELECT_ANNOTATION","TOGGLE_ANNOTATION_DISPLAY","FOCUS_WINDOW","SET_WORKSPACE_FULLSCREEN","SET_WORKSPACE_VIEWPORT_POSITION","ADD_MANIFEST","ADD_WINDOW","ADD_ERROR","IMPORT_CONFIG","IMPORT_MIRADOR_STATE","SET_CANVAS","MAXIMIZE_WINDOW","MINIMIZE_WINDOW","UPDATE_WINDOW_POSITION","SET_WINDOW_SIZE","REMOVE_WINDOW","PICK_WINDOWING_SYSTEM","REQUEST_MANIFEST","RECEIVE_MANIFEST","RECEIVE_MANIFEST_FAILURE","REMOVE_ERROR","SET_CONFIG","UPDATE_WORKSPACE","SET_WINDOW_THUMBNAIL_POSITION","SET_WINDOW_VIEW_TYPE","SET_WORKSPACE_ADD_VISIBILITY","TOGGLE_WINDOW_SIDE_BAR","TOGGLE_DRAGGING","TOGGLE_ZOOM_CONTROLS","UPDATE_CONFIG","REMOVE_MANIFEST","REQUEST_INFO_RESPONSE","RECEIVE_INFO_RESPONSE","RECEIVE_DEGRADED_INFO_RESPONSE","RECEIVE_INFO_RESPONSE_FAILURE","REMOVE_INFO_RESPONSE","UPDATE_WORKSPACE_MOSAIC_LAYOUT","UPDATE_VIEWPORT","UPDATE_ELASTIC_WINDOW_LAYOUT","ADD_AUTHENTICATION_REQUEST","RESOLVE_AUTHENTICATION_REQUEST","REQUEST_ACCESS_TOKEN","RECEIVE_ACCESS_TOKEN","RECEIVE_ACCESS_TOKEN_FAILURE","RESET_AUTHENTICATION_STATE","CLEAR_ACCESS_TOKEN_QUEUE","REQUEST_SEARCH","RECEIVE_SEARCH","RECEIVE_SEARCH_FAILURE","REMOVE_SEARCH","SET_CONTENT_SEARCH_CURRENT_ANNOTATIONS","UPDATE_LAYERS","ADD_RESOURCE","REMOVE_RESOURCE","SHOW_COLLECTION_DIALOG","HIDE_COLLECTION_DIALOG","requestAnnotation","receiveAnnotation","receiveAnnotationFailure","addAuthenticationRequest","requestAccessToken","receiveAccessToken","receiveAccessTokenFailure","newGroup","getState","ids","removeResource","defaults","addOrUpdateCompanionWindow","updatableWindowId","removeCompanionWindow","collapsedNodeIds","expand","indexOf","setConfig","updateConfig","importMiradorState","requestInfoResponse","receiveInfoResponse","receiveDegradedInfoResponse","receiveInfoResponseFailure","imageId","imageService","removeInfoResponse","requestManifest","receiveManifest","receiveManifestFailure","removeManifest","requestSearch","receiveSearch","receiveSearchFailure","setContentSearchCurrentAnnotation","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","_objectWithoutProperties","_miradorSlice","_miradorSlice$workspa","numWindows","cwThumbs","defaultCompanionWindows","defaultSideBarPanel","unshift","defaultOptions","collectionIndex","rangeId","selectedAnnotations","sideBarOpenByDefault","elastic","AnnotationItem","purpose","AnnotationPage","_items","AnnotationFactory","getAnnotations","getMotivation","createSelector","filteredMotivations","getAnnotationsOnCanvas","getPresentAnnotationsCanvas","determineAnnotation","present","getAnnotationsOnSelectedCanvases","otherProps","getPresentAnnotationsOnSelectedCanvases","getAnnotationResourcesByMotivationForCanvas","getAnnotationResourcesByMotivation","getSelectedAnnotationId","getSelectedAnnotationsOnCanvases","val","_createForOfIteratorHelper","allowArrayLike","F","normalCompletion","didErr","step","_e2","getAuthProfiles","_ref$auth","_ref$auth$serviceProf","getAccessTokens","getAuth","selectCurrentAuthServices","iiifResources","currentAuthResources","currentAuthServices","lastAttemptedService","_step","_iterator","_loop","_step2","authProfile","_iterator2","_ret","CanvasGroupings","_groupings","groupings","ceil","selectInfoResponses","getCanvas","getCurrentCanvas","getCanvasByIndex","getVisibleCanvasIds","getVisibleCanvases","getCanvasGroupings","getCanvasGrouping","getNextCanvasGrouping","currentGroupIndex","getPreviousCanvasGrouping","getCanvasLabel","getCanvasDescription","getVisibleCanvasNonTiledResources","getVisibleCanvasVideoResources","getVisibleCanvasCaptions","vttContent","getVisibleCanvasAudioResources","selectInfoResponse","iiifServiceId","getCompanionWindows","getCompanionWindow","getThumbnailNavigationPosition","getCompanionWindowIndexByWindowAndPosition","cwid","getCompanionWindowsByWindowAndPosition","getCompanionWindowsOfWindow","getCompanionWindowIdsOfWindow","getCompanionWindowsForPosition","EMPTY_ARRAY","getCompanionWindowsForContent","getCompanionWindowIdsForPosition","getCompanionAreaVisibility","selectCompanionWindowDimensions","getConfig","getExportableState","exportConfig","stem","stemAcc","k","getLanguagesFromConfigWithCurrent","availableLanguages","getShowZoomControlsConfig","getTheme","themes","getThemeIds","getContainerId","getThemeDirection","getRequestsConfig","requests","getWindowManifests","getWindows","getWindow","getViewer","getWorkspace","getWindowIds","getManifest","getCatalog","getCanvasLayers","getLayers","getSortedLayers","canvasLayers","layerConfig","sort","b","getLayersForVisibleCanvases","getLayersForCanvas","createManifestoInstance","manifestoObject","getLocale","getManifestStatus","missing","getManifestError","getContextualManifestoInstance","getManifestoInstance","getManifestLocale","property","getManifestLogo","getLogo","getManifestProvider","getManifestHomepage","homepages","getManifestRenderings","getRenderings","rendering","getManifestRelatedContent","related","getRequiredStatement","l","getValues","labelValuePair","getRights","license","getManifestThumbnail","_getConfig$thumbnails","getManifestTitle","getManifestDescription","getManifestUrl","getDestructuredMetadata","getMetadata","getManifestMetadata","getLocalesForStructure","getMetadataLocales","getLocales","getManifestSearchService","getService","getManifestAutocompleteService","_extends","hasOwnProperty","getAllParentIds","node","parentNode","getVisibleNodeIdsInSubTree","nodeIdAcc","nodeContainsVisibleCanvas","range","getCanvasIds","rangeContainsCanvasId","subTreeVisibleNodeIds","containsVisibleCanvas","descendantsContainVisibleCanvas","leaf","parentIds","getVisibleLeafAndBranchNodeIds","tree","getVisibleNodeIds","visibleLeafAndBranchNodeIds","getVisibleBranchNodeIds","getCanvasContainingNodeIds","getManuallyExpandedNodeIds","tocNodes","getExpandedNodeIds","visibleBranchNodeIds","manuallyExpandedNodeIds","manuallyClosedNodeIds","getNodeIdToScrollTo","canvasContainingNodeIds","getDefaultSidebarVariant","getSearchForWindow","getSearchForCompanionWindow","results","getSearchResponsesForCompanionWindow","getSearchQuery","getSearchIsFetching","getSearchNumTotal","_resultWithWithin$jso","_resultWithWithin$jso2","resultWithWithin","within","getNextSearchId","resultWithAnUnresolvedNext","getSearchHitsForCompanionWindow","hits","getSortedSearchHitsForCompanionWindow","getResourceAnnotationForSearchHit","annotationForSearchHit","hitA","hitB","searchResultsToAnnotation","getSearchAnnotationsForCompanionWindow","sortSearchAnnotationsByCanvasOrder","annoA","annoB","getSortedSearchAnnotationsForCompanionWindow","getSearchAnnotationsForWindow","getSelectedContentSearchAnnotationIds","getResourceAnnotationLabel","getAnnotationById","getCanvasForAnnotation","getTopRanges","topRangesOrRoot","v3RangeSequences","getRanges","getBehavior","getSequence","currentSequence","getCanvasIndex","getSequenceViewingHint","getViewingHint","getSequenceViewingDirection","getViewingDirection","getSequenceBehaviors","sequenceBehaviors","behaviors","getSequenceTreeStructure","isRange","getTree","getDefaultTree","miradorSlice","getCurrentCanvasWorld","getWindowConfig","defaultConfig","windowConfig","getWindowTitles","getMaximizedWindowsIds","getWindowViewType","manifestViewingHint","manifestBehaviors","_ref2$views","views","defaultView","getAllowedWindowViewTypes","_ref3$views","allowedViews","getWindowDraggability","manyWindows","getElasticLayout","getFullScreenEnabled","getLatestError","errorId","getWorkspaceType","getFocusedWindowId","isFocused"],"sourceRoot":""}